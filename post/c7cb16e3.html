<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Serif+SC:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"timewait7.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"flat"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":true,"preload":true}}</script><script src="/js/config.js"></script>

    <meta name="description" content="ğŸ° å¡”é˜²ç­–ç•¥æ¸¸æˆé¡¹ç›®å®ç°æŒ‡å—åŸºäºä½ æä¾›çš„æ¶æ„ï¼Œæˆ‘å°†å¼•å¯¼ä½ å®ç°ä¸€ä¸ªå®Œæ•´çš„å¡”é˜²ç­–ç•¥æ¸¸æˆã€‚æˆ‘ä»¬å°†é‡‡ç”¨æ¸è¿›å¼å®ç°ï¼Œç¡®ä¿æ¯ä¸€æ­¥éƒ½èƒ½å­¦åˆ°æ–°çŸ¥è¯†å¹¶çœ‹åˆ°æˆæœã€‚ ğŸ® æ¸¸æˆæ¦‚è¿°ï¼šã€ŠJava Defenderã€‹ä¸€ä¸ªåŸºäºJavaçš„å¡”é˜²æ¸¸æˆï¼Œæ•Œäººæ²¿ç€è·¯å¾„å‰è¿›ï¼Œç©å®¶é€šè¿‡æ”¾ç½®é˜²å¾¡å¡”æ¥é˜»æ­¢æ•Œäººã€‚ ğŸ“‹ å®ç°è·¯çº¿å›¾ç¬¬1å‘¨ï¼šæ­å»ºé¡¹ç›®åŸºç¡€æ¡†æ¶æ­¥éª¤1ï¼šåˆå§‹åŒ–é¡¹ç›®ç»“æ„bash 123456789101112131415161718#">
<meta property="og:type" content="article">
<meta property="og:title" content="å¤šè¯­è¨€å¡”é˜²æ¸¸æˆè®¾è®¡ä¸å®ç°">
<meta property="og:url" content="http://timewait7.github.io/post/c7cb16e3.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="ğŸ° å¡”é˜²ç­–ç•¥æ¸¸æˆé¡¹ç›®å®ç°æŒ‡å—åŸºäºä½ æä¾›çš„æ¶æ„ï¼Œæˆ‘å°†å¼•å¯¼ä½ å®ç°ä¸€ä¸ªå®Œæ•´çš„å¡”é˜²ç­–ç•¥æ¸¸æˆã€‚æˆ‘ä»¬å°†é‡‡ç”¨æ¸è¿›å¼å®ç°ï¼Œç¡®ä¿æ¯ä¸€æ­¥éƒ½èƒ½å­¦åˆ°æ–°çŸ¥è¯†å¹¶çœ‹åˆ°æˆæœã€‚ ğŸ® æ¸¸æˆæ¦‚è¿°ï¼šã€ŠJava Defenderã€‹ä¸€ä¸ªåŸºäºJavaçš„å¡”é˜²æ¸¸æˆï¼Œæ•Œäººæ²¿ç€è·¯å¾„å‰è¿›ï¼Œç©å®¶é€šè¿‡æ”¾ç½®é˜²å¾¡å¡”æ¥é˜»æ­¢æ•Œäººã€‚ ğŸ“‹ å®ç°è·¯çº¿å›¾ç¬¬1å‘¨ï¼šæ­å»ºé¡¹ç›®åŸºç¡€æ¡†æ¶æ­¥éª¤1ï¼šåˆå§‹åŒ–é¡¹ç›®ç»“æ„bash 123456789101112131415161718#">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-12-19T10:41:30.000Z">
<meta property="article:modified_time" content="2025-12-19T10:41:55.334Z">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://timewait7.github.io/post/c7cb16e3.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://timewait7.github.io/post/c7cb16e3.html","path":"post/c7cb16e3.html","title":"å¤šè¯­è¨€å¡”é˜²æ¸¸æˆè®¾è®¡ä¸å®ç°"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>å¤šè¯­è¨€å¡”é˜²æ¸¸æˆè®¾è®¡ä¸å®ç° | Hexo</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Hexo</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-archives"><a href="/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="Searching..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%F0%9F%8F%B0-%E5%A1%94%E9%98%B2%E7%AD%96%E7%95%A5%E6%B8%B8%E6%88%8F%E9%A1%B9%E7%9B%AE%E5%AE%9E%E7%8E%B0%E6%8C%87%E5%8D%97"><span class="nav-number">1.</span> <span class="nav-text">ğŸ° å¡”é˜²ç­–ç•¥æ¸¸æˆé¡¹ç›®å®ç°æŒ‡å—</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%8E%AE-%E6%B8%B8%E6%88%8F%E6%A6%82%E8%BF%B0%EF%BC%9A%E3%80%8AJava-Defender%E3%80%8B"><span class="nav-number">1.1.</span> <span class="nav-text">ğŸ® æ¸¸æˆæ¦‚è¿°ï¼šã€ŠJava Defenderã€‹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%93%8B-%E5%AE%9E%E7%8E%B0%E8%B7%AF%E7%BA%BF%E5%9B%BE"><span class="nav-number">1.2.</span> <span class="nav-text">ğŸ“‹ å®ç°è·¯çº¿å›¾</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC1%E5%91%A8%EF%BC%9A%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6"><span class="nav-number">1.2.1.</span> <span class="nav-text">ç¬¬1å‘¨ï¼šæ­å»ºé¡¹ç›®åŸºç¡€æ¡†æ¶</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A41%EF%BC%9A%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">æ­¥éª¤1ï¼šåˆå§‹åŒ–é¡¹ç›®ç»“æ„</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A42%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%9F%BA%E7%A1%80%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B%EF%BC%88domain%E5%8C%85%EF%BC%89"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">æ­¥éª¤2ï¼šåˆ›å»ºåŸºç¡€é¢†åŸŸæ¨¡å‹ï¼ˆdomainåŒ…ï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A43%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%B8%B8%E6%88%8F%E5%9C%B0%E5%9B%BE%E7%B1%BB"><span class="nav-number">1.2.1.3.</span> <span class="nav-text">æ­¥éª¤3ï¼šåˆ›å»ºæ¸¸æˆåœ°å›¾ç±»</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC2%E5%91%A8%EF%BC%9A%E5%AE%9E%E7%8E%B0%E6%B8%B8%E6%88%8F%E5%BC%95%E6%93%8E%E6%A0%B8%E5%BF%83%EF%BC%88engine%E5%8C%85%EF%BC%89"><span class="nav-number">1.2.2.</span> <span class="nav-text">ç¬¬2å‘¨ï¼šå®ç°æ¸¸æˆå¼•æ“æ ¸å¿ƒï¼ˆengineåŒ…ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A44%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%B8%B8%E6%88%8F%E5%BC%95%E6%93%8E"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">æ­¥éª¤4ï¼šåˆ›å»ºæ¸¸æˆå¼•æ“</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A45%EF%BC%9A%E5%88%9B%E5%BB%BA%E7%8E%A9%E5%AE%B6%E7%B1%BB"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">æ­¥éª¤5ï¼šåˆ›å»ºç©å®¶ç±»</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC3%E5%91%A8%EF%BC%9A%E5%AE%9E%E7%8E%B0%E6%B8%B8%E6%88%8F%E6%9C%8D%E5%8A%A1%EF%BC%88service%E5%8C%85%EF%BC%89"><span class="nav-number">1.2.3.</span> <span class="nav-text">ç¬¬3å‘¨ï¼šå®ç°æ¸¸æˆæœåŠ¡ï¼ˆserviceåŒ…ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A46%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%95%8C%E4%BA%BA%E7%94%9F%E6%88%90%E6%9C%8D%E5%8A%A1"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">æ­¥éª¤6ï¼šåˆ›å»ºæ•Œäººç”ŸæˆæœåŠ¡</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A47%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%B8%B8%E6%88%8F%E9%85%8D%E7%BD%AE%E6%9C%8D%E5%8A%A1"><span class="nav-number">1.2.3.2.</span> <span class="nav-text">æ­¥éª¤7ï¼šåˆ›å»ºæ¸¸æˆé…ç½®æœåŠ¡</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC4%E5%91%A8%EF%BC%9A%E5%AE%9E%E7%8E%B0AI%E6%A8%A1%E5%9D%97%E5%92%8C%E4%B8%BB%E7%A8%8B%E5%BA%8F"><span class="nav-number">1.2.4.</span> <span class="nav-text">ç¬¬4å‘¨ï¼šå®ç°AIæ¨¡å—å’Œä¸»ç¨‹åº</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A48%EF%BC%9A%E5%88%9B%E5%BB%BA%E7%AE%80%E5%8D%95%E7%9A%84AI%E6%A8%A1%E5%9D%97"><span class="nav-number">1.2.4.1.</span> <span class="nav-text">æ­¥éª¤8ï¼šåˆ›å»ºç®€å•çš„AIæ¨¡å—</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A49%EF%BC%9A%E5%88%9B%E5%BB%BA%E4%B8%BB%E7%A8%8B%E5%BA%8F%E5%85%A5%E5%8F%A3"><span class="nav-number">1.2.4.2.</span> <span class="nav-text">æ­¥éª¤9ï¼šåˆ›å»ºä¸»ç¨‹åºå…¥å£</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC5%E5%91%A8%EF%BC%9A%E5%AE%9E%E7%8E%B0%E5%B7%A5%E5%85%B7%E8%84%9A%E6%9C%AC%EF%BC%88tools%E5%8C%85%EF%BC%89"><span class="nav-number">1.2.5.</span> <span class="nav-text">ç¬¬5å‘¨ï¼šå®ç°å·¥å…·è„šæœ¬ï¼ˆtoolsåŒ…ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A410%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%9C%B0%E5%9B%BE%E7%BC%96%E8%BE%91%E5%99%A8%EF%BC%88Python%EF%BC%89"><span class="nav-number">1.2.5.1.</span> <span class="nav-text">æ­¥éª¤10ï¼šåˆ›å»ºåœ°å›¾ç¼–è¾‘å™¨ï¼ˆPythonï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A411%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E7%94%9F%E6%88%90%E8%84%9A%E6%9C%AC%EF%BC%88Python%EF%BC%89"><span class="nav-number">1.2.5.2.</span> <span class="nav-text">æ­¥éª¤11ï¼šåˆ›å»ºæ•°æ®ç”Ÿæˆè„šæœ¬ï¼ˆPythonï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A412%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%9E%84%E5%BB%BA%E8%84%9A%E6%9C%AC%EF%BC%88Shell%EF%BC%89"><span class="nav-number">1.2.5.3.</span> <span class="nav-text">æ­¥éª¤12ï¼šåˆ›å»ºæ„å»ºè„šæœ¬ï¼ˆShellï¼‰</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC6%E5%91%A8%EF%BC%9A%E5%AE%9E%E7%8E%B0Web%E7%95%8C%E9%9D%A2%E5%92%8C%E6%96%87%E6%A1%A3"><span class="nav-number">1.2.6.</span> <span class="nav-text">ç¬¬6å‘¨ï¼šå®ç°Webç•Œé¢å’Œæ–‡æ¡£</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A413%EF%BC%9A%E5%88%9B%E5%BB%BA%E7%AE%80%E5%8D%95%E7%9A%84Web%E7%95%8C%E9%9D%A2"><span class="nav-number">1.2.6.1.</span> <span class="nav-text">æ­¥éª¤13ï¼šåˆ›å»ºç®€å•çš„Webç•Œé¢</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A414%EF%BC%9A%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3"><span class="nav-number">1.2.6.2.</span> <span class="nav-text">æ­¥éª¤14ï¼šåˆ›å»ºé¡¹ç›®æ–‡æ¡£</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%93%81-%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="nav-number">1.3.</span> <span class="nav-text">ğŸ“ é¡¹ç›®ç»“æ„</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%8E%AE-%E6%B8%B8%E6%88%8F%E7%89%B9%E6%80%A7"><span class="nav-number">1.4.</span> <span class="nav-text">ğŸ® æ¸¸æˆç‰¹æ€§</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7"><span class="nav-number">1.4.1.</span> <span class="nav-text">æ ¸å¿ƒç‰¹æ€§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%A9%E5%B1%95%E7%89%B9%E6%80%A7"><span class="nav-number">1.4.2.</span> <span class="nav-text">æ‰©å±•ç‰¹æ€§</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%94%A7-%E6%8A%80%E6%9C%AF%E6%A0%88"><span class="nav-number">1.5.</span> <span class="nav-text">ğŸ”§ æŠ€æœ¯æ ˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%8E%E7%AB%AF%EF%BC%88Java%EF%BC%89"><span class="nav-number">1.5.1.</span> <span class="nav-text">åç«¯ï¼ˆJavaï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%EF%BC%88Web%EF%BC%89"><span class="nav-number">1.5.2.</span> <span class="nav-text">å‰ç«¯ï¼ˆWebï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B7%A5%E5%85%B7%E9%93%BE"><span class="nav-number">1.5.3.</span> <span class="nav-text">å·¥å…·é“¾</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%A7%AA-%E6%B5%8B%E8%AF%95"><span class="nav-number">1.6.</span> <span class="nav-text">ğŸ§ª æµ‹è¯•</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%93%9A-%E5%BC%80%E5%8F%91%E6%96%87%E6%A1%A3"><span class="nav-number">1.7.</span> <span class="nav-text">ğŸ“š å¼€å‘æ–‡æ¡£</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%8E%AF-%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87"><span class="nav-number">1.8.</span> <span class="nav-text">ğŸ¯ å­¦ä¹ ç›®æ ‡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%A4%9D-%E8%B4%A1%E7%8C%AE"><span class="nav-number">1.9.</span> <span class="nav-text">ğŸ¤ è´¡çŒ®</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%93%84-%E8%AE%B8%E5%8F%AF%E8%AF%81"><span class="nav-number">1.10.</span> <span class="nav-text">ğŸ“„ è®¸å¯è¯</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F-%E6%B8%B8%E6%88%8F%E4%BA%8B%E4%BB%B6"><span class="nav-number">1.10.1.</span> <span class="nav-text">2.2 è§‚å¯Ÿè€…æ¨¡å¼ - æ¸¸æˆäº‹ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F-AI%E8%A1%8C%E4%B8%BA"><span class="nav-number">1.10.2.</span> <span class="nav-text">2.3 ç­–ç•¥æ¨¡å¼ - AIè¡Œä¸º</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E6%95%B0%E6%8D%AE%E6%B5%81%E8%AE%BE%E8%AE%A1"><span class="nav-number">1.11.</span> <span class="nav-text">3. æ•°æ®æµè®¾è®¡</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-%E6%B8%B8%E6%88%8F%E4%B8%BB%E5%BE%AA%E7%8E%AF"><span class="nav-number">1.11.1.</span> <span class="nav-text">3.1 æ¸¸æˆä¸»å¾ªç¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96"><span class="nav-number">1.11.2.</span> <span class="nav-text">3.2 æ•°æ®æŒä¹…åŒ–</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E6%80%A7%E8%83%BD%E8%80%83%E8%99%91"><span class="nav-number">1.12.</span> <span class="nav-text">4. æ€§èƒ½è€ƒè™‘</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86"><span class="nav-number">1.12.1.</span> <span class="nav-text">4.1 å†…å­˜ç®¡ç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-%E6%B8%B2%E6%9F%93%E4%BC%98%E5%8C%96"><span class="nav-number">1.12.2.</span> <span class="nav-text">4.2 æ¸²æŸ“ä¼˜åŒ–</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8"><span class="nav-number">1.12.3.</span> <span class="nav-text">4.3 çº¿ç¨‹å®‰å…¨</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E6%89%A9%E5%B1%95%E6%80%A7%E8%AE%BE%E8%AE%A1"><span class="nav-number">1.13.</span> <span class="nav-text">5. æ‰©å±•æ€§è®¾è®¡</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-%E6%8F%92%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-number">1.13.1.</span> <span class="nav-text">5.1 æ’ä»¶ç³»ç»Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-%E9%85%8D%E7%BD%AE%E9%A9%B1%E5%8A%A8"><span class="nav-number">1.13.2.</span> <span class="nav-text">5.2 é…ç½®é©±åŠ¨</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E9%83%A8%E7%BD%B2%E6%9E%B6%E6%9E%84"><span class="nav-number">1.14.</span> <span class="nav-text">6. éƒ¨ç½²æ¶æ„</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2"><span class="nav-number">1.14.1.</span> <span class="nav-text">6.1 å•æœºéƒ¨ç½²</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-Web%E9%83%A8%E7%BD%B2"><span class="nav-number">1.14.2.</span> <span class="nav-text">6.2 Webéƒ¨ç½²</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-%E7%9B%91%E6%8E%A7%E5%92%8C%E6%97%A5%E5%BF%97"><span class="nav-number">1.15.</span> <span class="nav-text">7. ç›‘æ§å’Œæ—¥å¿—</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1-%E6%97%A5%E5%BF%97%E7%B3%BB%E7%BB%9F"><span class="nav-number">1.15.1.</span> <span class="nav-text">7.1 æ—¥å¿—ç³»ç»Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2-%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7"><span class="nav-number">1.15.2.</span> <span class="nav-text">7.2 æ€§èƒ½ç›‘æ§</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC7%E5%91%A8%EF%BC%9A%E5%A2%9E%E5%BC%BA%E6%B8%B8%E6%88%8F%E5%BC%95%E6%93%8E"><span class="nav-number">1.16.</span> <span class="nav-text">ç¬¬7å‘¨ï¼šå¢å¼ºæ¸¸æˆå¼•æ“</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A415%EF%BC%9A%E5%AE%8C%E5%96%84%E6%95%8C%E4%BA%BA%E5%92%8C%E9%98%B2%E5%BE%A1%E5%A1%94%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.16.1.</span> <span class="nav-text">æ­¥éª¤15ï¼šå®Œå–„æ•Œäººå’Œé˜²å¾¡å¡”ç±»å‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A416%EF%BC%9A%E6%B7%BB%E5%8A%A0%E5%8D%87%E7%BA%A7%E7%B3%BB%E7%BB%9F"><span class="nav-number">1.16.2.</span> <span class="nav-text">æ­¥éª¤16ï¼šæ·»åŠ å‡çº§ç³»ç»Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A417%EF%BC%9A%E6%B7%BB%E5%8A%A0%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E4%BF%9D%E5%AD%98%E5%92%8C%E5%8A%A0%E8%BD%BD"><span class="nav-number">1.16.3.</span> <span class="nav-text">æ­¥éª¤17ï¼šæ·»åŠ æ¸¸æˆçŠ¶æ€ä¿å­˜å’ŒåŠ è½½</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC8%E5%91%A8%EF%BC%9A%E5%AE%8C%E5%96%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%95%8C%E9%9D%A2"><span class="nav-number">1.17.</span> <span class="nav-text">ç¬¬8å‘¨ï¼šå®Œå–„å‘½ä»¤è¡Œç•Œé¢</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A418%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%9B%B4%E4%B8%B0%E5%AF%8C%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%95%8C%E9%9D%A2"><span class="nav-number">1.17.1.</span> <span class="nav-text">æ­¥éª¤18ï¼šåˆ›å»ºæ›´ä¸°å¯Œçš„å‘½ä»¤è¡Œç•Œé¢</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC9%E5%91%A8%EF%BC%9A%E6%B7%BB%E5%8A%A0%E6%9B%B4%E5%A4%9A%E5%B7%A5%E5%85%B7%E8%84%9A%E6%9C%AC"><span class="nav-number">1.18.</span> <span class="nav-text">ç¬¬9å‘¨ï¼šæ·»åŠ æ›´å¤šå·¥å…·è„šæœ¬</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A419%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%AC%EF%BC%88Python%EF%BC%89"><span class="nav-number">1.18.1.</span> <span class="nav-text">æ­¥éª¤19ï¼šåˆ›å»ºæ€§èƒ½æµ‹è¯•è„šæœ¬ï¼ˆPythonï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A420%EF%BC%9A%E5%88%9B%E5%BB%BA%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%AC%EF%BC%88Shell%EF%BC%89"><span class="nav-number">1.18.2.</span> <span class="nav-text">æ­¥éª¤20ï¼šåˆ›å»ºè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ï¼ˆShellï¼‰</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC10%E5%91%A8%EF%BC%9A%E5%AE%8C%E5%96%84%E6%96%87%E6%A1%A3%E5%92%8C%E9%83%A8%E7%BD%B2"><span class="nav-number">1.19.</span> <span class="nav-text">ç¬¬10å‘¨ï¼šå®Œå–„æ–‡æ¡£å’Œéƒ¨ç½²</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A421%EF%BC%9A%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C%E5%92%8CAPI%E6%96%87%E6%A1%A3"><span class="nav-number">1.19.1.</span> <span class="nav-text">æ­¥éª¤21ï¼šåˆ›å»ºç”¨æˆ·æ‰‹å†Œå’ŒAPIæ–‡æ¡£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A422%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E9%85%8D%E7%BD%AE%EF%BC%88GitHub-Actions%EF%BC%89"><span class="nav-number">1.19.2.</span> <span class="nav-text">æ­¥éª¤22ï¼šåˆ›å»ºæŒç»­é›†æˆé…ç½®ï¼ˆGitHub Actionsï¼‰</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">1.20.</span> <span class="nav-text">æ€»ç»“</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%F0%9F%9A%80-%E6%B7%B1%E5%85%A5%E6%89%A9%E5%B1%95%E4%B8%8E%E5%AE%8C%E5%96%84%E7%AD%96%E7%95%A5%E6%B8%B8%E6%88%8F%E9%A1%B9%E7%9B%AE"><span class="nav-number">2.</span> <span class="nav-text">ğŸš€ æ·±å…¥æ‰©å±•ä¸å®Œå–„ç­–ç•¥æ¸¸æˆé¡¹ç›®</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%93%88-%E9%98%B6%E6%AE%B5%E4%BA%8C%EF%BC%9A%E4%B8%93%E4%B8%9A%E7%BA%A7%E6%89%A9%E5%B1%95%EF%BC%88%E7%AC%AC7-12%E5%91%A8%EF%BC%89"><span class="nav-number">2.1.</span> <span class="nav-text">ğŸ“ˆ é˜¶æ®µäºŒï¼šä¸“ä¸šçº§æ‰©å±•ï¼ˆç¬¬7-12å‘¨ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC7%E5%91%A8%EF%BC%9A%E5%AE%9E%E7%8E%B0%E6%9B%B4%E5%A4%8D%E6%9D%82%E7%9A%84%E6%B8%B8%E6%88%8F%E6%9C%BA%E5%88%B6"><span class="nav-number">2.1.1.</span> <span class="nav-text">ç¬¬7å‘¨ï¼šå®ç°æ›´å¤æ‚çš„æ¸¸æˆæœºåˆ¶</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A415%EF%BC%9A%E5%AE%8C%E5%96%84%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B%E5%92%8C%E6%B8%B8%E6%88%8F%E6%9C%BA%E5%88%B6"><span class="nav-number">2.1.1.1.</span> <span class="nav-text">æ­¥éª¤15ï¼šå®Œå–„é¢†åŸŸæ¨¡å‹å’Œæ¸¸æˆæœºåˆ¶</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC8%E5%91%A8%EF%BC%9A%E5%AE%9E%E7%8E%B0%E9%AB%98%E7%BA%A7AI%E7%B3%BB%E7%BB%9F"><span class="nav-number">2.1.2.</span> <span class="nav-text">ç¬¬8å‘¨ï¼šå®ç°é«˜çº§AIç³»ç»Ÿ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A416%EF%BC%9A%E5%9F%BA%E4%BA%8E%E8%A1%8C%E4%B8%BA%E6%A0%91%E7%9A%84AI%E7%B3%BB%E7%BB%9F"><span class="nav-number">2.1.2.1.</span> <span class="nav-text">æ­¥éª¤16ï¼šåŸºäºè¡Œä¸ºæ ‘çš„AIç³»ç»Ÿ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A417%EF%BC%9A%E5%AE%9E%E7%8E%B0%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9CAI%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%8C%E5%B1%95%E7%A4%BA%E9%AB%98%E7%BA%A7%E8%83%BD%E5%8A%9B%EF%BC%89"><span class="nav-number">2.1.2.2.</span> <span class="nav-text">æ­¥éª¤17ï¼šå®ç°ç¥ç»ç½‘ç»œAIï¼ˆå¯é€‰ï¼Œå±•ç¤ºé«˜çº§èƒ½åŠ›ï¼‰</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC9%E5%91%A8%EF%BC%9A%E5%AE%9E%E7%8E%B0%E7%BD%91%E7%BB%9C%E5%A4%9A%E4%BA%BA%E6%B8%B8%E6%88%8F%E5%8A%9F%E8%83%BD"><span class="nav-number">2.1.3.</span> <span class="nav-text">ç¬¬9å‘¨ï¼šå®ç°ç½‘ç»œå¤šäººæ¸¸æˆåŠŸèƒ½</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A418%EF%BC%9A%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E6%9E%B6%E6%9E%84"><span class="nav-number">2.1.3.1.</span> <span class="nav-text">æ­¥éª¤18ï¼šç½‘ç»œé€šä¿¡æ¶æ„</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC10%E5%91%A8%EF%BC%9A%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%92%8C%E7%9B%91%E6%8E%A7"><span class="nav-number">2.1.4.</span> <span class="nav-text">ç¬¬10å‘¨ï¼šæ€§èƒ½ä¼˜åŒ–å’Œç›‘æ§</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A419%EF%BC%9A%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%B7%A5%E5%85%B7%E5%92%8C%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F"><span class="nav-number">2.1.4.1.</span> <span class="nav-text">æ­¥éª¤19ï¼šæ€§èƒ½ä¼˜åŒ–å·¥å…·å’Œç›‘æ§ç³»ç»Ÿ</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC11%E5%91%A8%EF%BC%9A%E5%AE%9E%E7%8E%B0%E4%B8%93%E4%B8%9A%E7%BA%A7%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2"><span class="nav-number">2.1.5.</span> <span class="nav-text">ç¬¬11å‘¨ï¼šå®ç°ä¸“ä¸šçº§å›¾å½¢ç•Œé¢</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A420%EF%BC%9A%E4%BD%BF%E7%94%A8JavaFX%E5%AE%9E%E7%8E%B0%E9%AB%98%E7%BA%A7UI"><span class="nav-number">2.1.5.1.</span> <span class="nav-text">æ­¥éª¤20ï¼šä½¿ç”¨JavaFXå®ç°é«˜çº§UI</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC12%E5%91%A8%EF%BC%9A%E4%BC%81%E4%B8%9A%E7%BA%A7%E9%83%A8%E7%BD%B2%E5%92%8C%E8%BF%90%E7%BB%B4"><span class="nav-number">2.1.6.</span> <span class="nav-text">ç¬¬12å‘¨ï¼šä¼ä¸šçº§éƒ¨ç½²å’Œè¿ç»´</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A421%EF%BC%9ADocker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2"><span class="nav-number">2.1.6.1.</span> <span class="nav-text">æ­¥éª¤21ï¼šDockerå®¹å™¨åŒ–éƒ¨ç½²</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A422%EF%BC%9ACI-CD%E6%B5%81%E6%B0%B4%E7%BA%BF"><span class="nav-number">2.1.6.2.</span> <span class="nav-text">æ­¥éª¤22ï¼šCI&#x2F;CDæµæ°´çº¿</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%93%8A-%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93%E4%B8%8E%E5%B1%95%E7%A4%BA"><span class="nav-number">2.2.</span> <span class="nav-text">ğŸ“Š é¡¹ç›®æ€»ç»“ä¸å±•ç¤º</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%80%E7%BB%88%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="nav-number">2.2.1.</span> <span class="nav-text">æœ€ç»ˆé¡¹ç›®ç»“æ„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E6%9C%AF%E6%A0%88%E6%80%BB%E7%BB%93"><span class="nav-number">2.2.2.</span> <span class="nav-text">æŠ€æœ¯æ ˆæ€»ç»“</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%A2%E8%AF%95%E5%B1%95%E7%A4%BA%E8%A6%81%E7%82%B9"><span class="nav-number">2.2.3.</span> <span class="nav-text">é¢è¯•å±•ç¤ºè¦ç‚¹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8B%E4%B8%80%E6%AD%A5%E5%BB%BA%E8%AE%AE"><span class="nav-number">2.2.4.</span> <span class="nav-text">ä¸‹ä¸€æ­¥å»ºè®®</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name"></p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/">
          <span class="site-state-item-count">59</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">23</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="Back to top">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>

    
        <div class="sidebar-inner sidebar-post-related">
          <div class="animated">
              <div class="links-of-blogroll-title"><i class="fa fa-signs-post fa-fw"></i>
    Related Posts
  </div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/post/1aa6cbcd.html" rel="bookmark">
        <time class="popular-posts-time">2025-10-04</time>
        <br>
      å‘½ä»¤é€ŸæŸ¥è¡¨
      </a>
    </li>
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/post/c25083a1.html" rel="bookmark">
        <time class="popular-posts-time">2025-12-17</time>
        <br>
      Javaå®è·µ:ä¸ªäººåšå®¢
      </a>
    </li>
  </ul>

          </div>
        </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://timewait7.github.io/post/c7cb16e3.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="å¤šè¯­è¨€å¡”é˜²æ¸¸æˆè®¾è®¡ä¸å®ç° | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          å¤šè¯­è¨€å¡”é˜²æ¸¸æˆè®¾è®¡ä¸å®ç°
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-12-19 18:41:30" itemprop="dateCreated datePublished" datetime="2025-12-19T18:41:30+08:00">2025-12-19</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>18k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1:04</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="ğŸ°-å¡”é˜²ç­–ç•¥æ¸¸æˆé¡¹ç›®å®ç°æŒ‡å—"><a href="#ğŸ°-å¡”é˜²ç­–ç•¥æ¸¸æˆé¡¹ç›®å®ç°æŒ‡å—" class="headerlink" title="ğŸ° å¡”é˜²ç­–ç•¥æ¸¸æˆé¡¹ç›®å®ç°æŒ‡å—"></a>ğŸ° å¡”é˜²ç­–ç•¥æ¸¸æˆé¡¹ç›®å®ç°æŒ‡å—</h1><p>åŸºäºä½ æä¾›çš„æ¶æ„ï¼Œæˆ‘å°†å¼•å¯¼ä½ å®ç°ä¸€ä¸ªå®Œæ•´çš„å¡”é˜²ç­–ç•¥æ¸¸æˆã€‚æˆ‘ä»¬å°†é‡‡ç”¨<strong>æ¸è¿›å¼å®ç°</strong>ï¼Œç¡®ä¿æ¯ä¸€æ­¥éƒ½èƒ½å­¦åˆ°æ–°çŸ¥è¯†å¹¶çœ‹åˆ°æˆæœã€‚</p>
<h2 id="ğŸ®-æ¸¸æˆæ¦‚è¿°ï¼šã€ŠJava-Defenderã€‹"><a href="#ğŸ®-æ¸¸æˆæ¦‚è¿°ï¼šã€ŠJava-Defenderã€‹" class="headerlink" title="ğŸ® æ¸¸æˆæ¦‚è¿°ï¼šã€ŠJava Defenderã€‹"></a>ğŸ® æ¸¸æˆæ¦‚è¿°ï¼š<strong>ã€ŠJava Defenderã€‹</strong></h2><p>ä¸€ä¸ªåŸºäºJavaçš„å¡”é˜²æ¸¸æˆï¼Œæ•Œäººæ²¿ç€è·¯å¾„å‰è¿›ï¼Œç©å®¶é€šè¿‡æ”¾ç½®é˜²å¾¡å¡”æ¥é˜»æ­¢æ•Œäººã€‚</p>
<h2 id="ğŸ“‹-å®ç°è·¯çº¿å›¾"><a href="#ğŸ“‹-å®ç°è·¯çº¿å›¾" class="headerlink" title="ğŸ“‹ å®ç°è·¯çº¿å›¾"></a>ğŸ“‹ å®ç°è·¯çº¿å›¾</h2><h3 id="ç¬¬1å‘¨ï¼šæ­å»ºé¡¹ç›®åŸºç¡€æ¡†æ¶"><a href="#ç¬¬1å‘¨ï¼šæ­å»ºé¡¹ç›®åŸºç¡€æ¡†æ¶" class="headerlink" title="ç¬¬1å‘¨ï¼šæ­å»ºé¡¹ç›®åŸºç¡€æ¡†æ¶"></a><strong>ç¬¬1å‘¨ï¼šæ­å»ºé¡¹ç›®åŸºç¡€æ¡†æ¶</strong></h3><h4 id="æ­¥éª¤1ï¼šåˆå§‹åŒ–é¡¹ç›®ç»“æ„"><a href="#æ­¥éª¤1ï¼šåˆå§‹åŒ–é¡¹ç›®ç»“æ„" class="headerlink" title="æ­¥éª¤1ï¼šåˆå§‹åŒ–é¡¹ç›®ç»“æ„"></a><strong>æ­¥éª¤1ï¼šåˆå§‹åŒ–é¡¹ç›®ç»“æ„</strong></h4><p>bash</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„</span><br><span class="line">mkdir -p java-strategy-game/&#123;game-core/src/main/java/com/javagame,tools,game-ui,docs&#125;</span><br><span class="line">cd java-strategy-game</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºæ ‡å‡†Javaé¡¹ç›®ç»“æ„</span><br><span class="line">game-core/src/main/java/com/javagame/</span><br><span class="line">â”œâ”€â”€ domain/</span><br><span class="line">â”œâ”€â”€ engine/</span><br><span class="line">â”œâ”€â”€ ai/</span><br><span class="line">â”œâ”€â”€ service/</span><br><span class="line">â””â”€â”€ Main.java</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºMavené¡¹ç›®</span><br><span class="line">cd game-core</span><br><span class="line">mvn archetype:generate -DgroupId=com.javagame \</span><br><span class="line">                       -DartifactId=tower-defense \</span><br><span class="line">                       -DarchetypeArtifactId=maven-archetype-quickstart \</span><br><span class="line">                       -DinteractiveMode=false</span><br></pre></td></tr></table></figure>



<h4 id="æ­¥éª¤2ï¼šåˆ›å»ºåŸºç¡€é¢†åŸŸæ¨¡å‹ï¼ˆdomainåŒ…ï¼‰"><a href="#æ­¥éª¤2ï¼šåˆ›å»ºåŸºç¡€é¢†åŸŸæ¨¡å‹ï¼ˆdomainåŒ…ï¼‰" class="headerlink" title="æ­¥éª¤2ï¼šåˆ›å»ºåŸºç¡€é¢†åŸŸæ¨¡å‹ï¼ˆdomainåŒ…ï¼‰"></a><strong>æ­¥éª¤2ï¼šåˆ›å»ºåŸºç¡€é¢†åŸŸæ¨¡å‹ï¼ˆdomainåŒ…ï¼‰</strong></h4><p>åˆ›å»º <code>game-core/src/main/java/com/javagame/domain/</code></p>
<p><strong>1. æ¸¸æˆåæ ‡ç‚¹ç±»</strong></p>
<p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// Point.java</span><br><span class="line">package com.javagame.domain;</span><br><span class="line"></span><br><span class="line">public class Point &#123;</span><br><span class="line">    private final int x;</span><br><span class="line">    private final int y;</span><br><span class="line">    </span><br><span class="line">    public Point(int x, int y) &#123;</span><br><span class="line">        this.x = x;</span><br><span class="line">        this.y = y;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // Getters, equals, hashCodeç­‰æ–¹æ³•</span><br><span class="line">    public int getX() &#123; return x; &#125;</span><br><span class="line">    public int getY() &#123; return y; &#125;</span><br><span class="line">    </span><br><span class="line">    public double distanceTo(Point other) &#123;</span><br><span class="line">        int dx = x - other.x;</span><br><span class="line">        int dy = y - other.y;</span><br><span class="line">        return Math.sqrt(dx * dx + dy * dy);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return String.format(&quot;(%d, %d)&quot;, x, y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>2. æ•ŒäººåŸºç¡€ç±»</strong></p>
<p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">// Enemy.java</span><br><span class="line">package com.javagame.domain;</span><br><span class="line"></span><br><span class="line">public class Enemy &#123;</span><br><span class="line">    private final String id;</span><br><span class="line">    private final String type;</span><br><span class="line">    private Point position;</span><br><span class="line">    private int health;</span><br><span class="line">    private final int maxHealth;</span><br><span class="line">    private final int speed;</span><br><span class="line">    private final int reward; // å‡»è´¥åè·å¾—çš„é‡‘é’±</span><br><span class="line">    </span><br><span class="line">    public Enemy(String id, String type, Point startPosition, </span><br><span class="line">                 int health, int speed, int reward) &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">        this.type = type;</span><br><span class="line">        this.position = startPosition;</span><br><span class="line">        this.health = this.maxHealth = health;</span><br><span class="line">        this.speed = speed;</span><br><span class="line">        this.reward = reward;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // ç§»åŠ¨æ–¹æ³•</span><br><span class="line">    public void move(Point target) &#123;</span><br><span class="line">        // ç®€å•ç§»åŠ¨é€»è¾‘ï¼Œå®é™…ä¼šæ ¹æ®è·¯å¾„ç§»åŠ¨</span><br><span class="line">        int dx = target.getX() - position.getX();</span><br><span class="line">        int dy = target.getY() - position.getY();</span><br><span class="line">        </span><br><span class="line">        // å½’ä¸€åŒ–å¹¶åº”ç”¨é€Ÿåº¦</span><br><span class="line">        double distance = Math.sqrt(dx * dx + dy * dy);</span><br><span class="line">        if (distance &gt; 0) &#123;</span><br><span class="line">            int newX = (int)(position.getX() + (dx / distance) * speed);</span><br><span class="line">            int newY = (int)(position.getY() + (dy / distance) * speed);</span><br><span class="line">            position = new Point(newX, newY);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // å—ä¼¤æ–¹æ³•</span><br><span class="line">    public void takeDamage(int damage) &#123;</span><br><span class="line">        health = Math.max(0, health - damage);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public boolean isAlive() &#123;</span><br><span class="line">        return health &gt; 0;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // Getters</span><br><span class="line">    public Point getPosition() &#123; return position; &#125;</span><br><span class="line">    public int getHealth() &#123; return health; &#125;</span><br><span class="line">    public int getMaxHealth() &#123; return maxHealth; &#125;</span><br><span class="line">    public int getReward() &#123; return reward; &#125;</span><br><span class="line">    public String getType() &#123; return type; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>3. é˜²å¾¡å¡”åŸºç¡€ç±»</strong></p>
<p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">// Tower.java</span><br><span class="line">package com.javagame.domain;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">public class Tower &#123;</span><br><span class="line">    private final String id;</span><br><span class="line">    private final String type;</span><br><span class="line">    private final Point position;</span><br><span class="line">    private int level;</span><br><span class="line">    private final int baseDamage;</span><br><span class="line">    private final int baseRange;</span><br><span class="line">    private final int baseAttackSpeed; // æ”»å‡»é—´éš”ï¼Œå•ä½ï¼šæ¯«ç§’</span><br><span class="line">    private long lastAttackTime;</span><br><span class="line">    </span><br><span class="line">    public Tower(String id, String type, Point position, </span><br><span class="line">                 int baseDamage, int baseRange, int baseAttackSpeed) &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">        this.type = type;</span><br><span class="line">        this.position = position;</span><br><span class="line">        this.level = 1;</span><br><span class="line">        this.baseDamage = baseDamage;</span><br><span class="line">        this.baseRange = baseRange;</span><br><span class="line">        this.baseAttackSpeed = baseAttackSpeed;</span><br><span class="line">        this.lastAttackTime = 0;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // å‡çº§æ–¹æ³•</span><br><span class="line">    public void upgrade() &#123;</span><br><span class="line">        level++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // è·å–å½“å‰å±æ€§</span><br><span class="line">    public int getDamage() &#123;</span><br><span class="line">        return baseDamage * level;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public int getRange() &#123;</span><br><span class="line">        return baseRange + (level - 1) * 10; // æ¯çº§å¢åŠ 10ç‚¹èŒƒå›´</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public int getAttackSpeed() &#123;</span><br><span class="line">        return Math.max(100, baseAttackSpeed - (level - 1) * 50); // æœ€å°100ms</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // æ”»å‡»æ–¹æ³•</span><br><span class="line">    public boolean canAttack(long currentTime) &#123;</span><br><span class="line">        return currentTime - lastAttackTime &gt;= getAttackSpeed();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public boolean attack(List&lt;Enemy&gt; enemies, long currentTime) &#123;</span><br><span class="line">        if (!canAttack(currentTime)) &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        Enemy target = findTarget(enemies);</span><br><span class="line">        if (target != null) &#123;</span><br><span class="line">            target.takeDamage(getDamage());</span><br><span class="line">            lastAttackTime = currentTime;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private Enemy findTarget(List&lt;Enemy&gt; enemies) &#123;</span><br><span class="line">        Enemy closest = null;</span><br><span class="line">        double closestDistance = Double.MAX_VALUE;</span><br><span class="line">        </span><br><span class="line">        for (Enemy enemy : enemies) &#123;</span><br><span class="line">            if (!enemy.isAlive()) continue;</span><br><span class="line">            </span><br><span class="line">            double distance = position.distanceTo(enemy.getPosition());</span><br><span class="line">            if (distance &lt;= getRange() &amp;&amp; distance &lt; closestDistance) &#123;</span><br><span class="line">                closestDistance = distance;</span><br><span class="line">                closest = enemy;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        return closest;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // Getters</span><br><span class="line">    public Point getPosition() &#123; return position; &#125;</span><br><span class="line">    public String getType() &#123; return type; &#125;</span><br><span class="line">    public int getLevel() &#123; return level; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="æ­¥éª¤3ï¼šåˆ›å»ºæ¸¸æˆåœ°å›¾ç±»"><a href="#æ­¥éª¤3ï¼šåˆ›å»ºæ¸¸æˆåœ°å›¾ç±»" class="headerlink" title="æ­¥éª¤3ï¼šåˆ›å»ºæ¸¸æˆåœ°å›¾ç±»"></a><strong>æ­¥éª¤3ï¼šåˆ›å»ºæ¸¸æˆåœ°å›¾ç±»</strong></h4><p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">// GameMap.java</span><br><span class="line">package com.javagame.domain;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">public class GameMap &#123;</span><br><span class="line">    private final int width;</span><br><span class="line">    private final int height;</span><br><span class="line">    private final List&lt;Point&gt; path; // æ•Œäººç§»åŠ¨è·¯å¾„</span><br><span class="line">    private final List&lt;Point&gt; towerPositions; // å¯æ”¾ç½®é˜²å¾¡å¡”çš„ä½ç½®</span><br><span class="line">    private final Point startPoint;</span><br><span class="line">    private final Point endPoint;</span><br><span class="line">    </span><br><span class="line">    public GameMap(int width, int height) &#123;</span><br><span class="line">        this.width = width;</span><br><span class="line">        this.height = height;</span><br><span class="line">        this.path = new ArrayList&lt;&gt;();</span><br><span class="line">        this.towerPositions = new ArrayList&lt;&gt;();</span><br><span class="line">        this.startPoint = new Point(0, height / 2);</span><br><span class="line">        this.endPoint = new Point(width - 1, height / 2);</span><br><span class="line">        </span><br><span class="line">        initializeMap();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void initializeMap() &#123;</span><br><span class="line">        // åˆ›å»ºä¸€æ¡ç®€å•çš„æ°´å¹³è·¯å¾„</span><br><span class="line">        for (int x = 0; x &lt; width; x++) &#123;</span><br><span class="line">            path.add(new Point(x, height / 2));</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // åœ¨è·¯å¾„ä¸¤ä¾§åˆ›å»ºå¡”ä½</span><br><span class="line">        for (int x = 0; x &lt; width; x++) &#123;</span><br><span class="line">            if (x % 3 == 0) &#123; // æ¯éš”3æ ¼æ”¾ç½®ä¸€ä¸ªå¡”ä½</span><br><span class="line">                towerPositions.add(new Point(x, height / 2 - 2));</span><br><span class="line">                towerPositions.add(new Point(x, height / 2 + 2));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // æ£€æŸ¥ä½ç½®æ˜¯å¦å¯æ”¾ç½®å¡”</span><br><span class="line">    public boolean canPlaceTower(Point position) &#123;</span><br><span class="line">        return towerPositions.contains(position) &amp;&amp; !path.contains(position);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // Getters</span><br><span class="line">    public List&lt;Point&gt; getPath() &#123; return new ArrayList&lt;&gt;(path); &#125;</span><br><span class="line">    public List&lt;Point&gt; getTowerPositions() &#123; return new ArrayList&lt;&gt;(towerPositions); &#125;</span><br><span class="line">    public Point getStartPoint() &#123; return startPoint; &#125;</span><br><span class="line">    public Point getEndPoint() &#123; return endPoint; &#125;</span><br><span class="line">    public int getWidth() &#123; return width; &#125;</span><br><span class="line">    public int getHeight() &#123; return height; &#125;</span><br><span class="line">    </span><br><span class="line">    // è·å–è·¯å¾„ä¸Šçš„ä¸‹ä¸€ä¸ªç‚¹</span><br><span class="line">    public Point getNextPoint(Point current, int index) &#123;</span><br><span class="line">        List&lt;Point&gt; pathList = getPath();</span><br><span class="line">        if (index &lt; 0 || index &gt;= pathList.size() - 1) &#123;</span><br><span class="line">            return endPoint;</span><br><span class="line">        &#125;</span><br><span class="line">        return pathList.get(index + 1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="ç¬¬2å‘¨ï¼šå®ç°æ¸¸æˆå¼•æ“æ ¸å¿ƒï¼ˆengineåŒ…ï¼‰"><a href="#ç¬¬2å‘¨ï¼šå®ç°æ¸¸æˆå¼•æ“æ ¸å¿ƒï¼ˆengineåŒ…ï¼‰" class="headerlink" title="ç¬¬2å‘¨ï¼šå®ç°æ¸¸æˆå¼•æ“æ ¸å¿ƒï¼ˆengineåŒ…ï¼‰"></a><strong>ç¬¬2å‘¨ï¼šå®ç°æ¸¸æˆå¼•æ“æ ¸å¿ƒï¼ˆengineåŒ…ï¼‰</strong></h3><h4 id="æ­¥éª¤4ï¼šåˆ›å»ºæ¸¸æˆå¼•æ“"><a href="#æ­¥éª¤4ï¼šåˆ›å»ºæ¸¸æˆå¼•æ“" class="headerlink" title="æ­¥éª¤4ï¼šåˆ›å»ºæ¸¸æˆå¼•æ“"></a><strong>æ­¥éª¤4ï¼šåˆ›å»ºæ¸¸æˆå¼•æ“</strong></h4><p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br></pre></td><td class="code"><pre><span class="line">// GameEngine.java</span><br><span class="line">package com.javagame.engine;</span><br><span class="line"></span><br><span class="line">import com.javagame.domain.*;</span><br><span class="line">import com.javagame.service.WaveService;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.concurrent.CopyOnWriteArrayList;</span><br><span class="line"></span><br><span class="line">public class GameEngine &#123;</span><br><span class="line">    private GameMap gameMap;</span><br><span class="line">    private Player player;</span><br><span class="line">    private List&lt;Tower&gt; towers;</span><br><span class="line">    private List&lt;Enemy&gt; enemies;</span><br><span class="line">    private WaveService waveService;</span><br><span class="line">    private boolean isRunning;</span><br><span class="line">    private long gameTime;</span><br><span class="line">    </span><br><span class="line">    public GameEngine() &#123;</span><br><span class="line">        this.gameMap = new GameMap(20, 10); // 20x10çš„åœ°å›¾</span><br><span class="line">        this.player = new Player(&quot;Player1&quot;, 1000, 20); // 1000é‡‘å¸ï¼Œ20ç‚¹ç”Ÿå‘½</span><br><span class="line">        this.towers = new CopyOnWriteArrayList&lt;&gt;();</span><br><span class="line">        this.enemies = new CopyOnWriteArrayList&lt;&gt;();</span><br><span class="line">        this.waveService = new WaveService();</span><br><span class="line">        this.isRunning = false;</span><br><span class="line">        this.gameTime = 0;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void startGame() &#123;</span><br><span class="line">        isRunning = true;</span><br><span class="line">        gameTime = System.currentTimeMillis();</span><br><span class="line">        </span><br><span class="line">        // æ¸¸æˆä¸»å¾ªç¯ï¼ˆç®€åŒ–ç‰ˆï¼Œå®é™…åº”è¯¥ç”¨æ¸¸æˆå¾ªç¯çº¿ç¨‹ï¼‰</span><br><span class="line">        new Thread(() -&gt; &#123;</span><br><span class="line">            while (isRunning &amp;&amp; player.isAlive()) &#123;</span><br><span class="line">                long currentTime = System.currentTimeMillis();</span><br><span class="line">                update(currentTime);</span><br><span class="line">                try &#123;</span><br><span class="line">                    Thread.sleep(50); // 20 FPS</span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                    Thread.currentThread().interrupt();</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            if (!player.isAlive()) &#123;</span><br><span class="line">                System.out.println(&quot;æ¸¸æˆç»“æŸï¼æ•Œäººåˆ°è¾¾äº†ç»ˆç‚¹ï¼&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void update(long currentTime) &#123;</span><br><span class="line">        // 1. ç”Ÿæˆæ–°çš„æ•Œäººæ³¢æ¬¡</span><br><span class="line">        List&lt;Enemy&gt; newEnemies = waveService.spawnWave(gameTime, gameMap);</span><br><span class="line">        if (newEnemies != null) &#123;</span><br><span class="line">            enemies.addAll(newEnemies);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // 2. æ›´æ–°æ•Œäººä½ç½®</span><br><span class="line">        updateEnemies(currentTime);</span><br><span class="line">        </span><br><span class="line">        // 3. å¡”æ”»å‡»æ•Œäºº</span><br><span class="line">        updateTowers(currentTime);</span><br><span class="line">        </span><br><span class="line">        // 4. æ¸…ç†æ­»äº¡çš„æ•Œäºº</span><br><span class="line">        cleanupDeadEnemies();</span><br><span class="line">        </span><br><span class="line">        // 5. æ£€æŸ¥æ¸¸æˆçŠ¶æ€</span><br><span class="line">        checkGameState();</span><br><span class="line">        </span><br><span class="line">        gameTime = currentTime;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void updateEnemies(long currentTime) &#123;</span><br><span class="line">        for (Enemy enemy : enemies) &#123;</span><br><span class="line">            if (!enemy.isAlive()) continue;</span><br><span class="line">            </span><br><span class="line">            // ç®€å•ç§»åŠ¨ï¼šå‘ç»ˆç‚¹ç§»åŠ¨</span><br><span class="line">            Point currentPos = enemy.getPosition();</span><br><span class="line">            Point endPoint = gameMap.getEndPoint();</span><br><span class="line">            </span><br><span class="line">            // è®¡ç®—ç§»åŠ¨æ–¹å‘</span><br><span class="line">            int dx = endPoint.getX() - currentPos.getX();</span><br><span class="line">            int dy = endPoint.getY() - currentPos.getY();</span><br><span class="line">            double distance = Math.sqrt(dx * dx + dy * dy);</span><br><span class="line">            </span><br><span class="line">            if (distance &gt; 0) &#123;</span><br><span class="line">                int moveX = (int)(dx / distance * enemy.getSpeed());</span><br><span class="line">                int moveY = (int)(dy / distance * enemy.getSpeed());</span><br><span class="line">                enemy.move(new Point(currentPos.getX() + moveX, </span><br><span class="line">                                    currentPos.getY() + moveY));</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            // æ£€æŸ¥æ˜¯å¦åˆ°è¾¾ç»ˆç‚¹</span><br><span class="line">            if (distance &lt;= 1) &#123;</span><br><span class="line">                player.takeDamage(1); // æ•Œäººåˆ°è¾¾ç»ˆç‚¹ï¼Œç©å®¶æ‰£è¡€</span><br><span class="line">                enemy.takeDamage(enemy.getHealth()); // æ€æ­»è¿™ä¸ªæ•Œäºº</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void updateTowers(long currentTime) &#123;</span><br><span class="line">        for (Tower tower : towers) &#123;</span><br><span class="line">            tower.attack(enemies, currentTime);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void cleanupDeadEnemies() &#123;</span><br><span class="line">        enemies.removeIf(enemy -&gt; &#123;</span><br><span class="line">            if (!enemy.isAlive()) &#123;</span><br><span class="line">                player.addGold(enemy.getReward()); // å¥–åŠ±é‡‘å¸</span><br><span class="line">                return true;</span><br><span class="line">            &#125;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void checkGameState() &#123;</span><br><span class="line">        if (!player.isAlive()) &#123;</span><br><span class="line">            isRunning = false;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // ç©å®¶æ“ä½œï¼šæ”¾ç½®é˜²å¾¡å¡”</span><br><span class="line">    public boolean placeTower(String towerType, Point position) &#123;</span><br><span class="line">        if (!gameMap.canPlaceTower(position)) &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        Tower tower;</span><br><span class="line">        switch (towerType) &#123;</span><br><span class="line">            case &quot;BASIC&quot;:</span><br><span class="line">                tower = new Tower(</span><br><span class="line">                    &quot;T&quot; + System.currentTimeMillis(),</span><br><span class="line">                    &quot;BASIC&quot;,</span><br><span class="line">                    position,</span><br><span class="line">                    10,  // åŸºç¡€ä¼¤å®³</span><br><span class="line">                    5,   // åŸºç¡€èŒƒå›´</span><br><span class="line">                    1000 // æ”»å‡»é—´éš”1ç§’</span><br><span class="line">                );</span><br><span class="line">                break;</span><br><span class="line">            case &quot;SNIPER&quot;:</span><br><span class="line">                tower = new Tower(</span><br><span class="line">                    &quot;T&quot; + System.currentTimeMillis(),</span><br><span class="line">                    &quot;SNIPER&quot;,</span><br><span class="line">                    position,</span><br><span class="line">                    30,  // é«˜ä¼¤å®³</span><br><span class="line">                    10,  // è¿œè·ç¦»</span><br><span class="line">                    2000 // æ…¢æ”»é€Ÿ</span><br><span class="line">                );</span><br><span class="line">                break;</span><br><span class="line">            default:</span><br><span class="line">                return false;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // æ£€æŸ¥é‡‘å¸æ˜¯å¦è¶³å¤Ÿ</span><br><span class="line">        int cost = getTowerCost(towerType);</span><br><span class="line">        if (player.getGold() &gt;= cost) &#123;</span><br><span class="line">            player.spendGold(cost);</span><br><span class="line">            towers.add(tower);</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private int getTowerCost(String towerType) &#123;</span><br><span class="line">        return switch (towerType) &#123;</span><br><span class="line">            case &quot;BASIC&quot; -&gt; 100;</span><br><span class="line">            case &quot;SNIPER&quot; -&gt; 200;</span><br><span class="line">            default -&gt; Integer.MAX_VALUE;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // Getters for UI</span><br><span class="line">    public GameMap getGameMap() &#123; return gameMap; &#125;</span><br><span class="line">    public Player getPlayer() &#123; return player; &#125;</span><br><span class="line">    public List&lt;Tower&gt; getTowers() &#123; return new ArrayList&lt;&gt;(towers); &#125;</span><br><span class="line">    public List&lt;Enemy&gt; getEnemies() &#123; return new ArrayList&lt;&gt;(enemies); &#125;</span><br><span class="line">    public boolean isRunning() &#123; return isRunning; &#125;</span><br><span class="line">    </span><br><span class="line">    public void stopGame() &#123;</span><br><span class="line">        isRunning = false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="æ­¥éª¤5ï¼šåˆ›å»ºç©å®¶ç±»"><a href="#æ­¥éª¤5ï¼šåˆ›å»ºç©å®¶ç±»" class="headerlink" title="æ­¥éª¤5ï¼šåˆ›å»ºç©å®¶ç±»"></a><strong>æ­¥éª¤5ï¼šåˆ›å»ºç©å®¶ç±»</strong></h4><p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">// Player.java</span><br><span class="line">package com.javagame.domain;</span><br><span class="line"></span><br><span class="line">public class Player &#123;</span><br><span class="line">    private final String name;</span><br><span class="line">    private int gold;</span><br><span class="line">    private int health;</span><br><span class="line">    private int score;</span><br><span class="line">    </span><br><span class="line">    public Player(String name, int initialGold, int initialHealth) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.gold = initialGold;</span><br><span class="line">        this.health = initialHealth;</span><br><span class="line">        this.score = 0;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void addGold(int amount) &#123;</span><br><span class="line">        gold += amount;</span><br><span class="line">        score += amount; // é‡‘å¸ä¹Ÿè®¡å…¥åˆ†æ•°</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public boolean spendGold(int amount) &#123;</span><br><span class="line">        if (gold &gt;= amount) &#123;</span><br><span class="line">            gold -= amount;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void takeDamage(int damage) &#123;</span><br><span class="line">        health = Math.max(0, health - damage);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void heal(int amount) &#123;</span><br><span class="line">        health += amount;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void addScore(int points) &#123;</span><br><span class="line">        score += points;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public boolean isAlive() &#123;</span><br><span class="line">        return health &gt; 0;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // Getters</span><br><span class="line">    public String getName() &#123; return name; &#125;</span><br><span class="line">    public int getGold() &#123; return gold; &#125;</span><br><span class="line">    public int getHealth() &#123; return health; &#125;</span><br><span class="line">    public int getScore() &#123; return score; &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return String.format(&quot;ç©å®¶: %s | ç”Ÿå‘½: %d | é‡‘å¸: %d | åˆ†æ•°: %d&quot;, </span><br><span class="line">                           name, health, gold, score);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="ç¬¬3å‘¨ï¼šå®ç°æ¸¸æˆæœåŠ¡ï¼ˆserviceåŒ…ï¼‰"><a href="#ç¬¬3å‘¨ï¼šå®ç°æ¸¸æˆæœåŠ¡ï¼ˆserviceåŒ…ï¼‰" class="headerlink" title="ç¬¬3å‘¨ï¼šå®ç°æ¸¸æˆæœåŠ¡ï¼ˆserviceåŒ…ï¼‰"></a><strong>ç¬¬3å‘¨ï¼šå®ç°æ¸¸æˆæœåŠ¡ï¼ˆserviceåŒ…ï¼‰</strong></h3><h4 id="æ­¥éª¤6ï¼šåˆ›å»ºæ•Œäººç”ŸæˆæœåŠ¡"><a href="#æ­¥éª¤6ï¼šåˆ›å»ºæ•Œäººç”ŸæˆæœåŠ¡" class="headerlink" title="æ­¥éª¤6ï¼šåˆ›å»ºæ•Œäººç”ŸæˆæœåŠ¡"></a><strong>æ­¥éª¤6ï¼šåˆ›å»ºæ•Œäººç”ŸæˆæœåŠ¡</strong></h4><p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">// WaveService.java</span><br><span class="line">package com.javagame.service;</span><br><span class="line"></span><br><span class="line">import com.javagame.domain.Enemy;</span><br><span class="line">import com.javagame.domain.GameMap;</span><br><span class="line">import com.javagame.domain.Point;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">public class WaveService &#123;</span><br><span class="line">    private int currentWave;</span><br><span class="line">    private long lastWaveTime;</span><br><span class="line">    private static final long WAVE_INTERVAL = 10000; // 10ç§’ä¸€æ³¢</span><br><span class="line">    </span><br><span class="line">    public WaveService() &#123;</span><br><span class="line">        this.currentWave = 0;</span><br><span class="line">        this.lastWaveTime = 0;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public List&lt;Enemy&gt; spawnWave(long currentTime, GameMap gameMap) &#123;</span><br><span class="line">        if (currentTime - lastWaveTime &gt;= WAVE_INTERVAL) &#123;</span><br><span class="line">            lastWaveTime = currentTime;</span><br><span class="line">            currentWave++;</span><br><span class="line">            </span><br><span class="line">            List&lt;Enemy&gt; wave = new ArrayList&lt;&gt;();</span><br><span class="line">            Point startPoint = gameMap.getStartPoint();</span><br><span class="line">            </span><br><span class="line">            // æ ¹æ®æ³¢æ¬¡ç”Ÿæˆä¸åŒæ•°é‡å’Œç±»å‹çš„æ•Œäºº</span><br><span class="line">            int enemyCount = 5 + currentWave * 2;</span><br><span class="line">            </span><br><span class="line">            for (int i = 0; i &lt; enemyCount; i++) &#123;</span><br><span class="line">                String enemyType;</span><br><span class="line">                int health, speed, reward;</span><br><span class="line">                </span><br><span class="line">                if (currentWave % 5 == 0) &#123;</span><br><span class="line">                    // æ¯5æ³¢å‡ºç°ä¸€ä¸ªBOSS</span><br><span class="line">                    enemyType = &quot;BOSS&quot;;</span><br><span class="line">                    health = 200 + currentWave * 50;</span><br><span class="line">                    speed = 1;</span><br><span class="line">                    reward = 100;</span><br><span class="line">                &#125; else if (Math.random() &lt; 0.3) &#123;</span><br><span class="line">                    // 30%æ¦‚ç‡å‡ºç°å¿«é€Ÿæ•Œäºº</span><br><span class="line">                    enemyType = &quot;FAST&quot;;</span><br><span class="line">                    health = 20 + currentWave * 5;</span><br><span class="line">                    speed = 3;</span><br><span class="line">                    reward = 15;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    // æ™®é€šæ•Œäºº</span><br><span class="line">                    enemyType = &quot;NORMAL&quot;;</span><br><span class="line">                    health = 50 + currentWave * 10;</span><br><span class="line">                    speed = 2;</span><br><span class="line">                    reward = 10;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                String enemyId = &quot;E&quot; + currentWave + &quot;_&quot; + i;</span><br><span class="line">                wave.add(new Enemy(enemyId, enemyType, startPoint, health, speed, reward));</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            System.out.printf(&quot;ç¬¬ %d æ³¢æ•Œäººæ¥è¢­ï¼æ•°é‡: %d%n&quot;, currentWave, enemyCount);</span><br><span class="line">            return wave;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public int getCurrentWave() &#123;</span><br><span class="line">        return currentWave;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="æ­¥éª¤7ï¼šåˆ›å»ºæ¸¸æˆé…ç½®æœåŠ¡"><a href="#æ­¥éª¤7ï¼šåˆ›å»ºæ¸¸æˆé…ç½®æœåŠ¡" class="headerlink" title="æ­¥éª¤7ï¼šåˆ›å»ºæ¸¸æˆé…ç½®æœåŠ¡"></a><strong>æ­¥éª¤7ï¼šåˆ›å»ºæ¸¸æˆé…ç½®æœåŠ¡</strong></h4><p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">// GameConfigService.java</span><br><span class="line">package com.javagame.service;</span><br><span class="line"></span><br><span class="line">import java.util.HashMap;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">public class GameConfigService &#123;</span><br><span class="line">    private final Map&lt;String, TowerConfig&gt; towerConfigs;</span><br><span class="line">    private final Map&lt;String, EnemyConfig&gt; enemyConfigs;</span><br><span class="line">    </span><br><span class="line">    public GameConfigService() &#123;</span><br><span class="line">        towerConfigs = new HashMap&lt;&gt;();</span><br><span class="line">        enemyConfigs = new HashMap&lt;&gt;();</span><br><span class="line">        initializeConfigs();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void initializeConfigs() &#123;</span><br><span class="line">        // é˜²å¾¡å¡”é…ç½®</span><br><span class="line">        towerConfigs.put(&quot;BASIC&quot;, new TowerConfig(&quot;BASIC&quot;, 100, 10, 5, 1000));</span><br><span class="line">        towerConfigs.put(&quot;SNIPER&quot;, new TowerConfig(&quot;SNIPER&quot;, 200, 30, 10, 2000));</span><br><span class="line">        towerConfigs.put(&quot;CANNON&quot;, new TowerConfig(&quot;CANNON&quot;, 300, 50, 3, 1500));</span><br><span class="line">        </span><br><span class="line">        // æ•Œäººé…ç½®</span><br><span class="line">        enemyConfigs.put(&quot;NORMAL&quot;, new EnemyConfig(&quot;NORMAL&quot;, 50, 2, 10));</span><br><span class="line">        enemyConfigs.put(&quot;FAST&quot;, new EnemyConfig(&quot;FAST&quot;, 20, 4, 15));</span><br><span class="line">        enemyConfigs.put(&quot;TANK&quot;, new EnemyConfig(&quot;TANK&quot;, 200, 1, 30));</span><br><span class="line">        enemyConfigs.put(&quot;BOSS&quot;, new EnemyConfig(&quot;BOSS&quot;, 500, 1, 100));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public TowerConfig getTowerConfig(String type) &#123;</span><br><span class="line">        return towerConfigs.get(type);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public EnemyConfig getEnemyConfig(String type) &#123;</span><br><span class="line">        return enemyConfigs.get(type);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // é…ç½®ç±»</span><br><span class="line">    public static class TowerConfig &#123;</span><br><span class="line">        public final String type;</span><br><span class="line">        public final int cost;</span><br><span class="line">        public final int baseDamage;</span><br><span class="line">        public final int baseRange;</span><br><span class="line">        public final int baseAttackSpeed;</span><br><span class="line">        </span><br><span class="line">        public TowerConfig(String type, int cost, int baseDamage, </span><br><span class="line">                          int baseRange, int baseAttackSpeed) &#123;</span><br><span class="line">            this.type = type;</span><br><span class="line">            this.cost = cost;</span><br><span class="line">            this.baseDamage = baseDamage;</span><br><span class="line">            this.baseRange = baseRange;</span><br><span class="line">            this.baseAttackSpeed = baseAttackSpeed;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public static class EnemyConfig &#123;</span><br><span class="line">        public final String type;</span><br><span class="line">        public final int baseHealth;</span><br><span class="line">        public final int baseSpeed;</span><br><span class="line">        public final int baseReward;</span><br><span class="line">        </span><br><span class="line">        public EnemyConfig(String type, int baseHealth, int baseSpeed, int baseReward) &#123;</span><br><span class="line">            this.type = type;</span><br><span class="line">            this.baseHealth = baseHealth;</span><br><span class="line">            this.baseSpeed = baseSpeed;</span><br><span class="line">            this.baseReward = baseReward;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="ç¬¬4å‘¨ï¼šå®ç°AIæ¨¡å—å’Œä¸»ç¨‹åº"><a href="#ç¬¬4å‘¨ï¼šå®ç°AIæ¨¡å—å’Œä¸»ç¨‹åº" class="headerlink" title="ç¬¬4å‘¨ï¼šå®ç°AIæ¨¡å—å’Œä¸»ç¨‹åº"></a><strong>ç¬¬4å‘¨ï¼šå®ç°AIæ¨¡å—å’Œä¸»ç¨‹åº</strong></h3><h4 id="æ­¥éª¤8ï¼šåˆ›å»ºç®€å•çš„AIæ¨¡å—"><a href="#æ­¥éª¤8ï¼šåˆ›å»ºç®€å•çš„AIæ¨¡å—" class="headerlink" title="æ­¥éª¤8ï¼šåˆ›å»ºç®€å•çš„AIæ¨¡å—"></a><strong>æ­¥éª¤8ï¼šåˆ›å»ºç®€å•çš„AIæ¨¡å—</strong></h4><p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">// BasicAI.java</span><br><span class="line">package com.javagame.ai;</span><br><span class="line"></span><br><span class="line">import com.javagame.domain.Enemy;</span><br><span class="line">import com.javagame.domain.GameMap;</span><br><span class="line">import com.javagame.domain.Point;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">public class BasicAI &#123;</span><br><span class="line">    </span><br><span class="line">    /**</span><br><span class="line">     * ä¸ºæ•Œäººå¯»æ‰¾æœ€ä½³ç§»åŠ¨è·¯å¾„</span><br><span class="line">     */</span><br><span class="line">    public static Point calculateNextMove(Enemy enemy, GameMap gameMap, </span><br><span class="line">                                         List&lt;Point&gt; blockedPoints) &#123;</span><br><span class="line">        Point current = enemy.getPosition();</span><br><span class="line">        Point target = gameMap.getEndPoint();</span><br><span class="line">        </span><br><span class="line">        // A*ç®—æ³•çš„ç®€åŒ–ç‰ˆæœ¬</span><br><span class="line">        // è¿™é‡Œå®ç°ä¸€ä¸ªç®€å•çš„è·¯å¾„è·Ÿéšç®—æ³•</span><br><span class="line">        </span><br><span class="line">        List&lt;Point&gt; path = gameMap.getPath();</span><br><span class="line">        Point closestPathPoint = findClosestPathPoint(current, path);</span><br><span class="line">        </span><br><span class="line">        // è®¡ç®—ä¸‹ä¸€ä¸ªç§»åŠ¨ç‚¹</span><br><span class="line">        int moveX = 0;</span><br><span class="line">        int moveY = 0;</span><br><span class="line">        </span><br><span class="line">        if (closestPathPoint != null) &#123;</span><br><span class="line">            moveX = Integer.compare(closestPathPoint.getX() - current.getX(), 0);</span><br><span class="line">            moveY = Integer.compare(closestPathPoint.getY() - current.getY(), 0);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            // ç›´æ¥å‘ç»ˆç‚¹ç§»åŠ¨</span><br><span class="line">            moveX = Integer.compare(target.getX() - current.getX(), 0);</span><br><span class="line">            moveY = Integer.compare(target.getY() - current.getY(), 0);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // é¿å…é˜»å¡ç‚¹</span><br><span class="line">        Point nextPoint = new Point(current.getX() + moveX, current.getY() + moveY);</span><br><span class="line">        if (blockedPoints.contains(nextPoint)) &#123;</span><br><span class="line">            // å°è¯•å…¶ä»–æ–¹å‘</span><br><span class="line">            nextPoint = findAlternativeMove(current, blockedPoints, target);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        return nextPoint;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private static Point findClosestPathPoint(Point current, List&lt;Point&gt; path) &#123;</span><br><span class="line">        Point closest = null;</span><br><span class="line">        double minDistance = Double.MAX_VALUE;</span><br><span class="line">        </span><br><span class="line">        for (Point pathPoint : path) &#123;</span><br><span class="line">            double distance = current.distanceTo(pathPoint);</span><br><span class="line">            if (distance &lt; minDistance) &#123;</span><br><span class="line">                minDistance = distance;</span><br><span class="line">                closest = pathPoint;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        return closest;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private static Point findAlternativeMove(Point current, </span><br><span class="line">                                           List&lt;Point&gt; blockedPoints, </span><br><span class="line">                                           Point target) &#123;</span><br><span class="line">        // å°è¯•å››ä¸ªåŸºæœ¬æ–¹å‘</span><br><span class="line">        int[][] directions = &#123;&#123;1, 0&#125;, &#123;-1, 0&#125;, &#123;0, 1&#125;, &#123;0, -1&#125;&#125;;</span><br><span class="line">        </span><br><span class="line">        for (int[] dir : directions) &#123;</span><br><span class="line">            Point next = new Point(current.getX() + dir[0], current.getY() + dir[1]);</span><br><span class="line">            if (!blockedPoints.contains(next)) &#123;</span><br><span class="line">                return next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // å¦‚æœæ‰€æœ‰æ–¹å‘éƒ½è¢«é˜»å¡ï¼Œè¿”å›å½“å‰ä½ç½®</span><br><span class="line">        return current;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="æ­¥éª¤9ï¼šåˆ›å»ºä¸»ç¨‹åºå…¥å£"><a href="#æ­¥éª¤9ï¼šåˆ›å»ºä¸»ç¨‹åºå…¥å£" class="headerlink" title="æ­¥éª¤9ï¼šåˆ›å»ºä¸»ç¨‹åºå…¥å£"></a><strong>æ­¥éª¤9ï¼šåˆ›å»ºä¸»ç¨‹åºå…¥å£</strong></h4><p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line">// Main.java</span><br><span class="line">package com.javagame;</span><br><span class="line"></span><br><span class="line">import com.javagame.engine.GameEngine;</span><br><span class="line">import com.javagame.domain.Point;</span><br><span class="line">import java.util.Scanner;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    private static GameEngine gameEngine;</span><br><span class="line">    private static Scanner scanner;</span><br><span class="line">    </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        System.out.println(&quot;========== Java Defender ==========&quot;);</span><br><span class="line">        System.out.println(&quot;æ¬¢è¿æ¥åˆ°å¡”é˜²æ¸¸æˆï¼&quot;);</span><br><span class="line">        System.out.println(&quot;æŒ‡ä»¤è¯´æ˜ï¼š&quot;);</span><br><span class="line">        System.out.println(&quot;  start - å¼€å§‹æ¸¸æˆ&quot;);</span><br><span class="line">        System.out.println(&quot;  tower &lt;ç±»å‹&gt; &lt;x&gt; &lt;y&gt; - æ”¾ç½®é˜²å¾¡å¡”&quot;);</span><br><span class="line">        System.out.println(&quot;  status - æŸ¥çœ‹æ¸¸æˆçŠ¶æ€&quot;);</span><br><span class="line">        System.out.println(&quot;  stop - åœæ­¢æ¸¸æˆ&quot;);</span><br><span class="line">        System.out.println(&quot;  exit - é€€å‡ºç¨‹åº&quot;);</span><br><span class="line">        System.out.println(&quot;===================================\n&quot;);</span><br><span class="line">        </span><br><span class="line">        scanner = new Scanner(System.in);</span><br><span class="line">        gameEngine = new GameEngine();</span><br><span class="line">        </span><br><span class="line">        while (true) &#123;</span><br><span class="line">            System.out.print(&quot;&gt; &quot;);</span><br><span class="line">            String command = scanner.nextLine().trim();</span><br><span class="line">            </span><br><span class="line">            if (command.equalsIgnoreCase(&quot;exit&quot;)) &#123;</span><br><span class="line">                System.out.println(&quot;æ¸¸æˆç»“æŸï¼Œå†è§ï¼&quot;);</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            processCommand(command);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        scanner.close();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private static void processCommand(String command) &#123;</span><br><span class="line">        String[] parts = command.split(&quot; &quot;);</span><br><span class="line">        </span><br><span class="line">        switch (parts[0].toLowerCase()) &#123;</span><br><span class="line">            case &quot;start&quot;:</span><br><span class="line">                if (!gameEngine.isRunning()) &#123;</span><br><span class="line">                    gameEngine.startGame();</span><br><span class="line">                    System.out.println(&quot;æ¸¸æˆå¼€å§‹ï¼&quot;);</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    System.out.println(&quot;æ¸¸æˆå·²ç»åœ¨è¿›è¡Œä¸­ï¼&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">                break;</span><br><span class="line">                </span><br><span class="line">            case &quot;tower&quot;:</span><br><span class="line">                if (parts.length &lt; 4) &#123;</span><br><span class="line">                    System.out.println(&quot;ç”¨æ³•: tower &lt;ç±»å‹&gt; &lt;x&gt; &lt;y&gt;&quot;);</span><br><span class="line">                    System.out.println(&quot;ç±»å‹: BASIC (100é‡‘), SNIPER (200é‡‘)&quot;);</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                try &#123;</span><br><span class="line">                    String towerType = parts[1].toUpperCase();</span><br><span class="line">                    int x = Integer.parseInt(parts[2]);</span><br><span class="line">                    int y = Integer.parseInt(parts[3]);</span><br><span class="line">                    </span><br><span class="line">                    Point position = new Point(x, y);</span><br><span class="line">                    boolean success = gameEngine.placeTower(towerType, position);</span><br><span class="line">                    </span><br><span class="line">                    if (success) &#123;</span><br><span class="line">                        System.out.printf(&quot;%så¡”å·²æ”¾ç½®åœ¨ä½ç½® (%d, %d)%n&quot;, </span><br><span class="line">                                        towerType, x, y);</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        System.out.println(&quot;æ— æ³•åœ¨æ­¤ä½ç½®æ”¾ç½®å¡”ï¼Œæˆ–é‡‘å¸ä¸è¶³ï¼&quot;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; catch (NumberFormatException e) &#123;</span><br><span class="line">                    System.out.println(&quot;åæ ‡å¿…é¡»æ˜¯æ•°å­—ï¼&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">                break;</span><br><span class="line">                </span><br><span class="line">            case &quot;status&quot;:</span><br><span class="line">                printGameStatus();</span><br><span class="line">                break;</span><br><span class="line">                </span><br><span class="line">            case &quot;stop&quot;:</span><br><span class="line">                if (gameEngine.isRunning()) &#123;</span><br><span class="line">                    gameEngine.stopGame();</span><br><span class="line">                    System.out.println(&quot;æ¸¸æˆå·²åœæ­¢&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">                break;</span><br><span class="line">                </span><br><span class="line">            case &quot;help&quot;:</span><br><span class="line">                printHelp();</span><br><span class="line">                break;</span><br><span class="line">                </span><br><span class="line">            default:</span><br><span class="line">                System.out.println(&quot;æœªçŸ¥å‘½ä»¤ï¼Œè¾“å…¥ &#x27;help&#x27; æŸ¥çœ‹å¸®åŠ©&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private static void printGameStatus() &#123;</span><br><span class="line">        var player = gameEngine.getPlayer();</span><br><span class="line">        var towers = gameEngine.getTowers();</span><br><span class="line">        var enemies = gameEngine.getEnemies();</span><br><span class="line">        </span><br><span class="line">        System.out.println(&quot;\n======= æ¸¸æˆçŠ¶æ€ =======&quot;);</span><br><span class="line">        System.out.println(player);</span><br><span class="line">        System.out.printf(&quot;é˜²å¾¡å¡”æ•°é‡: %d%n&quot;, towers.size());</span><br><span class="line">        System.out.printf(&quot;æ•Œäººæ•°é‡: %d%n&quot;, enemies.stream().filter(e -&gt; e.isAlive()).count());</span><br><span class="line">        </span><br><span class="line">        if (!towers.isEmpty()) &#123;</span><br><span class="line">            System.out.println(&quot;\né˜²å¾¡å¡”åˆ—è¡¨:&quot;);</span><br><span class="line">            for (var tower : towers) &#123;</span><br><span class="line">                var pos = tower.getPosition();</span><br><span class="line">                System.out.printf(&quot;  %så¡” [%dçº§] åœ¨ä½ç½® (%d, %d)%n&quot;, </span><br><span class="line">                                tower.getType(), tower.getLevel(), </span><br><span class="line">                                pos.getX(), pos.getY());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        if (!enemies.isEmpty()) &#123;</span><br><span class="line">            System.out.println(&quot;\næ•Œäººåˆ—è¡¨:&quot;);</span><br><span class="line">            int count = 0;</span><br><span class="line">            for (var enemy : enemies) &#123;</span><br><span class="line">                if (enemy.isAlive()) &#123;</span><br><span class="line">                    var pos = enemy.getPosition();</span><br><span class="line">                    System.out.printf(&quot;  %sæ•Œäºº ç”Ÿå‘½: %d/%d åœ¨ä½ç½® (%d, %d)%n&quot;, </span><br><span class="line">                                    enemy.getType(), enemy.getHealth(), </span><br><span class="line">                                    enemy.getMaxHealth(), pos.getX(), pos.getY());</span><br><span class="line">                    count++;</span><br><span class="line">                    if (count &gt;= 5) &#123; // åªæ˜¾ç¤ºå‰5ä¸ª</span><br><span class="line">                        System.out.println(&quot;  ... è¿˜æœ‰æ›´å¤šæ•Œäºº&quot;);</span><br><span class="line">                        break;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        System.out.println(&quot;=======================\n&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private static void printHelp() &#123;</span><br><span class="line">        System.out.println(&quot;\nå¯ç”¨å‘½ä»¤:&quot;);</span><br><span class="line">        System.out.println(&quot;  start        - å¼€å§‹æ¸¸æˆ&quot;);</span><br><span class="line">        System.out.println(&quot;  tower &lt;type&gt; &lt;x&gt; &lt;y&gt; - æ”¾ç½®é˜²å¾¡å¡”&quot;);</span><br><span class="line">        System.out.println(&quot;    ç±»å‹: BASIC, SNIPER&quot;);</span><br><span class="line">        System.out.println(&quot;  status       - æŸ¥çœ‹æ¸¸æˆçŠ¶æ€&quot;);</span><br><span class="line">        System.out.println(&quot;  stop         - åœæ­¢æ¸¸æˆ&quot;);</span><br><span class="line">        System.out.println(&quot;  help         - æ˜¾ç¤ºæ­¤å¸®åŠ©&quot;);</span><br><span class="line">        System.out.println(&quot;  exit         - é€€å‡ºæ¸¸æˆ\n&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="ç¬¬5å‘¨ï¼šå®ç°å·¥å…·è„šæœ¬ï¼ˆtoolsåŒ…ï¼‰"><a href="#ç¬¬5å‘¨ï¼šå®ç°å·¥å…·è„šæœ¬ï¼ˆtoolsåŒ…ï¼‰" class="headerlink" title="ç¬¬5å‘¨ï¼šå®ç°å·¥å…·è„šæœ¬ï¼ˆtoolsåŒ…ï¼‰"></a><strong>ç¬¬5å‘¨ï¼šå®ç°å·¥å…·è„šæœ¬ï¼ˆtoolsåŒ…ï¼‰</strong></h3><h4 id="æ­¥éª¤10ï¼šåˆ›å»ºåœ°å›¾ç¼–è¾‘å™¨ï¼ˆPythonï¼‰"><a href="#æ­¥éª¤10ï¼šåˆ›å»ºåœ°å›¾ç¼–è¾‘å™¨ï¼ˆPythonï¼‰" class="headerlink" title="æ­¥éª¤10ï¼šåˆ›å»ºåœ°å›¾ç¼–è¾‘å™¨ï¼ˆPythonï¼‰"></a><strong>æ­¥éª¤10ï¼šåˆ›å»ºåœ°å›¾ç¼–è¾‘å™¨ï¼ˆPythonï¼‰</strong></h4><p>python</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><span class="line"># tools/map-editor/map_editor.py</span><br><span class="line">import json</span><br><span class="line">import os</span><br><span class="line">from dataclasses import dataclass</span><br><span class="line">from typing import List, Tuple</span><br><span class="line">import tkinter as tk</span><br><span class="line">from tkinter import messagebox</span><br><span class="line"></span><br><span class="line">@dataclass</span><br><span class="line">class MapConfig:</span><br><span class="line">    width: int</span><br><span class="line">    height: int</span><br><span class="line">    path: List[Tuple[int, int]]</span><br><span class="line">    tower_positions: List[Tuple[int, int]]</span><br><span class="line">    start_point: Tuple[int, int]</span><br><span class="line">    end_point: Tuple[int, int]</span><br><span class="line"></span><br><span class="line">class MapEditor:</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.root = tk.Tk()</span><br><span class="line">        self.root.title(&quot;Java Defender - åœ°å›¾ç¼–è¾‘å™¨&quot;)</span><br><span class="line">        </span><br><span class="line">        self.width = 20</span><br><span class="line">        self.height = 10</span><br><span class="line">        self.cell_size = 40</span><br><span class="line">        </span><br><span class="line">        self.path = []</span><br><span class="line">        self.tower_positions = []</span><br><span class="line">        self.start_point = None</span><br><span class="line">        self.end_point = None</span><br><span class="line">        </span><br><span class="line">        self.mode = &quot;path&quot;  # path, tower, start, end</span><br><span class="line">        </span><br><span class="line">        self.setup_ui()</span><br><span class="line">        </span><br><span class="line">    def setup_ui(self):</span><br><span class="line">        # æ§åˆ¶é¢æ¿</span><br><span class="line">        control_frame = tk.Frame(self.root)</span><br><span class="line">        control_frame.pack(side=tk.TOP, fill=tk.X)</span><br><span class="line">        </span><br><span class="line">        tk.Label(control_frame, text=&quot;ç¼–è¾‘æ¨¡å¼:&quot;).pack(side=tk.LEFT, padx=5)</span><br><span class="line">        </span><br><span class="line">        modes = [(&quot;è·¯å¾„&quot;, &quot;path&quot;), (&quot;å¡”ä½&quot;, &quot;tower&quot;), (&quot;èµ·ç‚¹&quot;, &quot;start&quot;), (&quot;ç»ˆç‚¹&quot;, &quot;end&quot;)]</span><br><span class="line">        for text, mode in modes:</span><br><span class="line">            tk.Radiobutton(control_frame, text=text, variable=tk.StringVar(value=&quot;path&quot;),</span><br><span class="line">                          value=mode, command=lambda m=mode: self.set_mode(m)).pack(side=tk.LEFT)</span><br><span class="line">        </span><br><span class="line">        tk.Button(control_frame, text=&quot;æ¸…ç©º&quot;, command=self.clear).pack(side=tk.LEFT, padx=5)</span><br><span class="line">        tk.Button(control_frame, text=&quot;ä¿å­˜&quot;, command=self.save).pack(side=tk.LEFT, padx=5)</span><br><span class="line">        tk.Button(control_frame, text=&quot;åŠ è½½&quot;, command=self.load).pack(side=tk.LEFT, padx=5)</span><br><span class="line">        </span><br><span class="line">        # ç”»å¸ƒ</span><br><span class="line">        self.canvas = tk.Canvas(self.root, </span><br><span class="line">                                width=self.width * self.cell_size,</span><br><span class="line">                                height=self.height * self.cell_size)</span><br><span class="line">        self.canvas.pack()</span><br><span class="line">        </span><br><span class="line">        self.draw_grid()</span><br><span class="line">        self.canvas.bind(&quot;&lt;Button-1&gt;&quot;, self.on_click)</span><br><span class="line">        </span><br><span class="line">    def set_mode(self, mode):</span><br><span class="line">        self.mode = mode</span><br><span class="line">        </span><br><span class="line">    def draw_grid(self):</span><br><span class="line">        for x in range(self.width):</span><br><span class="line">            for y in range(self.height):</span><br><span class="line">                x1 = x * self.cell_size</span><br><span class="line">                y1 = y * self.cell_size</span><br><span class="line">                x2 = x1 + self.cell_size</span><br><span class="line">                y2 = y1 + self.cell_size</span><br><span class="line">                </span><br><span class="line">                self.canvas.create_rectangle(x1, y1, x2, y2, outline=&quot;gray&quot;, fill=&quot;white&quot;)</span><br><span class="line">                </span><br><span class="line">    def on_click(self, event):</span><br><span class="line">        x = event.x // self.cell_size</span><br><span class="line">        y = event.y // self.cell_size</span><br><span class="line">        </span><br><span class="line">        if 0 &lt;= x &lt; self.width and 0 &lt;= y &lt; self.height:</span><br><span class="line">            if self.mode == &quot;path&quot;:</span><br><span class="line">                if (x, y) not in self.path:</span><br><span class="line">                    self.path.append((x, y))</span><br><span class="line">                    self.draw_cell(x, y, &quot;green&quot;, &quot;è·¯å¾„&quot;)</span><br><span class="line">                    </span><br><span class="line">            elif self.mode == &quot;tower&quot;:</span><br><span class="line">                if (x, y) not in self.tower_positions and (x, y) not in self.path:</span><br><span class="line">                    self.tower_positions.append((x, y))</span><br><span class="line">                    self.draw_cell(x, y, &quot;blue&quot;, &quot;å¡”ä½&quot;)</span><br><span class="line">                    </span><br><span class="line">            elif self.mode == &quot;start&quot;:</span><br><span class="line">                self.start_point = (x, y)</span><br><span class="line">                self.draw_cell(x, y, &quot;red&quot;, &quot;èµ·ç‚¹&quot;)</span><br><span class="line">                </span><br><span class="line">            elif self.mode == &quot;end&quot;:</span><br><span class="line">                self.end_point = (x, y)</span><br><span class="line">                self.draw_cell(x, y, &quot;orange&quot;, &quot;ç»ˆç‚¹&quot;)</span><br><span class="line">    </span><br><span class="line">    def draw_cell(self, x, y, color, text):</span><br><span class="line">        x1 = x * self.cell_size</span><br><span class="line">        y1 = y * self.cell_size</span><br><span class="line">        x2 = x1 + self.cell_size</span><br><span class="line">        y2 = y1 + self.cell_size</span><br><span class="line">        </span><br><span class="line">        self.canvas.create_rectangle(x1, y1, x2, y2, fill=color)</span><br><span class="line">        self.canvas.create_text((x1 + x2) // 2, (y1 + y2) // 2, text=text)</span><br><span class="line">        </span><br><span class="line">    def clear(self):</span><br><span class="line">        self.path.clear()</span><br><span class="line">        self.tower_positions.clear()</span><br><span class="line">        self.start_point = None</span><br><span class="line">        self.end_point = None</span><br><span class="line">        self.canvas.delete(&quot;all&quot;)</span><br><span class="line">        self.draw_grid()</span><br><span class="line">        </span><br><span class="line">    def save(self):</span><br><span class="line">        if not self.start_point or not self.end_point:</span><br><span class="line">            messagebox.showerror(&quot;é”™è¯¯&quot;, &quot;è¯·è®¾ç½®èµ·ç‚¹å’Œç»ˆç‚¹&quot;)</span><br><span class="line">            return</span><br><span class="line">            </span><br><span class="line">        config = MapConfig(</span><br><span class="line">            width=self.width,</span><br><span class="line">            height=self.height,</span><br><span class="line">            path=self.path,</span><br><span class="line">            tower_positions=self.tower_positions,</span><br><span class="line">            start_point=self.start_point,</span><br><span class="line">            end_point=self.end_point</span><br><span class="line">        )</span><br><span class="line">        </span><br><span class="line">        with open(&quot;map_config.json&quot;, &quot;w&quot;, encoding=&quot;utf-8&quot;) as f:</span><br><span class="line">            json.dump(config.__dict__, f, indent=2)</span><br><span class="line">            </span><br><span class="line">        messagebox.showinfo(&quot;æˆåŠŸ&quot;, &quot;åœ°å›¾é…ç½®å·²ä¿å­˜åˆ° map_config.json&quot;)</span><br><span class="line">        </span><br><span class="line">    def load(self):</span><br><span class="line">        if not os.path.exists(&quot;map_config.json&quot;):</span><br><span class="line">            messagebox.showerror(&quot;é”™è¯¯&quot;, &quot;æ‰¾ä¸åˆ° map_config.json æ–‡ä»¶&quot;)</span><br><span class="line">            return</span><br><span class="line">            </span><br><span class="line">        with open(&quot;map_config.json&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:</span><br><span class="line">            data = json.load(f)</span><br><span class="line">            </span><br><span class="line">        self.clear()</span><br><span class="line">        self.path = data[&quot;path&quot;]</span><br><span class="line">        self.tower_positions = data[&quot;tower_positions&quot;]</span><br><span class="line">        self.start_point = tuple(data[&quot;start_point&quot;])</span><br><span class="line">        self.end_point = tuple(data[&quot;end_point&quot;])</span><br><span class="line">        </span><br><span class="line">        # é‡æ–°ç»˜åˆ¶</span><br><span class="line">        for x, y in self.path:</span><br><span class="line">            self.draw_cell(x, y, &quot;green&quot;, &quot;è·¯å¾„&quot;)</span><br><span class="line">        for x, y in self.tower_positions:</span><br><span class="line">            self.draw_cell(x, y, &quot;blue&quot;, &quot;å¡”ä½&quot;)</span><br><span class="line">        if self.start_point:</span><br><span class="line">            self.draw_cell(*self.start_point, &quot;red&quot;, &quot;èµ·ç‚¹&quot;)</span><br><span class="line">        if self.end_point:</span><br><span class="line">            self.draw_cell(*self.end_point, &quot;orange&quot;, &quot;ç»ˆç‚¹&quot;)</span><br><span class="line">            </span><br><span class="line">    def run(self):</span><br><span class="line">        self.root.mainloop()</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    editor = MapEditor()</span><br><span class="line">    editor.run()</span><br></pre></td></tr></table></figure>



<h4 id="æ­¥éª¤11ï¼šåˆ›å»ºæ•°æ®ç”Ÿæˆè„šæœ¬ï¼ˆPythonï¼‰"><a href="#æ­¥éª¤11ï¼šåˆ›å»ºæ•°æ®ç”Ÿæˆè„šæœ¬ï¼ˆPythonï¼‰" class="headerlink" title="æ­¥éª¤11ï¼šåˆ›å»ºæ•°æ®ç”Ÿæˆè„šæœ¬ï¼ˆPythonï¼‰"></a><strong>æ­¥éª¤11ï¼šåˆ›å»ºæ•°æ®ç”Ÿæˆè„šæœ¬ï¼ˆPythonï¼‰</strong></h4><p>python</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"># tools/data-generator/data_generator.py</span><br><span class="line">import json</span><br><span class="line">import random</span><br><span class="line"></span><br><span class="line">def generate_enemy_data():</span><br><span class="line">    &quot;&quot;&quot;ç”Ÿæˆæ•Œäººæ•°æ®é…ç½®&quot;&quot;&quot;</span><br><span class="line">    enemies = &#123;</span><br><span class="line">        &quot;NORMAL&quot;: &#123;</span><br><span class="line">            &quot;baseHealth&quot;: 50,</span><br><span class="line">            &quot;baseSpeed&quot;: 2,</span><br><span class="line">            &quot;baseReward&quot;: 10,</span><br><span class="line">            &quot;description&quot;: &quot;æ™®é€šæ•Œäººï¼Œå¹³è¡¡çš„å±æ€§&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;FAST&quot;: &#123;</span><br><span class="line">            &quot;baseHealth&quot;: 20,</span><br><span class="line">            &quot;baseSpeed&quot;: 4,</span><br><span class="line">            &quot;baseReward&quot;: 15,</span><br><span class="line">            &quot;description&quot;: &quot;å¿«é€Ÿæ•Œäººï¼Œä½ç”Ÿå‘½é«˜é€Ÿåº¦&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;TANK&quot;: &#123;</span><br><span class="line">            &quot;baseHealth&quot;: 200,</span><br><span class="line">            &quot;baseSpeed&quot;: 1,</span><br><span class="line">            &quot;baseReward&quot;: 30,</span><br><span class="line">            &quot;description&quot;: &quot;å¦å…‹æ•Œäººï¼Œé«˜ç”Ÿå‘½ä½é€Ÿåº¦&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;BOSS&quot;: &#123;</span><br><span class="line">            &quot;baseHealth&quot;: 500,</span><br><span class="line">            &quot;baseSpeed&quot;: 1,</span><br><span class="line">            &quot;baseReward&quot;: 100,</span><br><span class="line">            &quot;description&quot;: &quot;BOSSæ•Œäººï¼Œæé«˜çš„ç”Ÿå‘½å€¼&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return enemies</span><br><span class="line"></span><br><span class="line">def generate_tower_data():</span><br><span class="line">    &quot;&quot;&quot;ç”Ÿæˆé˜²å¾¡å¡”æ•°æ®é…ç½®&quot;&quot;&quot;</span><br><span class="line">    towers = &#123;</span><br><span class="line">        &quot;BASIC&quot;: &#123;</span><br><span class="line">            &quot;cost&quot;: 100,</span><br><span class="line">            &quot;baseDamage&quot;: 10,</span><br><span class="line">            &quot;baseRange&quot;: 5,</span><br><span class="line">            &quot;baseAttackSpeed&quot;: 1000,</span><br><span class="line">            &quot;description&quot;: &quot;åŸºç¡€å¡”ï¼Œå¹³è¡¡çš„å±æ€§&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;SNIPER&quot;: &#123;</span><br><span class="line">            &quot;cost&quot;: 200,</span><br><span class="line">            &quot;baseDamage&quot;: 30,</span><br><span class="line">            &quot;baseRange&quot;: 10,</span><br><span class="line">            &quot;baseAttackSpeed&quot;: 2000,</span><br><span class="line">            &quot;description&quot;: &quot;ç‹™å‡»å¡”ï¼Œé«˜ä¼¤å®³è¿œè·ç¦»&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;CANNON&quot;: &#123;</span><br><span class="line">            &quot;cost&quot;: 300,</span><br><span class="line">            &quot;baseDamage&quot;: 50,</span><br><span class="line">            &quot;baseRange&quot;: 3,</span><br><span class="line">            &quot;baseAttackSpeed&quot;: 1500,</span><br><span class="line">            &quot;description&quot;: &quot;åŠ å†œç‚®ï¼Œæé«˜ä¼¤å®³è¿‘è·ç¦»&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return towers</span><br><span class="line"></span><br><span class="line">def generate_wave_patterns():</span><br><span class="line">    &quot;&quot;&quot;ç”Ÿæˆæ³¢æ¬¡æ¨¡å¼&quot;&quot;&quot;</span><br><span class="line">    patterns = []</span><br><span class="line">    </span><br><span class="line">    # ç”Ÿæˆ10ç§ä¸åŒçš„æ³¢æ¬¡æ¨¡å¼</span><br><span class="line">    for wave_num in range(1, 11):</span><br><span class="line">        pattern = &#123;</span><br><span class="line">            &quot;waveNumber&quot;: wave_num,</span><br><span class="line">            &quot;enemies&quot;: []</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        # æ¯æ³¢æ•Œäººæ•°é‡é€æ¸å¢åŠ </span><br><span class="line">        enemy_count = 5 + wave_num * 2</span><br><span class="line">        </span><br><span class="line">        for i in range(enemy_count):</span><br><span class="line">            # æ ¹æ®æ³¢æ¬¡è°ƒæ•´æ•Œäººç±»å‹æ¦‚ç‡</span><br><span class="line">            if wave_num % 5 == 0 and i == 0:</span><br><span class="line">                # æ¯5æ³¢ç¬¬ä¸€ä¸ªæ˜¯BOSS</span><br><span class="line">                enemy_type = &quot;BOSS&quot;</span><br><span class="line">            elif wave_num &gt;= 7 and random.random() &lt; 0.3:</span><br><span class="line">                # ç¬¬7æ³¢å30%æ¦‚ç‡å‡ºç°å¦å…‹</span><br><span class="line">                enemy_type = &quot;TANK&quot;</span><br><span class="line">            elif wave_num &gt;= 4 and random.random() &lt; 0.4:</span><br><span class="line">                # ç¬¬4æ³¢å40%æ¦‚ç‡å‡ºç°å¿«é€Ÿæ•Œäºº</span><br><span class="line">                enemy_type = &quot;FAST&quot;</span><br><span class="line">            else:</span><br><span class="line">                enemy_type = &quot;NORMAL&quot;</span><br><span class="line">                </span><br><span class="line">            pattern[&quot;enemies&quot;].append(&#123;</span><br><span class="line">                &quot;type&quot;: enemy_type,</span><br><span class="line">                &quot;spawnDelay&quot;: i * 1000,  # æ¯ä¸ªæ•Œäººå»¶è¿Ÿ1ç§’å‡ºç°</span><br><span class="line">                &quot;count&quot;: 1</span><br><span class="line">            &#125;)</span><br><span class="line">            </span><br><span class="line">        patterns.append(pattern)</span><br><span class="line">    </span><br><span class="line">    return patterns</span><br><span class="line"></span><br><span class="line">def save_data():</span><br><span class="line">    &quot;&quot;&quot;ä¿å­˜æ‰€æœ‰ç”Ÿæˆçš„æ•°æ®&quot;&quot;&quot;</span><br><span class="line">    data = &#123;</span><br><span class="line">        &quot;enemies&quot;: generate_enemy_data(),</span><br><span class="line">        &quot;towers&quot;: generate_tower_data(),</span><br><span class="line">        &quot;wavePatterns&quot;: generate_wave_patterns(),</span><br><span class="line">        &quot;gameConfig&quot;: &#123;</span><br><span class="line">            &quot;initialGold&quot;: 1000,</span><br><span class="line">            &quot;initialHealth&quot;: 20,</span><br><span class="line">            &quot;waveInterval&quot;: 15000,</span><br><span class="line">            &quot;maxWaves&quot;: 20</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    with open(&quot;game_data.json&quot;, &quot;w&quot;, encoding=&quot;utf-8&quot;) as f:</span><br><span class="line">        json.dump(data, f, indent=2, ensure_ascii=False)</span><br><span class="line">    </span><br><span class="line">    print(&quot;æ•°æ®å·²ç”Ÿæˆåˆ° game_data.json&quot;)</span><br><span class="line">    print(f&quot;- æ•Œäººç±»å‹: &#123;len(data[&#x27;enemies&#x27;])&#125; ç§&quot;)</span><br><span class="line">    print(f&quot;- é˜²å¾¡å¡”ç±»å‹: &#123;len(data[&#x27;towers&#x27;])&#125; ç§&quot;)</span><br><span class="line">    print(f&quot;- æ³¢æ¬¡æ¨¡å¼: &#123;len(data[&#x27;wavePatterns&#x27;])&#125; ä¸ª&quot;)</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    save_data()</span><br></pre></td></tr></table></figure>



<h4 id="æ­¥éª¤12ï¼šåˆ›å»ºæ„å»ºè„šæœ¬ï¼ˆShellï¼‰"><a href="#æ­¥éª¤12ï¼šåˆ›å»ºæ„å»ºè„šæœ¬ï¼ˆShellï¼‰" class="headerlink" title="æ­¥éª¤12ï¼šåˆ›å»ºæ„å»ºè„šæœ¬ï¼ˆShellï¼‰"></a><strong>æ­¥éª¤12ï¼šåˆ›å»ºæ„å»ºè„šæœ¬ï¼ˆShellï¼‰</strong></h4><p>bash</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># tools/build-scripts/build.sh</span><br><span class="line"></span><br><span class="line">set -e  # é‡åˆ°é”™è¯¯é€€å‡º</span><br><span class="line"></span><br><span class="line">echo &quot;========== Java Defender æ„å»ºè„šæœ¬ ==========&quot;</span><br><span class="line"></span><br><span class="line"># é¢œè‰²å®šä¹‰</span><br><span class="line">RED=&#x27;\033[0;31m&#x27;</span><br><span class="line">GREEN=&#x27;\033[0;32m&#x27;</span><br><span class="line">YELLOW=&#x27;\033[1;33m&#x27;</span><br><span class="line">NC=&#x27;\033[0m&#x27; # No Color</span><br><span class="line"></span><br><span class="line"># é¡¹ç›®æ ¹ç›®å½•</span><br><span class="line">PROJECT_ROOT=&quot;$(cd &quot;$(dirname &quot;$&#123;BASH_SOURCE[0]&#125;&quot;)/../..&quot; &amp;&amp; pwd)&quot;</span><br><span class="line"></span><br><span class="line"># ç›®å½•æ£€æŸ¥</span><br><span class="line">echo -e &quot;$&#123;YELLOW&#125;[1/6] æ£€æŸ¥é¡¹ç›®ç»“æ„...$&#123;NC&#125;&quot;</span><br><span class="line">if [ ! -d &quot;$PROJECT_ROOT/game-core&quot; ]; then</span><br><span class="line">    echo -e &quot;$&#123;RED&#125;é”™è¯¯: æ‰¾ä¸åˆ° game-core ç›®å½•$&#123;NC&#125;&quot;</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># æ¸…ç†æ—§çš„æ„å»º</span><br><span class="line">echo -e &quot;$&#123;YELLOW&#125;[2/6] æ¸…ç†æ—§æ„å»º...$&#123;NC&#125;&quot;</span><br><span class="line">cd &quot;$PROJECT_ROOT/game-core&quot;</span><br><span class="line">mvn clean -q</span><br><span class="line"></span><br><span class="line"># è¿è¡Œæµ‹è¯•</span><br><span class="line">echo -e &quot;$&#123;YELLOW&#125;[3/6] è¿è¡Œå•å…ƒæµ‹è¯•...$&#123;NC&#125;&quot;</span><br><span class="line">if mvn test -q; then</span><br><span class="line">    echo -e &quot;$&#123;GREEN&#125;âœ“ æ‰€æœ‰æµ‹è¯•é€šè¿‡$&#123;NC&#125;&quot;</span><br><span class="line">else</span><br><span class="line">    echo -e &quot;$&#123;RED&#125;âœ— æµ‹è¯•å¤±è´¥$&#123;NC&#125;&quot;</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># ç¼–è¯‘é¡¹ç›®</span><br><span class="line">echo -e &quot;$&#123;YELLOW&#125;[4/6] ç¼–è¯‘é¡¹ç›®...$&#123;NC&#125;&quot;</span><br><span class="line">if mvn compile -q; then</span><br><span class="line">    echo -e &quot;$&#123;GREEN&#125;âœ“ ç¼–è¯‘æˆåŠŸ$&#123;NC&#125;&quot;</span><br><span class="line">else</span><br><span class="line">    echo -e &quot;$&#123;RED&#125;âœ— ç¼–è¯‘å¤±è´¥$&#123;NC&#125;&quot;</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># æ‰“åŒ…JAR</span><br><span class="line">echo -e &quot;$&#123;YELLOW&#125;[5/6] æ‰“åŒ…JARæ–‡ä»¶...$&#123;NC&#125;&quot;</span><br><span class="line">if mvn package -q -DskipTests; then</span><br><span class="line">    echo -e &quot;$&#123;GREEN&#125;âœ“ æ‰“åŒ…æˆåŠŸ$&#123;NC&#125;&quot;</span><br><span class="line">else</span><br><span class="line">    echo -e &quot;$&#123;RED&#125;âœ— æ‰“åŒ…å¤±è´¥$&#123;NC&#125;&quot;</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># å¤åˆ¶JARåˆ°distç›®å½•</span><br><span class="line">echo -e &quot;$&#123;YELLOW&#125;[6/6] åˆ›å»ºå‘å¸ƒåŒ…...$&#123;NC&#125;&quot;</span><br><span class="line">DIST_DIR=&quot;$PROJECT_ROOT/dist&quot;</span><br><span class="line">mkdir -p &quot;$DIST_DIR&quot;</span><br><span class="line"></span><br><span class="line">JAR_FILE=$(find &quot;$PROJECT_ROOT/game-core/target&quot; -name &quot;*.jar&quot; -not -name &quot;*original*&quot; | head -1)</span><br><span class="line">if [ -f &quot;$JAR_FILE&quot; ]; then</span><br><span class="line">    cp &quot;$JAR_FILE&quot; &quot;$DIST_DIR/tower-defense.jar&quot;</span><br><span class="line">    echo -e &quot;$&#123;GREEN&#125;âœ“ JARæ–‡ä»¶å·²å¤åˆ¶åˆ° dist/tower-defense.jar$&#123;NC&#125;&quot;</span><br><span class="line">else</span><br><span class="line">    echo -e &quot;$&#123;RED&#125;âœ— æ‰¾ä¸åˆ°JARæ–‡ä»¶$&#123;NC&#125;&quot;</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºå¯åŠ¨è„šæœ¬</span><br><span class="line">cat &gt; &quot;$DIST_DIR/run.sh&quot; &lt;&lt; &#x27;EOF&#x27;</span><br><span class="line">#!/bin/bash</span><br><span class="line">echo &quot;å¯åŠ¨ Java Defender...&quot;</span><br><span class="line">echo &quot;========================&quot;</span><br><span class="line">echo &quot;1. å¯åŠ¨å‘½ä»¤è¡Œç‰ˆæœ¬&quot;</span><br><span class="line">echo &quot;2. æŸ¥çœ‹æ¸¸æˆå¸®åŠ©&quot;</span><br><span class="line">echo &quot;3. é€€å‡º&quot;</span><br><span class="line">echo &quot;========================&quot;</span><br><span class="line">read -p &quot;è¯·é€‰æ‹© (1-3): &quot; choice</span><br><span class="line"></span><br><span class="line">case $choice in</span><br><span class="line">    1)</span><br><span class="line">        java -jar tower-defense.jar</span><br><span class="line">        ;;</span><br><span class="line">    2)</span><br><span class="line">        echo &quot;&quot;</span><br><span class="line">        echo &quot;æ¸¸æˆæ§åˆ¶å‘½ä»¤:&quot;</span><br><span class="line">        echo &quot;  start - å¼€å§‹æ¸¸æˆ&quot;</span><br><span class="line">        echo &quot;  tower &lt;ç±»å‹&gt; &lt;x&gt; &lt;y&gt; - æ”¾ç½®é˜²å¾¡å¡”&quot;</span><br><span class="line">        echo &quot;  status - æŸ¥çœ‹æ¸¸æˆçŠ¶æ€&quot;</span><br><span class="line">        echo &quot;  stop - åœæ­¢æ¸¸æˆ&quot;</span><br><span class="line">        echo &quot;  help - æ˜¾ç¤ºå¸®åŠ©&quot;</span><br><span class="line">        echo &quot;  exit - é€€å‡ºæ¸¸æˆ&quot;</span><br><span class="line">        echo &quot;&quot;</span><br><span class="line">        ;;</span><br><span class="line">    3)</span><br><span class="line">        echo &quot;å†è§ï¼&quot;</span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        echo &quot;æ— æ•ˆé€‰æ‹©&quot;</span><br><span class="line">        ;;</span><br><span class="line">esac</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">chmod +x &quot;$DIST_DIR/run.sh&quot;</span><br><span class="line"></span><br><span class="line">echo -e &quot;$&#123;GREEN&#125;========================================$&#123;NC&#125;&quot;</span><br><span class="line">echo -e &quot;$&#123;GREEN&#125;æ„å»ºå®Œæˆï¼$&#123;NC&#125;&quot;</span><br><span class="line">echo -e &quot;$&#123;GREEN&#125;è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨æ¸¸æˆï¼š$&#123;NC&#125;&quot;</span><br><span class="line">echo -e &quot;  cd $DIST_DIR&quot;</span><br><span class="line">echo -e &quot;  ./run.sh&quot;</span><br><span class="line">echo -e &quot;$&#123;GREEN&#125;========================================$&#123;NC&#125;&quot;</span><br></pre></td></tr></table></figure>



<h3 id="ç¬¬6å‘¨ï¼šå®ç°Webç•Œé¢å’Œæ–‡æ¡£"><a href="#ç¬¬6å‘¨ï¼šå®ç°Webç•Œé¢å’Œæ–‡æ¡£" class="headerlink" title="ç¬¬6å‘¨ï¼šå®ç°Webç•Œé¢å’Œæ–‡æ¡£"></a><strong>ç¬¬6å‘¨ï¼šå®ç°Webç•Œé¢å’Œæ–‡æ¡£</strong></h3><h4 id="æ­¥éª¤13ï¼šåˆ›å»ºç®€å•çš„Webç•Œé¢"><a href="#æ­¥éª¤13ï¼šåˆ›å»ºç®€å•çš„Webç•Œé¢" class="headerlink" title="æ­¥éª¤13ï¼šåˆ›å»ºç®€å•çš„Webç•Œé¢"></a><strong>æ­¥éª¤13ï¼šåˆ›å»ºç®€å•çš„Webç•Œé¢</strong></h4><p>html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- game-ui/web-ui/index.html --&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;zh-CN&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Java Defender - Webç•Œé¢&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        body &#123;</span><br><span class="line">            font-family: Arial, sans-serif;</span><br><span class="line">            margin: 20px;</span><br><span class="line">            background: #f0f0f0;</span><br><span class="line">        &#125;</span><br><span class="line">        .container &#123;</span><br><span class="line">            max-width: 1200px;</span><br><span class="line">            margin: 0 auto;</span><br><span class="line">            background: white;</span><br><span class="line">            padding: 20px;</span><br><span class="line">            border-radius: 10px;</span><br><span class="line">            box-shadow: 0 0 10px rgba(0,0,0,0.1);</span><br><span class="line">        &#125;</span><br><span class="line">        .game-area &#123;</span><br><span class="line">            display: flex;</span><br><span class="line">            gap: 20px;</span><br><span class="line">        &#125;</span><br><span class="line">        #game-canvas &#123;</span><br><span class="line">            border: 2px solid #333;</span><br><span class="line">            background: #222;</span><br><span class="line">        &#125;</span><br><span class="line">        .control-panel &#123;</span><br><span class="line">            flex: 1;</span><br><span class="line">            padding: 15px;</span><br><span class="line">            background: #f9f9f9;</span><br><span class="line">            border-radius: 5px;</span><br><span class="line">        &#125;</span><br><span class="line">        .info-panel &#123;</span><br><span class="line">            margin-top: 20px;</span><br><span class="line">            padding: 15px;</span><br><span class="line">            background: #e9e9e9;</span><br><span class="line">            border-radius: 5px;</span><br><span class="line">        &#125;</span><br><span class="line">        button &#123;</span><br><span class="line">            padding: 10px 15px;</span><br><span class="line">            margin: 5px;</span><br><span class="line">            background: #4CAF50;</span><br><span class="line">            color: white;</span><br><span class="line">            border: none;</span><br><span class="line">            border-radius: 4px;</span><br><span class="line">            cursor: pointer;</span><br><span class="line">        &#125;</span><br><span class="line">        button:hover &#123;</span><br><span class="line">            background: #45a049;</span><br><span class="line">        &#125;</span><br><span class="line">        .tower-option &#123;</span><br><span class="line">            padding: 10px;</span><br><span class="line">            margin: 5px 0;</span><br><span class="line">            background: #ddd;</span><br><span class="line">            border-radius: 4px;</span><br><span class="line">            cursor: pointer;</span><br><span class="line">        &#125;</span><br><span class="line">        .tower-option:hover &#123;</span><br><span class="line">            background: #ccc;</span><br><span class="line">        &#125;</span><br><span class="line">        .enemy &#123;</span><br><span class="line">            position: absolute;</span><br><span class="line">            width: 20px;</span><br><span class="line">            height: 20px;</span><br><span class="line">            border-radius: 50%;</span><br><span class="line">        &#125;</span><br><span class="line">        .tower &#123;</span><br><span class="line">            position: absolute;</span><br><span class="line">            width: 30px;</span><br><span class="line">            height: 30px;</span><br><span class="line">            text-align: center;</span><br><span class="line">            line-height: 30px;</span><br><span class="line">            font-weight: bold;</span><br><span class="line">        &#125;</span><br><span class="line">        .basic-tower &#123;</span><br><span class="line">            background: blue;</span><br><span class="line">            color: white;</span><br><span class="line">        &#125;</span><br><span class="line">        .sniper-tower &#123;</span><br><span class="line">            background: purple;</span><br><span class="line">            color: white;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;h1&gt;ğŸ® Java Defender - å¡”é˜²æ¸¸æˆ&lt;/h1&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;div class=&quot;game-area&quot;&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;canvas id=&quot;game-canvas&quot; width=&quot;800&quot; height=&quot;600&quot;&gt;&lt;/canvas&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            </span><br><span class="line">            &lt;div class=&quot;control-panel&quot;&gt;</span><br><span class="line">                &lt;h3&gt;æ¸¸æˆæ§åˆ¶&lt;/h3&gt;</span><br><span class="line">                &lt;button onclick=&quot;startGame()&quot;&gt;â–¶ å¼€å§‹æ¸¸æˆ&lt;/button&gt;</span><br><span class="line">                &lt;button onclick=&quot;stopGame()&quot;&gt;â¸ æš‚åœæ¸¸æˆ&lt;/button&gt;</span><br><span class="line">                &lt;button onclick=&quot;resetGame()&quot;&gt;ğŸ”„ é‡ç½®æ¸¸æˆ&lt;/button&gt;</span><br><span class="line">                </span><br><span class="line">                &lt;h3&gt;é˜²å¾¡å¡”&lt;/h3&gt;</span><br><span class="line">                &lt;div class=&quot;tower-option&quot; onclick=&quot;selectTower(&#x27;BASIC&#x27;)&quot;&gt;</span><br><span class="line">                    &lt;strong&gt;åŸºç¡€å¡”&lt;/strong&gt;&lt;br&gt;</span><br><span class="line">                    ä¼¤å®³: 10 | èŒƒå›´: 5 | ä»·æ ¼: 100é‡‘</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;tower-option&quot; onclick=&quot;selectTower(&#x27;SNIPER&#x27;)&quot;&gt;</span><br><span class="line">                    &lt;strong&gt;ç‹™å‡»å¡”&lt;/strong&gt;&lt;br&gt;</span><br><span class="line">                    ä¼¤å®³: 30 | èŒƒå›´: 10 | ä»·æ ¼: 200é‡‘</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                </span><br><span class="line">                &lt;h3&gt;æ¸¸æˆçŠ¶æ€&lt;/h3&gt;</span><br><span class="line">                &lt;div id=&quot;status&quot;&gt;</span><br><span class="line">                    &lt;p&gt;ç”Ÿå‘½: &lt;span id=&quot;health&quot;&gt;20&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">                    &lt;p&gt;é‡‘å¸: &lt;span id=&quot;gold&quot;&gt;1000&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">                    &lt;p&gt;æ³¢æ¬¡: &lt;span id=&quot;wave&quot;&gt;0&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">                    &lt;p&gt;åˆ†æ•°: &lt;span id=&quot;score&quot;&gt;0&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                </span><br><span class="line">                &lt;h3&gt;æ“ä½œè¯´æ˜&lt;/h3&gt;</span><br><span class="line">                &lt;p&gt;1. ç‚¹å‡»&quot;å¼€å§‹æ¸¸æˆ&quot;&lt;/p&gt;</span><br><span class="line">                &lt;p&gt;2. é€‰æ‹©é˜²å¾¡å¡”ç±»å‹&lt;/p&gt;</span><br><span class="line">                &lt;p&gt;3. åœ¨åœ°å›¾ä¸Šç‚¹å‡»æ”¾ç½®å¡”&lt;/p&gt;</span><br><span class="line">                &lt;p&gt;4. å‡»è´¥æ‰€æœ‰æ•Œäººè¿›å…¥ä¸‹ä¸€æ³¢&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;div class=&quot;info-panel&quot;&gt;</span><br><span class="line">            &lt;h3&gt;æ¸¸æˆæ—¥å¿—&lt;/h3&gt;</span><br><span class="line">            &lt;div id=&quot;game-log&quot; style=&quot;height: 100px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;&quot;&gt;</span><br><span class="line">                &lt;p&gt;æ¸¸æˆå‡†å¤‡å°±ç»ª...&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        // æ¸¸æˆçŠ¶æ€</span><br><span class="line">        let gameState = &#123;</span><br><span class="line">            running: false,</span><br><span class="line">            selectedTower: null,</span><br><span class="line">            towers: [],</span><br><span class="line">            enemies: [],</span><br><span class="line">            player: &#123;</span><br><span class="line">                health: 20,</span><br><span class="line">                gold: 1000,</span><br><span class="line">                score: 0,</span><br><span class="line">                wave: 0</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        // ç”»å¸ƒå’Œä¸Šä¸‹æ–‡</span><br><span class="line">        const canvas = document.getElementById(&#x27;game-canvas&#x27;);</span><br><span class="line">        const ctx = canvas.getContext(&#x27;2d&#x27;);</span><br><span class="line"></span><br><span class="line">        // åœ°å›¾æ•°æ®</span><br><span class="line">        const gameMap = &#123;</span><br><span class="line">            width: 20,</span><br><span class="line">            height: 10,</span><br><span class="line">            path: [],</span><br><span class="line">            towerPositions: []</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        // åˆå§‹åŒ–åœ°å›¾</span><br><span class="line">        function initMap() &#123;</span><br><span class="line">            // åˆ›å»ºæ°´å¹³è·¯å¾„</span><br><span class="line">            for (let x = 0; x &lt; gameMap.width; x++) &#123;</span><br><span class="line">                gameMap.path.push(&#123;x: x, y: Math.floor(gameMap.height / 2)&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            // åˆ›å»ºå¡”ä½</span><br><span class="line">            for (let x = 0; x &lt; gameMap.width; x++) &#123;</span><br><span class="line">                if (x % 3 === 0) &#123;</span><br><span class="line">                    gameMap.towerPositions.push(&#123;x: x, y: Math.floor(gameMap.height / 2) - 2&#125;);</span><br><span class="line">                    gameMap.towerPositions.push(&#123;x: x, y: Math.floor(gameMap.height / 2) + 2&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // ç»˜åˆ¶æ¸¸æˆ</span><br><span class="line">        function drawGame() &#123;</span><br><span class="line">            // æ¸…ç©ºç”»å¸ƒ</span><br><span class="line">            ctx.clearRect(0, 0, canvas.width, canvas.height);</span><br><span class="line">            </span><br><span class="line">            // è®¡ç®—å•å…ƒæ ¼å¤§å°</span><br><span class="line">            const cellWidth = canvas.width / gameMap.width;</span><br><span class="line">            const cellHeight = canvas.height / gameMap.height;</span><br><span class="line">            </span><br><span class="line">            // ç»˜åˆ¶ç½‘æ ¼</span><br><span class="line">            ctx.strokeStyle = &#x27;#333&#x27;;</span><br><span class="line">            ctx.lineWidth = 1;</span><br><span class="line">            </span><br><span class="line">            for (let x = 0; x &lt;= gameMap.width; x++) &#123;</span><br><span class="line">                ctx.beginPath();</span><br><span class="line">                ctx.moveTo(x * cellWidth, 0);</span><br><span class="line">                ctx.lineTo(x * cellWidth, canvas.height);</span><br><span class="line">                ctx.stroke();</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            for (let y = 0; y &lt;= gameMap.height; y++) &#123;</span><br><span class="line">                ctx.beginPath();</span><br><span class="line">                ctx.moveTo(0, y * cellHeight);</span><br><span class="line">                ctx.lineTo(canvas.width, y * cellHeight);</span><br><span class="line">                ctx.stroke();</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            // ç»˜åˆ¶è·¯å¾„</span><br><span class="line">            ctx.fillStyle = &#x27;#8BC34A&#x27;;</span><br><span class="line">            gameMap.path.forEach(point =&gt; &#123;</span><br><span class="line">                ctx.fillRect(point.x * cellWidth, point.y * cellHeight, cellWidth, cellHeight);</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">            // ç»˜åˆ¶å¡”ä½</span><br><span class="line">            ctx.fillStyle = &#x27;#FFC107&#x27;;</span><br><span class="line">            gameMap.towerPositions.forEach(point =&gt; &#123;</span><br><span class="line">                ctx.fillRect(point.x * cellWidth, point.y * cellHeight, cellWidth, cellHeight);</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">            // ç»˜åˆ¶èµ·ç‚¹å’Œç»ˆç‚¹</span><br><span class="line">            ctx.fillStyle = &#x27;#F44336&#x27;;</span><br><span class="line">            ctx.fillRect(0, Math.floor(gameMap.height / 2) * cellHeight, cellWidth, cellHeight);</span><br><span class="line">            </span><br><span class="line">            ctx.fillStyle = &#x27;#4CAF50&#x27;;</span><br><span class="line">            ctx.fillRect((gameMap.width - 1) * cellWidth, Math.floor(gameMap.height / 2) * cellHeight, cellWidth, cellHeight);</span><br><span class="line">            </span><br><span class="line">            // ç»˜åˆ¶é˜²å¾¡å¡”</span><br><span class="line">            gameState.towers.forEach(tower =&gt; &#123;</span><br><span class="line">                ctx.fillStyle = tower.type === &#x27;BASIC&#x27; ? &#x27;#2196F3&#x27; : &#x27;#9C27B0&#x27;;</span><br><span class="line">                ctx.beginPath();</span><br><span class="line">                ctx.arc(</span><br><span class="line">                    tower.x * cellWidth + cellWidth / 2,</span><br><span class="line">                    tower.y * cellHeight + cellHeight / 2,</span><br><span class="line">                    Math.min(cellWidth, cellHeight) / 2,</span><br><span class="line">                    0, Math.PI * 2</span><br><span class="line">                );</span><br><span class="line">                ctx.fill();</span><br><span class="line">                </span><br><span class="line">                // ç»˜åˆ¶æ”»å‡»èŒƒå›´</span><br><span class="line">                ctx.strokeStyle = &#x27;rgba(255, 255, 255, 0.3)&#x27;;</span><br><span class="line">                ctx.lineWidth = 1;</span><br><span class="line">                ctx.beginPath();</span><br><span class="line">                ctx.arc(</span><br><span class="line">                    tower.x * cellWidth + cellWidth / 2,</span><br><span class="line">                    tower.y * cellHeight + cellHeight / 2,</span><br><span class="line">                    tower.range * Math.min(cellWidth, cellHeight),</span><br><span class="line">                    0, Math.PI * 2</span><br><span class="line">                );</span><br><span class="line">                ctx.stroke();</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">            // ç»˜åˆ¶æ•Œäºº</span><br><span class="line">            gameState.enemies.forEach(enemy =&gt; &#123;</span><br><span class="line">                ctx.fillStyle = enemy.type === &#x27;BOSS&#x27; ? &#x27;#FF5722&#x27; : </span><br><span class="line">                               enemy.type === &#x27;FAST&#x27; ? &#x27;#00BCD4&#x27; : &#x27;#795548&#x27;;</span><br><span class="line">                ctx.beginPath();</span><br><span class="line">                ctx.arc(</span><br><span class="line">                    enemy.x * cellWidth + cellWidth / 2,</span><br><span class="line">                    enemy.y * cellHeight + cellHeight / 2,</span><br><span class="line">                    Math.min(cellWidth, cellHeight) / 3,</span><br><span class="line">                    0, Math.PI * 2</span><br><span class="line">                );</span><br><span class="line">                ctx.fill();</span><br><span class="line">                </span><br><span class="line">                // ç»˜åˆ¶ç”Ÿå‘½æ¡</span><br><span class="line">                const healthPercent = enemy.health / enemy.maxHealth;</span><br><span class="line">                ctx.fillStyle = &#x27;#F44336&#x27;;</span><br><span class="line">                ctx.fillRect(</span><br><span class="line">                    enemy.x * cellWidth,</span><br><span class="line">                    enemy.y * cellHeight - 5,</span><br><span class="line">                    cellWidth * healthPercent,</span><br><span class="line">                    3</span><br><span class="line">                );</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // æ¸¸æˆä¸»å¾ªç¯</span><br><span class="line">        function gameLoop() &#123;</span><br><span class="line">            if (!gameState.running) return;</span><br><span class="line">            </span><br><span class="line">            // æ›´æ–°æ¸¸æˆçŠ¶æ€</span><br><span class="line">            updateGame();</span><br><span class="line">            </span><br><span class="line">            // ç»˜åˆ¶æ¸¸æˆ</span><br><span class="line">            drawGame();</span><br><span class="line">            </span><br><span class="line">            // æ›´æ–°UI</span><br><span class="line">            updateUI();</span><br><span class="line">            </span><br><span class="line">            // ç»§ç»­å¾ªç¯</span><br><span class="line">            requestAnimationFrame(gameLoop);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // æ›´æ–°æ¸¸æˆçŠ¶æ€</span><br><span class="line">        function updateGame() &#123;</span><br><span class="line">            // è¿™é‡Œåº”è¯¥ä»åç«¯è·å–æ¸¸æˆçŠ¶æ€</span><br><span class="line">            // ç›®å‰ç”¨æ¨¡æ‹Ÿæ•°æ®</span><br><span class="line">            simulateGame();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // æ¨¡æ‹Ÿæ¸¸æˆé€»è¾‘</span><br><span class="line">        function simulateGame() &#123;</span><br><span class="line">            // æ¨¡æ‹Ÿæ•Œäººç§»åŠ¨</span><br><span class="line">            gameState.enemies.forEach(enemy =&gt; &#123;</span><br><span class="line">                enemy.x += 0.01; // ç®€å•å‘å³ç§»åŠ¨</span><br><span class="line">                </span><br><span class="line">                // å¦‚æœåˆ°è¾¾ç»ˆç‚¹</span><br><span class="line">                if (enemy.x &gt;= gameMap.width - 1) &#123;</span><br><span class="line">                    gameState.player.health--;</span><br><span class="line">                    gameState.enemies = gameState.enemies.filter(e =&gt; e !== enemy);</span><br><span class="line">                    addLog(`æ•Œäººåˆ°è¾¾ç»ˆç‚¹ï¼ç”Ÿå‘½å€¼: $&#123;gameState.player.health&#125;`);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">            // æ¨¡æ‹Ÿå¡”æ”»å‡»</span><br><span class="line">            gameState.towers.forEach(tower =&gt; &#123;</span><br><span class="line">                gameState.enemies.forEach(enemy =&gt; &#123;</span><br><span class="line">                    const distance = Math.sqrt(</span><br><span class="line">                        Math.pow(enemy.x - tower.x, 2) + </span><br><span class="line">                        Math.pow(enemy.y - tower.y, 2)</span><br><span class="line">                    );</span><br><span class="line">                    </span><br><span class="line">                    if (distance &lt;= tower.range &amp;&amp; Math.random() &lt; 0.1) &#123;</span><br><span class="line">                        enemy.health -= tower.damage;</span><br><span class="line">                        if (enemy.health &lt;= 0) &#123;</span><br><span class="line">                            gameState.player.gold += enemy.reward;</span><br><span class="line">                            gameState.player.score += enemy.reward;</span><br><span class="line">                            gameState.enemies = gameState.enemies.filter(e =&gt; e !== enemy);</span><br><span class="line">                            addLog(`å‡»è´¥$&#123;enemy.type&#125;æ•Œäººï¼è·å¾—$&#123;enemy.reward&#125;é‡‘å¸`);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">            // ç”Ÿæˆæ–°æ•Œäºº</span><br><span class="line">            if (Math.random() &lt; 0.02 &amp;&amp; gameState.enemies.length &lt; 10) &#123;</span><br><span class="line">                const enemyTypes = [&#x27;NORMAL&#x27;, &#x27;FAST&#x27;];</span><br><span class="line">                const type = enemyTypes[Math.floor(Math.random() * enemyTypes.length)];</span><br><span class="line">                </span><br><span class="line">                gameState.enemies.push(&#123;</span><br><span class="line">                    type: type,</span><br><span class="line">                    x: 0,</span><br><span class="line">                    y: Math.floor(gameMap.height / 2),</span><br><span class="line">                    health: type === &#x27;FAST&#x27; ? 20 : 50,</span><br><span class="line">                    maxHealth: type === &#x27;FAST&#x27; ? 20 : 50,</span><br><span class="line">                    reward: type === &#x27;FAST&#x27; ? 15 : 10</span><br><span class="line">                &#125;);</span><br><span class="line">                </span><br><span class="line">                gameState.player.wave = Math.max(gameState.player.wave, Math.floor(gameState.enemies.length / 5));</span><br><span class="line">                addLog(`æ–°çš„$&#123;type&#125;æ•Œäººå‡ºç°ï¼`);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            // æ£€æŸ¥æ¸¸æˆç»“æŸ</span><br><span class="line">            if (gameState.player.health &lt;= 0) &#123;</span><br><span class="line">                gameState.running = false;</span><br><span class="line">                addLog(`æ¸¸æˆç»“æŸï¼æœ€ç»ˆåˆ†æ•°: $&#123;gameState.player.score&#125;`);</span><br><span class="line">                alert(`æ¸¸æˆç»“æŸï¼æœ€ç»ˆåˆ†æ•°: $&#123;gameState.player.score&#125;`);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // æ›´æ–°UI</span><br><span class="line">        function updateUI() &#123;</span><br><span class="line">            document.getElementById(&#x27;health&#x27;).textContent = gameState.player.health;</span><br><span class="line">            document.getElementById(&#x27;gold&#x27;).textContent = gameState.player.gold;</span><br><span class="line">            document.getElementById(&#x27;wave&#x27;).textContent = gameState.player.wave;</span><br><span class="line">            document.getElementById(&#x27;score&#x27;).textContent = gameState.player.score;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // æ·»åŠ æ—¥å¿—</span><br><span class="line">        function addLog(message) &#123;</span><br><span class="line">            const log = document.getElementById(&#x27;game-log&#x27;);</span><br><span class="line">            const p = document.createElement(&#x27;p&#x27;);</span><br><span class="line">            p.textContent = `[$&#123;new Date().toLocaleTimeString()&#125;] $&#123;message&#125;`;</span><br><span class="line">            log.appendChild(p);</span><br><span class="line">            log.scrollTop = log.scrollHeight;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // æ¸¸æˆæ§åˆ¶å‡½æ•°</span><br><span class="line">        function startGame() &#123;</span><br><span class="line">            if (!gameState.running) &#123;</span><br><span class="line">                gameState.running = true;</span><br><span class="line">                addLog(&quot;æ¸¸æˆå¼€å§‹ï¼&quot;);</span><br><span class="line">                gameLoop();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function stopGame() &#123;</span><br><span class="line">            gameState.running = false;</span><br><span class="line">            addLog(&quot;æ¸¸æˆæš‚åœ&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function resetGame() &#123;</span><br><span class="line">            gameState = &#123;</span><br><span class="line">                running: false,</span><br><span class="line">                selectedTower: null,</span><br><span class="line">                towers: [],</span><br><span class="line">                enemies: [],</span><br><span class="line">                player: &#123;</span><br><span class="line">                    health: 20,</span><br><span class="line">                    gold: 1000,</span><br><span class="line">                    score: 0,</span><br><span class="line">                    wave: 0</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            addLog(&quot;æ¸¸æˆå·²é‡ç½®&quot;);</span><br><span class="line">            drawGame();</span><br><span class="line">            updateUI();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function selectTower(type) &#123;</span><br><span class="line">            gameState.selectedTower = type;</span><br><span class="line">            addLog(`å·²é€‰æ‹©$&#123;type&#125;å¡”`);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // ç‚¹å‡»ç”»å¸ƒæ”¾ç½®å¡”</span><br><span class="line">        canvas.addEventListener(&#x27;click&#x27;, (event) =&gt; &#123;</span><br><span class="line">            if (!gameState.selectedTower || !gameState.running) return;</span><br><span class="line">            </span><br><span class="line">            const rect = canvas.getBoundingClientRect();</span><br><span class="line">            const x = event.clientX - rect.left;</span><br><span class="line">            const y = event.clientY - rect.top;</span><br><span class="line">            </span><br><span class="line">            const cellX = Math.floor(x / (canvas.width / gameMap.width));</span><br><span class="line">            const cellY = Math.floor(y / (canvas.height / gameMap.height));</span><br><span class="line">            </span><br><span class="line">            // æ£€æŸ¥æ˜¯å¦æ˜¯å¡”ä½</span><br><span class="line">            const isTowerPosition = gameMap.towerPositions.some(</span><br><span class="line">                pos =&gt; pos.x === cellX &amp;&amp; pos.y === cellY</span><br><span class="line">            );</span><br><span class="line">            </span><br><span class="line">            if (isTowerPosition) &#123;</span><br><span class="line">                // æ£€æŸ¥æ˜¯å¦å·²æœ‰å¡”</span><br><span class="line">                const existingTower = gameState.towers.find(</span><br><span class="line">                    t =&gt; t.x === cellX &amp;&amp; t.y === cellY</span><br><span class="line">                );</span><br><span class="line">                </span><br><span class="line">                if (!existingTower) &#123;</span><br><span class="line">                    const cost = gameState.selectedTower === &#x27;BASIC&#x27; ? 100 : 200;</span><br><span class="line">                    if (gameState.player.gold &gt;= cost) &#123;</span><br><span class="line">                        gameState.towers.push(&#123;</span><br><span class="line">                            type: gameState.selectedTower,</span><br><span class="line">                            x: cellX,</span><br><span class="line">                            y: cellY,</span><br><span class="line">                            damage: gameState.selectedTower === &#x27;BASIC&#x27; ? 10 : 30,</span><br><span class="line">                            range: gameState.selectedTower === &#x27;BASIC&#x27; ? 5 : 10</span><br><span class="line">                        &#125;);</span><br><span class="line">                        gameState.player.gold -= cost;</span><br><span class="line">                        addLog(`$&#123;gameState.selectedTower&#125;å¡”å·²æ”¾ç½®åœ¨($&#123;cellX&#125;, $&#123;cellY&#125;)`);</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        addLog(`é‡‘å¸ä¸è¶³ï¼éœ€è¦$&#123;cost&#125;é‡‘å¸`);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    addLog(&quot;æ­¤ä½ç½®å·²æœ‰é˜²å¾¡å¡”&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        // åˆå§‹åŒ–</span><br><span class="line">        initMap();</span><br><span class="line">        drawGame();</span><br><span class="line">        updateUI();</span><br><span class="line">        addLog(&quot;æ¸¸æˆåˆå§‹åŒ–å®Œæˆï¼Œç‚¹å‡»å¼€å§‹æ¸¸æˆ&quot;);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h4 id="æ­¥éª¤14ï¼šåˆ›å»ºé¡¹ç›®æ–‡æ¡£"><a href="#æ­¥éª¤14ï¼šåˆ›å»ºé¡¹ç›®æ–‡æ¡£" class="headerlink" title="æ­¥éª¤14ï¼šåˆ›å»ºé¡¹ç›®æ–‡æ¡£"></a><strong>æ­¥éª¤14ï¼šåˆ›å»ºé¡¹ç›®æ–‡æ¡£</strong></h4><p><strong>1. README.md</strong></p>
<p>markdown</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># ğŸ° Java Defender - å¡”é˜²ç­–ç•¥æ¸¸æˆ</span><br><span class="line"></span><br><span class="line">ä¸€ä¸ªåŸºäºJavaå®ç°çš„å¡”é˜²ç­–ç•¥æ¸¸æˆï¼Œæ—¨åœ¨å±•ç¤ºè½¯ä»¶æ¶æ„è®¾è®¡ã€å¤šè¯­è¨€åä½œå’Œé¡¹ç›®å¼€å‘èƒ½åŠ›ã€‚</span><br><span class="line"></span><br><span class="line">## ğŸ“‹ é¡¹ç›®æ¦‚è¿°</span><br><span class="line"></span><br><span class="line">è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¡”é˜²æ¸¸æˆå®ç°ï¼ŒåŒ…å«ï¼š</span><br><span class="line">- æ ¸å¿ƒæ¸¸æˆå¼•æ“ï¼ˆJavaï¼‰</span><br><span class="line">- å‘½ä»¤è¡Œç•Œé¢</span><br><span class="line">- Webå‰ç«¯ç•Œé¢ï¼ˆHTML5/JavaScriptï¼‰</span><br><span class="line">- åœ°å›¾ç¼–è¾‘å™¨ï¼ˆPythonï¼‰</span><br><span class="line">- æ•°æ®ç”Ÿæˆå·¥å…·ï¼ˆPythonï¼‰</span><br><span class="line">- è‡ªåŠ¨åŒ–æ„å»ºè„šæœ¬ï¼ˆShellï¼‰</span><br><span class="line"></span><br><span class="line">## ğŸš€ å¿«é€Ÿå¼€å§‹</span><br><span class="line"></span><br><span class="line">### ç¯å¢ƒè¦æ±‚</span><br><span class="line">- Java 11+</span><br><span class="line">- Maven 3.6+</span><br><span class="line">- Python 3.8+ï¼ˆä»…å·¥å…·è„šæœ¬éœ€è¦ï¼‰</span><br><span class="line">- ç°ä»£æµè§ˆå™¨ï¼ˆç”¨äºWebç•Œé¢ï¼‰</span><br><span class="line"></span><br><span class="line">### æ„å»ºå’Œè¿è¡Œ</span><br><span class="line"></span><br><span class="line">1. **æ„å»ºé¡¹ç›®**</span><br><span class="line">```bash</span><br><span class="line">cd tools/build-scripts</span><br><span class="line">./build.sh</span><br></pre></td></tr></table></figure>



<ol>
<li><strong>è¿è¡Œæ¸¸æˆ</strong></li>
</ol>
<p>bash</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd dist</span><br><span class="line">./run.sh</span><br></pre></td></tr></table></figure>



<ol>
<li><strong>Webç•Œé¢</strong></li>
</ol>
<p>bash</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># ä½¿ç”¨ä»»ä½•HTTPæœåŠ¡å™¨ï¼Œä¾‹å¦‚ï¼š</span><br><span class="line">python3 -m http.server 8000</span><br><span class="line"># ç„¶åè®¿é—® http://localhost:8000/game-ui/web-ui/</span><br></pre></td></tr></table></figure>



<h2 id="ğŸ“-é¡¹ç›®ç»“æ„"><a href="#ğŸ“-é¡¹ç›®ç»“æ„" class="headerlink" title="ğŸ“ é¡¹ç›®ç»“æ„"></a>ğŸ“ é¡¹ç›®ç»“æ„</h2><p>text</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">java-strategy-game/</span><br><span class="line">â”œâ”€â”€ game-core/                    # Javaæ ¸å¿ƒæ¸¸æˆé€»è¾‘</span><br><span class="line">â”‚   â”œâ”€â”€ src/main/java/com/javagame/</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ domain/              # é¢†åŸŸæ¨¡å‹</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ engine/              # æ¸¸æˆå¼•æ“</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ service/             # æ¸¸æˆæœåŠ¡</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ ai/                  # AIç®—æ³•</span><br><span class="line">â”‚   â”‚   â””â”€â”€ Main.java            # ç¨‹åºå…¥å£</span><br><span class="line">â”‚   â””â”€â”€ pom.xml                  # Mavené…ç½®</span><br><span class="line">â”œâ”€â”€ game-ui/</span><br><span class="line">â”‚   â””â”€â”€ web-ui/                  # Webå‰ç«¯ç•Œé¢</span><br><span class="line">â”œâ”€â”€ tools/</span><br><span class="line">â”‚   â”œâ”€â”€ map-editor/              # Pythonåœ°å›¾ç¼–è¾‘å™¨</span><br><span class="line">â”‚   â”œâ”€â”€ data-generator/          # æ•°æ®ç”Ÿæˆè„šæœ¬</span><br><span class="line">â”‚   â””â”€â”€ build-scripts/           # æ„å»ºå’Œéƒ¨ç½²è„šæœ¬</span><br><span class="line">â”œâ”€â”€ docs/                        # é¡¹ç›®æ–‡æ¡£</span><br><span class="line">â”œâ”€â”€ dist/                        # æ„å»ºè¾“å‡ºç›®å½•</span><br><span class="line">â””â”€â”€ README.md                    # é¡¹ç›®è¯´æ˜</span><br></pre></td></tr></table></figure>



<h2 id="ğŸ®-æ¸¸æˆç‰¹æ€§"><a href="#ğŸ®-æ¸¸æˆç‰¹æ€§" class="headerlink" title="ğŸ® æ¸¸æˆç‰¹æ€§"></a>ğŸ® æ¸¸æˆç‰¹æ€§</h2><h3 id="æ ¸å¿ƒç‰¹æ€§"><a href="#æ ¸å¿ƒç‰¹æ€§" class="headerlink" title="æ ¸å¿ƒç‰¹æ€§"></a>æ ¸å¿ƒç‰¹æ€§</h3><ul>
<li>âœ… å¤šç§æ•Œäººç±»å‹ï¼ˆæ™®é€šã€å¿«é€Ÿã€å¦å…‹ã€BOSSï¼‰</li>
<li>âœ… å¤šç§é˜²å¾¡å¡”ç±»å‹ï¼ˆåŸºç¡€ã€ç‹™å‡»ã€åŠ å†œç‚®ï¼‰</li>
<li>âœ… æ³¢æ¬¡ç³»ç»Ÿï¼ˆé€æ­¥å¢å¼ºçš„æ•Œäººï¼‰</li>
<li>âœ… ç»æµç³»ç»Ÿï¼ˆé‡‘å¸ã€å‡çº§ã€å¥–åŠ±ï¼‰</li>
<li>âœ… è·¯å¾„å¯»æ‰¾AI</li>
</ul>
<h3 id="æ‰©å±•ç‰¹æ€§"><a href="#æ‰©å±•ç‰¹æ€§" class="headerlink" title="æ‰©å±•ç‰¹æ€§"></a>æ‰©å±•ç‰¹æ€§</h3><ul>
<li>âš™ï¸ åœ°å›¾ç¼–è¾‘å™¨ï¼ˆPython GUIï¼‰</li>
<li>ğŸŒ Webå‰ç«¯ç•Œé¢</li>
<li>ğŸ“Š æ•°æ®é©±åŠ¨é…ç½®</li>
<li>ğŸ§ª å•å…ƒæµ‹è¯•è¦†ç›–</li>
</ul>
<h2 id="ğŸ”§-æŠ€æœ¯æ ˆ"><a href="#ğŸ”§-æŠ€æœ¯æ ˆ" class="headerlink" title="ğŸ”§ æŠ€æœ¯æ ˆ"></a>ğŸ”§ æŠ€æœ¯æ ˆ</h2><h3 id="åç«¯ï¼ˆJavaï¼‰"><a href="#åç«¯ï¼ˆJavaï¼‰" class="headerlink" title="åç«¯ï¼ˆJavaï¼‰"></a>åç«¯ï¼ˆJavaï¼‰</h3><ul>
<li><strong>æ ¸å¿ƒ</strong>: Java 11+</li>
<li><strong>æ„å»º</strong>: Maven</li>
<li><strong>æ¶æ„</strong>: åˆ†å±‚æ¶æ„ã€é¢†åŸŸé©±åŠ¨è®¾è®¡</li>
<li><strong>è®¾è®¡æ¨¡å¼</strong>: å·¥å‚æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼</li>
</ul>
<h3 id="å‰ç«¯ï¼ˆWebï¼‰"><a href="#å‰ç«¯ï¼ˆWebï¼‰" class="headerlink" title="å‰ç«¯ï¼ˆWebï¼‰"></a>å‰ç«¯ï¼ˆWebï¼‰</h3><ul>
<li><strong>ç•Œé¢</strong>: HTML5 Canvas</li>
<li><strong>äº¤äº’</strong>: åŸç”ŸJavaScript</li>
<li><strong>æ ·å¼</strong>: CSS3</li>
</ul>
<h3 id="å·¥å…·é“¾"><a href="#å·¥å…·é“¾" class="headerlink" title="å·¥å…·é“¾"></a>å·¥å…·é“¾</h3><ul>
<li><strong>ç¼–è¾‘å™¨</strong>: Python + Tkinter</li>
<li><strong>è„šæœ¬</strong>: Shell + Python</li>
<li><strong>æ•°æ®</strong>: JSONé…ç½®æ–‡ä»¶</li>
</ul>
<h2 id="ğŸ§ª-æµ‹è¯•"><a href="#ğŸ§ª-æµ‹è¯•" class="headerlink" title="ğŸ§ª æµ‹è¯•"></a>ğŸ§ª æµ‹è¯•</h2><p>è¿è¡Œå•å…ƒæµ‹è¯•ï¼š</p>
<p>bash</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd game-core</span><br><span class="line">mvn test</span><br></pre></td></tr></table></figure>



<h2 id="ğŸ“š-å¼€å‘æ–‡æ¡£"><a href="#ğŸ“š-å¼€å‘æ–‡æ¡£" class="headerlink" title="ğŸ“š å¼€å‘æ–‡æ¡£"></a>ğŸ“š å¼€å‘æ–‡æ¡£</h2><p>è¯¦ç»†å¼€å‘æ–‡æ¡£è§ <code>docs/</code> ç›®å½•ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs/architecture.md">æ¶æ„è®¾è®¡</a></li>
<li><a target="_blank" rel="noopener" href="https://docs/api.md">APIæ–‡æ¡£</a></li>
<li><a target="_blank" rel="noopener" href="https://docs/deployment.md">éƒ¨ç½²æŒ‡å—</a></li>
<li><a target="_blank" rel="noopener" href="https://docs/contributing.md">è´¡çŒ®æŒ‡å—</a></li>
</ul>
<h2 id="ğŸ¯-å­¦ä¹ ç›®æ ‡"><a href="#ğŸ¯-å­¦ä¹ ç›®æ ‡" class="headerlink" title="ğŸ¯ å­¦ä¹ ç›®æ ‡"></a>ğŸ¯ å­¦ä¹ ç›®æ ‡</h2><p>é€šè¿‡æœ¬é¡¹ç›®ï¼Œä½ å¯ä»¥å­¦ä¹ åˆ°ï¼š</p>
<ol>
<li>ä¼ä¸šçº§Javaé¡¹ç›®æ¶æ„è®¾è®¡</li>
<li>æ¸¸æˆå¼•æ“å¼€å‘åŸºç¡€</li>
<li>å¤šè¯­è¨€åä½œå¼€å‘</li>
<li>é¡¹ç›®æ–‡æ¡£ç¼–å†™</li>
<li>æŒç»­é›†æˆå’Œéƒ¨ç½²</li>
</ol>
<h2 id="ğŸ¤-è´¡çŒ®"><a href="#ğŸ¤-è´¡çŒ®" class="headerlink" title="ğŸ¤ è´¡çŒ®"></a>ğŸ¤ è´¡çŒ®</h2><p>æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼</p>
<h2 id="ğŸ“„-è®¸å¯è¯"><a href="#ğŸ“„-è®¸å¯è¯" class="headerlink" title="ğŸ“„ è®¸å¯è¯"></a>ğŸ“„ è®¸å¯è¯</h2><p>MIT License</p>
<p>text</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">**2. æ¶æ„è®¾è®¡æ–‡æ¡£ (docs/architecture.md)**</span><br><span class="line">```markdown</span><br><span class="line"># æ¶æ„è®¾è®¡æ–‡æ¡£</span><br><span class="line"></span><br><span class="line">## 1. æ€»ä½“æ¶æ„</span><br><span class="line"></span><br><span class="line">### 1.1 ç³»ç»Ÿæ¶æ„å›¾</span><br></pre></td></tr></table></figure>



<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ è¡¨ç°å±‚ (Presentation) â”‚<br>â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚<br>â”‚ â”‚ å‘½ä»¤è¡Œç•Œé¢ â”‚ â”‚ Webç•Œé¢ (HTML5) â”‚ â”‚<br>â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>â”‚ é€šä¿¡ (REST&#x2F;WebSocket)<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ åº”ç”¨å±‚ (Application) â”‚<br>â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚<br>â”‚ â”‚ æ¸¸æˆæ§åˆ¶æœåŠ¡ â”‚ â”‚ AIå†³ç­–æœåŠ¡ â”‚ â”‚<br>â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>â”‚ é¢†åŸŸæ¨¡å‹è°ƒç”¨<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ é¢†åŸŸå±‚ (Domain) â”‚<br>â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚<br>â”‚ â”‚ æ¸¸æˆå®ä½“ â”‚ â”‚ æ¸¸æˆè§„åˆ™å¼•æ“ â”‚ â”‚<br>â”‚ â”‚ â€¢ æ•Œäºº â”‚ â”‚ â€¢ æˆ˜æ–—è®¡ç®— â”‚ â”‚<br>â”‚ â”‚ â€¢ é˜²å¾¡å¡” â”‚ â”‚ â€¢ è·¯å¾„å¯»æ‰¾ â”‚ â”‚<br>â”‚ â”‚ â€¢ ç©å®¶ â”‚ â”‚ â€¢ ç»æµç³»ç»Ÿ â”‚ â”‚<br>â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>â”‚ æ•°æ®è®¿é—®<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ åŸºç¡€è®¾æ–½å±‚ (Infrastructure) â”‚<br>â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚<br>â”‚ â”‚ æ•°æ®æŒä¹…åŒ– â”‚ â”‚ é…ç½®æ–‡ä»¶è¯»å– â”‚ â”‚<br>â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<p>text</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">### 1.2 æ ¸å¿ƒæ¨¡å—åˆ’åˆ†</span><br><span class="line"></span><br><span class="line">#### 1.2.1 game-core (Javaæ ¸å¿ƒæ¨¡å—)</span><br></pre></td></tr></table></figure>



<p>com.javagame&#x2F;<br>â”œâ”€â”€ domain&#x2F; # é¢†åŸŸæ¨¡å‹å±‚<br>â”‚ â”œâ”€â”€ GameMap.java # æ¸¸æˆåœ°å›¾<br>â”‚ â”œâ”€â”€ Enemy.java # æ•Œäººå®ä½“<br>â”‚ â”œâ”€â”€ Tower.java # é˜²å¾¡å¡”å®ä½“<br>â”‚ â”œâ”€â”€ Player.java # ç©å®¶å®ä½“<br>â”‚ â””â”€â”€ Point.java # åæ ‡ç‚¹<br>â”œâ”€â”€ engine&#x2F; # æ¸¸æˆå¼•æ“å±‚<br>â”‚ â”œâ”€â”€ GameEngine.java # æ¸¸æˆä¸»å¼•æ“<br>â”‚ â”œâ”€â”€ GameLoop.java # æ¸¸æˆå¾ªç¯<br>â”‚ â””â”€â”€ CollisionDetector.java # ç¢°æ’æ£€æµ‹<br>â”œâ”€â”€ service&#x2F; # åº”ç”¨æœåŠ¡å±‚<br>â”‚ â”œâ”€â”€ WaveService.java # æ•Œäººç”ŸæˆæœåŠ¡<br>â”‚ â”œâ”€â”€ EconomyService.java # ç»æµç³»ç»ŸæœåŠ¡<br>â”‚ â””â”€â”€ GameConfigService.java # é…ç½®æœåŠ¡<br>â”œâ”€â”€ ai&#x2F; # AIæ¨¡å—<br>â”‚ â”œâ”€â”€ PathFinder.java # è·¯å¾„å¯»æ‰¾<br>â”‚ â”œâ”€â”€ EnemyAI.java # æ•ŒäººAI<br>â”‚ â””â”€â”€ TowerAI.java # é˜²å¾¡å¡”AI<br>â””â”€â”€ Main.java # ç¨‹åºå…¥å£</p>
<p>text</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#### 1.2.2 game-ui (ç”¨æˆ·ç•Œé¢)</span><br><span class="line">- **web-ui/**: HTML5 + JavaScript å‰ç«¯ç•Œé¢</span><br><span class="line">- **desktop-ui/**: JavaFX æ¡Œé¢ç•Œé¢ï¼ˆå¯é€‰ï¼‰</span><br><span class="line"></span><br><span class="line">#### 1.2.3 tools (å·¥å…·é›†)</span><br><span class="line">- **map-editor/**: Python + Tkinter åœ°å›¾ç¼–è¾‘å™¨</span><br><span class="line">- **data-generator/**: Python æ•°æ®ç”Ÿæˆè„šæœ¬</span><br><span class="line">- **build-scripts/**: Shell æ„å»ºå’Œéƒ¨ç½²è„šæœ¬</span><br><span class="line"></span><br><span class="line">## 2. æ ¸å¿ƒè®¾è®¡æ¨¡å¼</span><br><span class="line"></span><br><span class="line">### 2.1 å·¥å‚æ¨¡å¼ - å®ä½“åˆ›å»º</span><br><span class="line">```java</span><br><span class="line">// TowerFactory.java</span><br><span class="line">public class TowerFactory &#123;</span><br><span class="line">    public static Tower createTower(String type, Point position) &#123;</span><br><span class="line">        switch (type) &#123;</span><br><span class="line">            case &quot;BASIC&quot;:</span><br><span class="line">                return new BasicTower(position);</span><br><span class="line">            case &quot;SNIPER&quot;:</span><br><span class="line">                return new SniperTower(position);</span><br><span class="line">            default:</span><br><span class="line">                throw new IllegalArgumentException(&quot;æœªçŸ¥å¡”ç±»å‹: &quot; + type);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="2-2-è§‚å¯Ÿè€…æ¨¡å¼-æ¸¸æˆäº‹ä»¶"><a href="#2-2-è§‚å¯Ÿè€…æ¨¡å¼-æ¸¸æˆäº‹ä»¶" class="headerlink" title="2.2 è§‚å¯Ÿè€…æ¨¡å¼ - æ¸¸æˆäº‹ä»¶"></a>2.2 è§‚å¯Ÿè€…æ¨¡å¼ - æ¸¸æˆäº‹ä»¶</h3><p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">// GameEvent.java</span><br><span class="line">public class GameEvent &#123;</span><br><span class="line">    public enum Type &#123;</span><br><span class="line">        ENEMY_SPAWNED,</span><br><span class="line">        TOWER_PLACED,</span><br><span class="line">        WAVE_STARTED,</span><br><span class="line">        GAME_OVER</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private final Type type;</span><br><span class="line">    private final Object data;</span><br><span class="line">    </span><br><span class="line">    // æ„é€ å™¨å’Œgetteræ–¹æ³•</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// GameObserver.java</span><br><span class="line">public interface GameObserver &#123;</span><br><span class="line">    void onGameEvent(GameEvent event);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// GameEngineä½œä¸ºè¢«è§‚å¯Ÿè€…</span><br><span class="line">public class GameEngine &#123;</span><br><span class="line">    private List&lt;GameObserver&gt; observers = new ArrayList&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    public void addObserver(GameObserver observer) &#123;</span><br><span class="line">        observers.add(observer);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void notifyObservers(GameEvent event) &#123;</span><br><span class="line">        observers.forEach(observer -&gt; observer.onGameEvent(event));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="2-3-ç­–ç•¥æ¨¡å¼-AIè¡Œä¸º"><a href="#2-3-ç­–ç•¥æ¨¡å¼-AIè¡Œä¸º" class="headerlink" title="2.3 ç­–ç•¥æ¨¡å¼ - AIè¡Œä¸º"></a>2.3 ç­–ç•¥æ¨¡å¼ - AIè¡Œä¸º</h3><p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// MovementStrategy.java</span><br><span class="line">public interface MovementStrategy &#123;</span><br><span class="line">    Point calculateNextMove(Enemy enemy, GameMap map);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// PathFollowingStrategy.java</span><br><span class="line">public class PathFollowingStrategy implements MovementStrategy &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public Point calculateNextMove(Enemy enemy, GameMap map) &#123;</span><br><span class="line">        // æ²¿è·¯å¾„ç§»åŠ¨çš„é€»è¾‘</span><br><span class="line">        return nextPoint;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Enemy.java</span><br><span class="line">public class Enemy &#123;</span><br><span class="line">    private MovementStrategy movementStrategy;</span><br><span class="line">    </span><br><span class="line">    public void setMovementStrategy(MovementStrategy strategy) &#123;</span><br><span class="line">        this.movementStrategy = strategy;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void move(GameMap map) &#123;</span><br><span class="line">        Point nextPoint = movementStrategy.calculateNextMove(this, map);</span><br><span class="line">        // æ‰§è¡Œç§»åŠ¨</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="3-æ•°æ®æµè®¾è®¡"><a href="#3-æ•°æ®æµè®¾è®¡" class="headerlink" title="3. æ•°æ®æµè®¾è®¡"></a>3. æ•°æ®æµè®¾è®¡</h2><h3 id="3-1-æ¸¸æˆä¸»å¾ªç¯"><a href="#3-1-æ¸¸æˆä¸»å¾ªç¯" class="headerlink" title="3.1 æ¸¸æˆä¸»å¾ªç¯"></a>3.1 æ¸¸æˆä¸»å¾ªç¯</h3><p>text</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">åˆå§‹åŒ–æ¸¸æˆçŠ¶æ€</span><br><span class="line">â””â”€â”€ å¼€å§‹æ¸¸æˆå¾ªç¯</span><br><span class="line">    â”œâ”€â”€ å¤„ç†ç”¨æˆ·è¾“å…¥</span><br><span class="line">    â”œâ”€â”€ æ›´æ–°æ¸¸æˆçŠ¶æ€</span><br><span class="line">    â”‚   â”œâ”€â”€ ç”Ÿæˆæ–°æ•Œäºº</span><br><span class="line">    â”‚   â”œâ”€â”€ ç§»åŠ¨æ•Œäºº</span><br><span class="line">    â”‚   â”œâ”€â”€ æ‰§è¡Œå¡”æ”»å‡»</span><br><span class="line">    â”‚   â”œâ”€â”€ å¤„ç†ç¢°æ’</span><br><span class="line">    â”‚   â””â”€â”€ æ›´æ–°åˆ†æ•°</span><br><span class="line">    â”œâ”€â”€ æ¸²æŸ“æ¸¸æˆç”»é¢</span><br><span class="line">    â””â”€â”€ æ£€æŸ¥æ¸¸æˆç»“æŸæ¡ä»¶</span><br></pre></td></tr></table></figure>



<h3 id="3-2-æ•°æ®æŒä¹…åŒ–"><a href="#3-2-æ•°æ®æŒä¹…åŒ–" class="headerlink" title="3.2 æ•°æ®æŒä¹…åŒ–"></a>3.2 æ•°æ®æŒä¹…åŒ–</h3><p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// GameSave.java</span><br><span class="line">public class GameSave &#123;</span><br><span class="line">    private PlayerState player;</span><br><span class="line">    private List&lt;TowerState&gt; towers;</span><br><span class="line">    private List&lt;EnemyState&gt; enemies;</span><br><span class="line">    private GameMapState map;</span><br><span class="line">    private int currentWave;</span><br><span class="line">    </span><br><span class="line">    // JSONåºåˆ—åŒ–/ååºåˆ—åŒ–</span><br><span class="line">    public String toJson() &#123; ... &#125;</span><br><span class="line">    public static GameSave fromJson(String json) &#123; ... &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="4-æ€§èƒ½è€ƒè™‘"><a href="#4-æ€§èƒ½è€ƒè™‘" class="headerlink" title="4. æ€§èƒ½è€ƒè™‘"></a>4. æ€§èƒ½è€ƒè™‘</h2><h3 id="4-1-å†…å­˜ç®¡ç†"><a href="#4-1-å†…å­˜ç®¡ç†" class="headerlink" title="4.1 å†…å­˜ç®¡ç†"></a>4.1 å†…å­˜ç®¡ç†</h3><ul>
<li>ä½¿ç”¨å¯¹è±¡æ± ç®¡ç†é¢‘ç¹åˆ›å»º&#x2F;é”€æ¯çš„å®ä½“ï¼ˆå¦‚å­å¼¹ã€ç‰¹æ•ˆï¼‰</li>
<li>å»¶è¿ŸåŠ è½½æ¸¸æˆèµ„æº</li>
<li>åŠæ—¶æ¸…ç†æ— ç”¨å¯¹è±¡å¼•ç”¨</li>
</ul>
<h3 id="4-2-æ¸²æŸ“ä¼˜åŒ–"><a href="#4-2-æ¸²æŸ“ä¼˜åŒ–" class="headerlink" title="4.2 æ¸²æŸ“ä¼˜åŒ–"></a>4.2 æ¸²æŸ“ä¼˜åŒ–</h3><ul>
<li>è„çŸ©å½¢æ¸²æŸ“ï¼ˆåªæ›´æ–°å˜åŒ–åŒºåŸŸï¼‰</li>
<li>ä½¿ç”¨ç©ºé—´åˆ’åˆ†ç®—æ³•ä¼˜åŒ–ç¢°æ’æ£€æµ‹</li>
<li>æ‰¹é‡ç»˜åˆ¶ç›¸åŒç±»å‹çš„å›¾å½¢å…ƒç´ </li>
</ul>
<h3 id="4-3-çº¿ç¨‹å®‰å…¨"><a href="#4-3-çº¿ç¨‹å®‰å…¨" class="headerlink" title="4.3 çº¿ç¨‹å®‰å…¨"></a>4.3 çº¿ç¨‹å®‰å…¨</h3><p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// GameEngineä¸­çš„çº¿ç¨‹å®‰å…¨è®¾è®¡</span><br><span class="line">public class GameEngine &#123;</span><br><span class="line">    private final Object lock = new Object();</span><br><span class="line">    private volatile boolean isRunning;</span><br><span class="line">    </span><br><span class="line">    public void updateGameState() &#123;</span><br><span class="line">        synchronized(lock) &#123;</span><br><span class="line">            // æ›´æ–°æ¸¸æˆçŠ¶æ€çš„ä¸´ç•ŒåŒº</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="5-æ‰©å±•æ€§è®¾è®¡"><a href="#5-æ‰©å±•æ€§è®¾è®¡" class="headerlink" title="5. æ‰©å±•æ€§è®¾è®¡"></a>5. æ‰©å±•æ€§è®¾è®¡</h2><h3 id="5-1-æ’ä»¶ç³»ç»Ÿ"><a href="#5-1-æ’ä»¶ç³»ç»Ÿ" class="headerlink" title="5.1 æ’ä»¶ç³»ç»Ÿ"></a>5.1 æ’ä»¶ç³»ç»Ÿ</h3><p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// GameModule.java</span><br><span class="line">public interface GameModule &#123;</span><br><span class="line">    void initialize(GameEngine engine);</span><br><span class="line">    void update(long deltaTime);</span><br><span class="line">    void shutdown();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ModuleManager.java</span><br><span class="line">public class ModuleManager &#123;</span><br><span class="line">    private List&lt;GameModule&gt; modules = new ArrayList&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    public void registerModule(GameModule module) &#123;</span><br><span class="line">        modules.add(module);</span><br><span class="line">        module.initialize(engine);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="5-2-é…ç½®é©±åŠ¨"><a href="#5-2-é…ç½®é©±åŠ¨" class="headerlink" title="5.2 é…ç½®é©±åŠ¨"></a>5.2 é…ç½®é©±åŠ¨</h3><ul>
<li>æ‰€æœ‰æ¸¸æˆå‚æ•°é€šè¿‡JSONé…ç½®æ–‡ä»¶ç®¡ç†</li>
<li>æ”¯æŒçƒ­é‡è½½é…ç½®</li>
<li>å¯é…ç½®çš„éš¾åº¦æ›²çº¿</li>
</ul>
<h2 id="6-éƒ¨ç½²æ¶æ„"><a href="#6-éƒ¨ç½²æ¶æ„" class="headerlink" title="6. éƒ¨ç½²æ¶æ„"></a>6. éƒ¨ç½²æ¶æ„</h2><h3 id="6-1-å•æœºéƒ¨ç½²"><a href="#6-1-å•æœºéƒ¨ç½²" class="headerlink" title="6.1 å•æœºéƒ¨ç½²"></a>6.1 å•æœºéƒ¨ç½²</h3><p>text</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ç”¨æˆ·æœºå™¨</span><br><span class="line">â”œâ”€â”€ JRE 11+</span><br><span class="line">â”œâ”€â”€ game-core.jar</span><br><span class="line">â”œâ”€â”€ é…ç½®æ–‡ä»¶</span><br><span class="line">â””â”€â”€ èµ„æºæ–‡ä»¶</span><br></pre></td></tr></table></figure>



<h3 id="6-2-Webéƒ¨ç½²"><a href="#6-2-Webéƒ¨ç½²" class="headerlink" title="6.2 Webéƒ¨ç½²"></a>6.2 Webéƒ¨ç½²</h3><p>text</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Nginx/Apache</span><br><span class="line">â”œâ”€â”€ é™æ€èµ„æº (HTML/CSS/JS)</span><br><span class="line">â””â”€â”€ åå‘ä»£ç†åˆ°Javaåç«¯</span><br><span class="line">    â””â”€â”€ Spring Bootåº”ç”¨</span><br><span class="line">        â”œâ”€â”€ æ¸¸æˆWebSocketæœåŠ¡</span><br><span class="line">        â””â”€â”€ REST API</span><br></pre></td></tr></table></figure>



<h2 id="7-ç›‘æ§å’Œæ—¥å¿—"><a href="#7-ç›‘æ§å’Œæ—¥å¿—" class="headerlink" title="7. ç›‘æ§å’Œæ—¥å¿—"></a>7. ç›‘æ§å’Œæ—¥å¿—</h2><h3 id="7-1-æ—¥å¿—ç³»ç»Ÿ"><a href="#7-1-æ—¥å¿—ç³»ç»Ÿ" class="headerlink" title="7.1 æ—¥å¿—ç³»ç»Ÿ"></a>7.1 æ—¥å¿—ç³»ç»Ÿ</h3><p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// ä½¿ç”¨SLF4J + Logback</span><br><span class="line">private static final Logger logger = LoggerFactory.getLogger(GameEngine.class);</span><br><span class="line"></span><br><span class="line">public void startGame() &#123;</span><br><span class="line">    logger.info(&quot;æ¸¸æˆå¼€å§‹ - ç©å®¶: &#123;&#125;, åœ°å›¾: &#123;&#125;&quot;, player.getName(), map.getName());</span><br><span class="line">    </span><br><span class="line">    try &#123;</span><br><span class="line">        // æ¸¸æˆé€»è¾‘</span><br><span class="line">    &#125; catch (GameException e) &#123;</span><br><span class="line">        logger.error(&quot;æ¸¸æˆå¼‚å¸¸: &#123;&#125;&quot;, e.getMessage(), e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="7-2-æ€§èƒ½ç›‘æ§"><a href="#7-2-æ€§èƒ½ç›‘æ§" class="headerlink" title="7.2 æ€§èƒ½ç›‘æ§"></a>7.2 æ€§èƒ½ç›‘æ§</h3><ul>
<li>å¸§ç‡ç›‘æ§</li>
<li>å†…å­˜ä½¿ç”¨ç›‘æ§</li>
<li>æ¸¸æˆäº‹ä»¶è¿½è¸ª</li>
</ul>
<hr>
<p><em>æœ¬æ¶æ„è®¾è®¡æ”¯æŒä»ç®€å•çš„å¡”é˜²æ¸¸æˆæ‰©å±•åˆ°å¤æ‚çš„ç­–ç•¥æ¸¸æˆï¼Œå…·æœ‰è‰¯å¥½çš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ã€‚</em></p>
<p>text</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">## ğŸ¯ æ€»ç»“</span><br><span class="line"></span><br><span class="line">ç°åœ¨ä½ å·²ç»æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„å¡”é˜²æ¸¸æˆé¡¹ç›®æ¡†æ¶ï¼æŒ‰ä»¥ä¸‹æ­¥éª¤ç»§ç»­ï¼š</span><br><span class="line"></span><br><span class="line">### **ä¸‹ä¸€æ­¥å»ºè®®ï¼š**</span><br><span class="line"></span><br><span class="line">1. **ç«‹å³å¼€å§‹**ï¼šå…ˆè¿è¡Œæœ€ç®€å•çš„å‘½ä»¤è¡Œç‰ˆæœ¬</span><br><span class="line">   ```bash</span><br><span class="line">   cd game-core</span><br><span class="line">   mvn compile</span><br><span class="line">   mvn exec:java -Dexec.mainClass=&quot;com.javagame.Main&quot;</span><br></pre></td></tr></table></figure>



<ol>
<li><strong>é€æ­¥æ‰©å±•</strong>ï¼š<ul>
<li>ç¬¬1å¤©ï¼šå®ç°Pointã€Enemyã€Towerç±»</li>
<li>ç¬¬2å¤©ï¼šå®ç°GameMapå’ŒGameEngine</li>
<li>ç¬¬3å¤©ï¼šæ·»åŠ å‘½ä»¤è¡Œäº¤äº’</li>
<li>ç¬¬4å¤©ï¼šå®ç°Pythonåœ°å›¾ç¼–è¾‘å™¨</li>
<li>ç¬¬5å¤©ï¼šåˆ›å»ºWebç•Œé¢</li>
</ul>
</li>
<li><strong>é¢è¯•å‡†å¤‡é‡ç‚¹</strong>ï¼š<ul>
<li>å±•ç¤ºæ¸…æ™°çš„ä»£ç ç»“æ„</li>
<li>è¯´æ˜è®¾è®¡æ¨¡å¼çš„åº”ç”¨</li>
<li>æ¼”ç¤ºå®Œæ•´çš„é¡¹ç›®æ–‡æ¡£</li>
<li>å±•ç¤ºå¤šè¯­è¨€åä½œèƒ½åŠ›</li>
</ul>
</li>
</ol>
<p>è¿™ä¸ªé¡¹ç›®ä¸ä»…èƒ½è®©ä½ ç»ƒä¹ ç¼–ç¨‹ï¼Œè¿˜èƒ½å±•ç¤ºä½ çš„ï¼š</p>
<ul>
<li>âœ… <strong>æ¶æ„è®¾è®¡èƒ½åŠ›</strong>ï¼šåˆ†å±‚æ¶æ„ã€æ¨¡å—åˆ’åˆ†</li>
<li>âœ… <strong>å¤šè¯­è¨€èƒ½åŠ›</strong>ï¼šJavaã€Pythonã€JavaScriptã€Shell</li>
<li>âœ… <strong>å·¥ç¨‹åŒ–èƒ½åŠ›</strong>ï¼šæ„å»ºè„šæœ¬ã€æµ‹è¯•ã€æ–‡æ¡£</li>
<li>âœ… <strong>é—®é¢˜è§£å†³èƒ½åŠ›</strong>ï¼šä»è®¾è®¡åˆ°å®ç°çš„å…¨è¿‡ç¨‹</li>
</ul>
<p><strong>è®°ä½</strong>ï¼šä¸è¦è¿½æ±‚å®Œç¾ï¼Œå…ˆå®Œæˆä¸€ä¸ªå¯è¿è¡Œçš„ç‰ˆæœ¬ï¼Œç„¶åé€æ­¥æ”¹è¿›ã€‚æ¯ä¸ªå‘¨æœ«å®Œæˆä¸€ä¸ªé‡Œç¨‹ç¢‘ï¼Œ6å‘¨åä½ å°±èƒ½æ‹¥æœ‰ä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®ä½œå“ï¼</p>
<p>ç»§ç»­æ‰©å±•å®Œå–„</p>
<p>æˆ‘ä»¬ç»§ç»­æ‰©å±•å’Œå®Œå–„è¿™ä¸ªé¡¹ç›®ã€‚æˆ‘ä»¬å°†ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢è¿›è¡Œï¼š</p>
<ol>
<li>å¢å¼ºæ¸¸æˆå¼•æ“ï¼Œæ·»åŠ æ›´å¤šæ¸¸æˆåŠŸèƒ½ï¼ˆå¦‚å¤šç§æ•Œäººå’Œé˜²å¾¡å¡”ã€å‡çº§ç³»ç»Ÿç­‰ï¼‰ã€‚</li>
<li>å®Œå–„å‘½ä»¤è¡Œç•Œé¢ï¼Œä½¿å…¶æ›´å‹å¥½ã€‚</li>
<li>æ·»åŠ æ›´å¤šçš„å·¥å…·è„šæœ¬ã€‚</li>
<li>ç¼–å†™æ›´è¯¦ç»†çš„æ–‡æ¡£ã€‚</li>
</ol>
<p>ç”±äºç¯‡å¹…é™åˆ¶ï¼Œæˆ‘å°†åˆ†æ­¥éª¤è¿›è¡Œï¼Œå¹¶å‡è®¾ä½ å·²ç»å®Œæˆäº†ä¸Šä¸€éƒ¨åˆ†çš„åŸºç¡€ä»£ç ã€‚</p>
<h2 id="ç¬¬7å‘¨ï¼šå¢å¼ºæ¸¸æˆå¼•æ“"><a href="#ç¬¬7å‘¨ï¼šå¢å¼ºæ¸¸æˆå¼•æ“" class="headerlink" title="ç¬¬7å‘¨ï¼šå¢å¼ºæ¸¸æˆå¼•æ“"></a>ç¬¬7å‘¨ï¼šå¢å¼ºæ¸¸æˆå¼•æ“</h2><h3 id="æ­¥éª¤15ï¼šå®Œå–„æ•Œäººå’Œé˜²å¾¡å¡”ç±»å‹"><a href="#æ­¥éª¤15ï¼šå®Œå–„æ•Œäººå’Œé˜²å¾¡å¡”ç±»å‹" class="headerlink" title="æ­¥éª¤15ï¼šå®Œå–„æ•Œäººå’Œé˜²å¾¡å¡”ç±»å‹"></a>æ­¥éª¤15ï¼šå®Œå–„æ•Œäººå’Œé˜²å¾¡å¡”ç±»å‹</h3><p>åœ¨<code>domain</code>åŒ…ä¸­ï¼Œæˆ‘ä»¬ä¹‹å‰å·²ç»æœ‰äº†<code>Enemy</code>å’Œ<code>Tower</code>ç±»ã€‚ç°åœ¨æˆ‘ä»¬å°†å®ƒä»¬è®¾è®¡ä¸ºå¯æ‰©å±•çš„ï¼Œä½¿ç”¨ç»§æ‰¿æˆ–æ¥å£æ¥æ”¯æŒå¤šç§ç±»å‹ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºæ•Œäººçš„ç±»å‹æšä¸¾å’Œé…ç½®ï¼š</p>
<p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">// EnemyType.java</span><br><span class="line">package com.javagame.domain;</span><br><span class="line"></span><br><span class="line">public enum EnemyType &#123;</span><br><span class="line">    NORMAL(&quot;æ™®é€šæ•Œäºº&quot;, 50, 2, 10, 1),</span><br><span class="line">    FAST(&quot;å¿«é€Ÿæ•Œäºº&quot;, 20, 4, 15, 0.5),</span><br><span class="line">    TANK(&quot;å¦å…‹æ•Œäºº&quot;, 200, 1, 30, 2),</span><br><span class="line">    BOSS(&quot;Bossæ•Œäºº&quot;, 500, 1, 100, 5);</span><br><span class="line"></span><br><span class="line">    private final String name;</span><br><span class="line">    private final int baseHealth;</span><br><span class="line">    private final int baseSpeed;</span><br><span class="line">    private final int baseReward;</span><br><span class="line">    private final double scale; // ç”¨äºå›¾åƒç¼©æ”¾</span><br><span class="line"></span><br><span class="line">    EnemyType(String name, int baseHealth, int baseSpeed, int baseReward, double scale) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.baseHealth = baseHealth;</span><br><span class="line">        this.baseSpeed = baseSpeed;</span><br><span class="line">        this.baseReward = baseReward;</span><br><span class="line">        this.scale = scale;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ ¹æ®æ³¢æ¬¡è®¡ç®—å®é™…å±æ€§</span><br><span class="line">    public int getHealth(int wave) &#123;</span><br><span class="line">        return baseHealth + wave * 10;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getSpeed(int wave) &#123;</span><br><span class="line">        return baseSpeed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getReward(int wave) &#123;</span><br><span class="line">        return baseReward + wave * 2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double getScale() &#123;</span><br><span class="line">        return scale;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>ç„¶åä¿®æ”¹<code>Enemy</code>ç±»ï¼Œä½¿ç”¨<code>EnemyType</code>ï¼š</p>
<p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">// Enemy.java (ä¿®æ”¹å)</span><br><span class="line">package com.javagame.domain;</span><br><span class="line"></span><br><span class="line">public class Enemy &#123;</span><br><span class="line">    private final String id;</span><br><span class="line">    private final EnemyType type;</span><br><span class="line">    private Point position;</span><br><span class="line">    private int health;</span><br><span class="line">    private final int maxHealth;</span><br><span class="line">    private final int speed;</span><br><span class="line">    private final int reward;</span><br><span class="line">    private int currentWaypointIndex;</span><br><span class="line"></span><br><span class="line">    public Enemy(String id, EnemyType type, Point startPosition, int wave) &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">        this.type = type;</span><br><span class="line">        this.position = startPosition;</span><br><span class="line">        this.maxHealth = type.getHealth(wave);</span><br><span class="line">        this.health = this.maxHealth;</span><br><span class="line">        this.speed = type.getSpeed(wave);</span><br><span class="line">        this.reward = type.getReward(wave);</span><br><span class="line">        this.currentWaypointIndex = 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // å…¶ä»–æ–¹æ³•ä¿æŒä¸å˜ï¼Œä½†ç§»åŠ¨é€»è¾‘å¯ä»¥æ”¹ä¸ºæ²¿è·¯å¾„ç‚¹ç§»åŠ¨</span><br><span class="line">    public void moveAlongPath(GameMap map) &#123;</span><br><span class="line">        if (currentWaypointIndex &gt;= map.getPath().size()) &#123;</span><br><span class="line">            // å·²ç»åˆ°è¾¾ç»ˆç‚¹</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        Point target = map.getPath().get(currentWaypointIndex);</span><br><span class="line">        move(target);</span><br><span class="line">        if (position.distanceTo(target) &lt; 1) &#123;</span><br><span class="line">            currentWaypointIndex++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // åŸæ¥çš„moveæ–¹æ³•æ”¹ä¸ºprivateï¼Œç”±moveAlongPathè°ƒç”¨</span><br><span class="line">    private void move(Point target) &#123;</span><br><span class="line">        // ... åŸæ¥çš„ç§»åŠ¨é€»è¾‘</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ... å…¶ä»–æ–¹æ³•</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºé˜²å¾¡å¡”åˆ›å»ºç±»å‹æšä¸¾ã€‚</p>
<h3 id="æ­¥éª¤16ï¼šæ·»åŠ å‡çº§ç³»ç»Ÿ"><a href="#æ­¥éª¤16ï¼šæ·»åŠ å‡çº§ç³»ç»Ÿ" class="headerlink" title="æ­¥éª¤16ï¼šæ·»åŠ å‡çº§ç³»ç»Ÿ"></a>æ­¥éª¤16ï¼šæ·»åŠ å‡çº§ç³»ç»Ÿ</h3><p>åœ¨<code>Tower</code>ç±»ä¸­æ·»åŠ å‡çº§ç›¸å…³çš„æ–¹æ³•ï¼š</p>
<p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">// Tower.java (å‡çº§éƒ¨åˆ†æ‰©å±•)</span><br><span class="line">public class Tower &#123;</span><br><span class="line">    // ... åŸæœ‰å±æ€§</span><br><span class="line"></span><br><span class="line">    private int upgradeCost; // å‡çº§è´¹ç”¨</span><br><span class="line"></span><br><span class="line">    public Tower(String id, TowerType type, Point position) &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">        this.type = type;</span><br><span class="line">        this.position = position;</span><br><span class="line">        this.level = 1;</span><br><span class="line">        this.upgradeCost = type.getBaseUpgradeCost();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public boolean upgrade(Player player) &#123;</span><br><span class="line">        if (player.getGold() &gt;= upgradeCost) &#123;</span><br><span class="line">            player.spendGold(upgradeCost);</span><br><span class="line">            level++;</span><br><span class="line">            // å‡çº§åï¼Œå‡çº§è´¹ç”¨å¢åŠ </span><br><span class="line">            upgradeCost = (int)(upgradeCost * 1.5);</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getUpgradeCost() &#123;</span><br><span class="line">        return upgradeCost;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ... å…¶ä»–æ–¹æ³•</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="æ­¥éª¤17ï¼šæ·»åŠ æ¸¸æˆçŠ¶æ€ä¿å­˜å’ŒåŠ è½½"><a href="#æ­¥éª¤17ï¼šæ·»åŠ æ¸¸æˆçŠ¶æ€ä¿å­˜å’ŒåŠ è½½" class="headerlink" title="æ­¥éª¤17ï¼šæ·»åŠ æ¸¸æˆçŠ¶æ€ä¿å­˜å’ŒåŠ è½½"></a>æ­¥éª¤17ï¼šæ·»åŠ æ¸¸æˆçŠ¶æ€ä¿å­˜å’ŒåŠ è½½</h3><p>åœ¨<code>service</code>åŒ…ä¸­åˆ›å»º<code>GameSaveService</code>ï¼š</p>
<p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">// GameSaveService.java</span><br><span class="line">package com.javagame.service;</span><br><span class="line"></span><br><span class="line">import com.javagame.domain.*;</span><br><span class="line">import com.javagame.engine.GameEngine;</span><br><span class="line">import com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">public class GameSaveService &#123;</span><br><span class="line">    private static final String SAVE_DIR = &quot;saves&quot;;</span><br><span class="line">    private final ObjectMapper objectMapper;</span><br><span class="line"></span><br><span class="line">    public GameSaveService() &#123;</span><br><span class="line">        objectMapper = new ObjectMapper();</span><br><span class="line">        // åˆ›å»ºä¿å­˜ç›®å½•</span><br><span class="line">        new File(SAVE_DIR).mkdirs();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void saveGame(GameEngine engine, String saveName) throws IOException &#123;</span><br><span class="line">        GameSaveState state = new GameSaveState(engine);</span><br><span class="line">        File saveFile = new File(SAVE_DIR, saveName + &quot;.json&quot;);</span><br><span class="line">        objectMapper.writeValue(saveFile, state);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public GameEngine loadGame(String saveName) throws IOException &#123;</span><br><span class="line">        File saveFile = new File(SAVE_DIR, saveName + &quot;.json&quot;);</span><br><span class="line">        GameSaveState state = objectMapper.readValue(saveFile, GameSaveState.class);</span><br><span class="line">        return state.toGameEngine();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // å†…éƒ¨ç±»ï¼Œç”¨äºåºåˆ—åŒ–æ¸¸æˆçŠ¶æ€</span><br><span class="line">    private static class GameSaveState &#123;</span><br><span class="line">        // ä¿å­˜æ¸¸æˆçŠ¶æ€æ‰€éœ€çš„æ‰€æœ‰å­—æ®µ</span><br><span class="line">        private Player player;</span><br><span class="line">        private GameMap map;</span><br><span class="line">        private int currentWave;</span><br><span class="line">        private List&lt;Tower&gt; towers;</span><br><span class="line">        private List&lt;Enemy&gt; enemies;</span><br><span class="line">        private long gameTime;</span><br><span class="line"></span><br><span class="line">        // æ„é€ å™¨ã€getterå’Œsetter</span><br><span class="line"></span><br><span class="line">        public GameSaveState(GameEngine engine) &#123;</span><br><span class="line">            // ä»engineä¸­æå–çŠ¶æ€</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public GameEngine toGameEngine() &#123;</span><br><span class="line">            // æ ¹æ®çŠ¶æ€é‡æ–°æ„å»ºGameEngine</span><br><span class="line">            return null; // å®é™…å®ç°</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="ç¬¬8å‘¨ï¼šå®Œå–„å‘½ä»¤è¡Œç•Œé¢"><a href="#ç¬¬8å‘¨ï¼šå®Œå–„å‘½ä»¤è¡Œç•Œé¢" class="headerlink" title="ç¬¬8å‘¨ï¼šå®Œå–„å‘½ä»¤è¡Œç•Œé¢"></a>ç¬¬8å‘¨ï¼šå®Œå–„å‘½ä»¤è¡Œç•Œé¢</h2><h3 id="æ­¥éª¤18ï¼šåˆ›å»ºæ›´ä¸°å¯Œçš„å‘½ä»¤è¡Œç•Œé¢"><a href="#æ­¥éª¤18ï¼šåˆ›å»ºæ›´ä¸°å¯Œçš„å‘½ä»¤è¡Œç•Œé¢" class="headerlink" title="æ­¥éª¤18ï¼šåˆ›å»ºæ›´ä¸°å¯Œçš„å‘½ä»¤è¡Œç•Œé¢"></a>æ­¥éª¤18ï¼šåˆ›å»ºæ›´ä¸°å¯Œçš„å‘½ä»¤è¡Œç•Œé¢</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»ä¼¼Spring Shellçš„åº“ï¼Œä½†ä¸ºäº†ç®€å•ï¼Œæˆ‘ä»¬æ‰©å±•ä¹‹å‰çš„<code>Main</code>ç±»ï¼Œæ·»åŠ æ›´å¤šå‘½ä»¤ã€‚</p>
<p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">// Main.java (æ‰©å±•)</span><br><span class="line">public class Main &#123;</span><br><span class="line">    // ... åŸæœ‰ä»£ç </span><br><span class="line"></span><br><span class="line">    private static void processCommand(String command) &#123;</span><br><span class="line">        String[] parts = command.split(&quot; &quot;);</span><br><span class="line">        String cmd = parts[0].toLowerCase();</span><br><span class="line"></span><br><span class="line">        switch (cmd) &#123;</span><br><span class="line">            case &quot;start&quot;:</span><br><span class="line">                // ... åŸæœ‰é€»è¾‘</span><br><span class="line">                break;</span><br><span class="line">            case &quot;tower&quot;:</span><br><span class="line">                // ... åŸæœ‰é€»è¾‘</span><br><span class="line">                break;</span><br><span class="line">            case &quot;upgrade&quot;:</span><br><span class="line">                if (parts.length &lt; 2) &#123;</span><br><span class="line">                    System.out.println(&quot;ç”¨æ³•: upgrade &lt;tower-id&gt;&quot;);</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">                String towerId = parts[1];</span><br><span class="line">                upgradeTower(towerId);</span><br><span class="line">                break;</span><br><span class="line">            case &quot;save&quot;:</span><br><span class="line">                if (parts.length &lt; 2) &#123;</span><br><span class="line">                    System.out.println(&quot;ç”¨æ³•: save &lt;å­˜æ¡£å&gt;&quot;);</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">                saveGame(parts[1]);</span><br><span class="line">                break;</span><br><span class="line">            case &quot;load&quot;:</span><br><span class="line">                if (parts.length &lt; 2) &#123;</span><br><span class="line">                    System.out.println(&quot;ç”¨æ³•: load &lt;å­˜æ¡£å&gt;&quot;);</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">                loadGame(parts[1]);</span><br><span class="line">                break;</span><br><span class="line">            // ... å…¶ä»–å‘½ä»¤</span><br><span class="line">            default:</span><br><span class="line">                System.out.println(&quot;æœªçŸ¥å‘½ä»¤ï¼Œè¾“å…¥ &#x27;help&#x27; æŸ¥çœ‹å¸®åŠ©&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static void upgradeTower(String towerId) &#123;</span><br><span class="line">        // æŸ¥æ‰¾é˜²å¾¡å¡”å¹¶å‡çº§</span><br><span class="line">        var towers = gameEngine.getTowers();</span><br><span class="line">        for (var tower : towers) &#123;</span><br><span class="line">            if (tower.getId().equals(towerId)) &#123;</span><br><span class="line">                var player = gameEngine.getPlayer();</span><br><span class="line">                if (tower.upgrade(player)) &#123;</span><br><span class="line">                    System.out.println(&quot;é˜²å¾¡å¡”å‡çº§æˆåŠŸï¼å½“å‰ç­‰çº§ï¼š&quot; + tower.getLevel());</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    System.out.println(&quot;é‡‘å¸ä¸è¶³ï¼&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;æœªæ‰¾åˆ°é˜²å¾¡å¡”ï¼š&quot; + towerId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static void saveGame(String saveName) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            // å‡è®¾æˆ‘ä»¬å·²ç»å°†GameSaveServiceæ³¨å…¥åˆ°Mainä¸­</span><br><span class="line">            gameSaveService.saveGame(gameEngine, saveName);</span><br><span class="line">            System.out.println(&quot;æ¸¸æˆå·²ä¿å­˜ï¼š&quot; + saveName);</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            System.out.println(&quot;ä¿å­˜å¤±è´¥ï¼š&quot; + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static void loadGame(String saveName) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            gameEngine = gameSaveService.loadGame(saveName);</span><br><span class="line">            System.out.println(&quot;æ¸¸æˆå·²åŠ è½½ï¼š&quot; + saveName);</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            System.out.println(&quot;åŠ è½½å¤±è´¥ï¼š&quot; + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="ç¬¬9å‘¨ï¼šæ·»åŠ æ›´å¤šå·¥å…·è„šæœ¬"><a href="#ç¬¬9å‘¨ï¼šæ·»åŠ æ›´å¤šå·¥å…·è„šæœ¬" class="headerlink" title="ç¬¬9å‘¨ï¼šæ·»åŠ æ›´å¤šå·¥å…·è„šæœ¬"></a>ç¬¬9å‘¨ï¼šæ·»åŠ æ›´å¤šå·¥å…·è„šæœ¬</h2><h3 id="æ­¥éª¤19ï¼šåˆ›å»ºæ€§èƒ½æµ‹è¯•è„šæœ¬ï¼ˆPythonï¼‰"><a href="#æ­¥éª¤19ï¼šåˆ›å»ºæ€§èƒ½æµ‹è¯•è„šæœ¬ï¼ˆPythonï¼‰" class="headerlink" title="æ­¥éª¤19ï¼šåˆ›å»ºæ€§èƒ½æµ‹è¯•è„šæœ¬ï¼ˆPythonï¼‰"></a>æ­¥éª¤19ï¼šåˆ›å»ºæ€§èƒ½æµ‹è¯•è„šæœ¬ï¼ˆPythonï¼‰</h3><p>python</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"># tools/performance/performance_test.py</span><br><span class="line">import subprocess</span><br><span class="line">import time</span><br><span class="line">import json</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line"></span><br><span class="line">def run_game_with_params(map_size, enemy_count, tower_count):</span><br><span class="line">    &quot;&quot;&quot;ä½¿ç”¨ç»™å®šçš„å‚æ•°è¿è¡Œæ¸¸æˆï¼Œå¹¶è¿”å›è¿è¡Œæ—¶é—´å’Œå†…å­˜ä½¿ç”¨æƒ…å†µ&quot;&quot;&quot;</span><br><span class="line">    # è¿™é‡Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨Javaç¨‹åºå¹¶ä¼ é€’å‚æ•°æ¥æµ‹è¯•</span><br><span class="line">    # å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå¯é…ç½®çš„Javaç¨‹åº</span><br><span class="line">    cmd = [</span><br><span class="line">        &#x27;java&#x27;, &#x27;-jar&#x27;, &#x27;tower-defense.jar&#x27;,</span><br><span class="line">        &#x27;--map-size&#x27;, str(map_size),</span><br><span class="line">        &#x27;--enemies&#x27;, str(enemy_count),</span><br><span class="line">        &#x27;--towers&#x27;, str(tower_count),</span><br><span class="line">        &#x27;--headless&#x27;  # æ— ç•Œé¢æ¨¡å¼</span><br><span class="line">    ]</span><br><span class="line">    </span><br><span class="line">    start_time = time.time()</span><br><span class="line">    result = subprocess.run(cmd, capture_output=True, text=True)</span><br><span class="line">    end_time = time.time()</span><br><span class="line">    </span><br><span class="line">    if result.returncode != 0:</span><br><span class="line">        print(f&quot;è¿è¡Œå¤±è´¥: &#123;result.stderr&#125;&quot;)</span><br><span class="line">        return None</span><br><span class="line">    </span><br><span class="line">    # ä»è¾“å‡ºä¸­æå–æ€§èƒ½æ•°æ®ï¼ˆå‡è®¾æˆ‘ä»¬è¾“å‡ºJSONæ ¼å¼çš„æ€§èƒ½æ•°æ®ï¼‰</span><br><span class="line">    for line in result.stdout.split(&#x27;\n&#x27;):</span><br><span class="line">        if line.startswith(&#x27;PERF:&#x27;):</span><br><span class="line">            perf_data = json.loads(line[5:])</span><br><span class="line">            perf_data[&#x27;total_time&#x27;] = end_time - start_time</span><br><span class="line">            return perf_data</span><br><span class="line">    </span><br><span class="line">    return None</span><br><span class="line"></span><br><span class="line">def run_performance_tests():</span><br><span class="line">    scenarios = [</span><br><span class="line">        &#123;&#x27;map_size&#x27;: 10, &#x27;enemies&#x27;: 10, &#x27;towers&#x27;: 5&#125;,</span><br><span class="line">        &#123;&#x27;map_size&#x27;: 20, &#x27;enemies&#x27;: 20, &#x27;towers&#x27;: 10&#125;,</span><br><span class="line">        &#123;&#x27;map_size&#x27;: 30, &#x27;enemies&#x27;: 30, &#x27;towers&#x27;: 15&#125;,</span><br><span class="line">        # æ›´å¤šåœºæ™¯...</span><br><span class="line">    ]</span><br><span class="line">    </span><br><span class="line">    results = []</span><br><span class="line">    for scenario in scenarios:</span><br><span class="line">        print(f&quot;æµ‹è¯•åœºæ™¯: &#123;scenario&#125;&quot;)</span><br><span class="line">        result = run_game_with_params(**scenario)</span><br><span class="line">        if result:</span><br><span class="line">            results.append((scenario, result))</span><br><span class="line">            print(f&quot;  ç»“æœ: &#123;result&#125;&quot;)</span><br><span class="line">        else:</span><br><span class="line">            print(&quot;  æµ‹è¯•å¤±è´¥&quot;)</span><br><span class="line">    </span><br><span class="line">    return results</span><br><span class="line"></span><br><span class="line">def plot_results(results):</span><br><span class="line">    &quot;&quot;&quot;ç»˜åˆ¶æ€§èƒ½æµ‹è¯•ç»“æœ&quot;&quot;&quot;</span><br><span class="line">    map_sizes = [r[0][&#x27;map_size&#x27;] for r in results]</span><br><span class="line">    times = [r[1][&#x27;total_time&#x27;] for r in results]</span><br><span class="line">    </span><br><span class="line">    plt.figure(figsize=(10, 6))</span><br><span class="line">    plt.plot(map_sizes, times, marker=&#x27;o&#x27;)</span><br><span class="line">    plt.title(&#x27;æ¸¸æˆæ€§èƒ½æµ‹è¯•&#x27;)</span><br><span class="line">    plt.xlabel(&#x27;åœ°å›¾å¤§å°&#x27;)</span><br><span class="line">    plt.ylabel(&#x27;è¿è¡Œæ—¶é—´ (ç§’)&#x27;)</span><br><span class="line">    plt.grid(True)</span><br><span class="line">    plt.savefig(&#x27;performance.png&#x27;)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    results = run_performance_tests()</span><br><span class="line">    if results:</span><br><span class="line">        plot_results(results)</span><br></pre></td></tr></table></figure>



<h3 id="æ­¥éª¤20ï¼šåˆ›å»ºè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ï¼ˆShellï¼‰"><a href="#æ­¥éª¤20ï¼šåˆ›å»ºè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ï¼ˆShellï¼‰" class="headerlink" title="æ­¥éª¤20ï¼šåˆ›å»ºè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ï¼ˆShellï¼‰"></a>æ­¥éª¤20ï¼šåˆ›å»ºè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ï¼ˆShellï¼‰</h3><p>bash</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># tools/test-scripts/run_all_tests.sh</span><br><span class="line"></span><br><span class="line">echo &quot;å¼€å§‹è¿è¡Œæ‰€æœ‰æµ‹è¯•...&quot;</span><br><span class="line"></span><br><span class="line"># 1. è¿è¡Œå•å…ƒæµ‹è¯•</span><br><span class="line">echo &quot;è¿è¡Œå•å…ƒæµ‹è¯•...&quot;</span><br><span class="line">cd game-core</span><br><span class="line">mvn test</span><br><span class="line">if [ $? -ne 0 ]; then</span><br><span class="line">    echo &quot;å•å…ƒæµ‹è¯•å¤±è´¥&quot;</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># 2. è¿è¡Œé›†æˆæµ‹è¯•</span><br><span class="line">echo &quot;è¿è¡Œé›†æˆæµ‹è¯•...&quot;</span><br><span class="line">cd ../tools/integration-tests</span><br><span class="line">python integration_test.py</span><br><span class="line">if [ $? -ne 0 ]; then</span><br><span class="line">    echo &quot;é›†æˆæµ‹è¯•å¤±è´¥&quot;</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># 3. è¿è¡Œæ€§èƒ½æµ‹è¯•</span><br><span class="line">echo &quot;è¿è¡Œæ€§èƒ½æµ‹è¯•...&quot;</span><br><span class="line">cd ../performance</span><br><span class="line">python performance_test.py</span><br><span class="line">if [ $? -ne 0 ]; then</span><br><span class="line">    echo &quot;æ€§èƒ½æµ‹è¯•å¤±è´¥&quot;</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">echo &quot;æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼&quot;</span><br></pre></td></tr></table></figure>



<h2 id="ç¬¬10å‘¨ï¼šå®Œå–„æ–‡æ¡£å’Œéƒ¨ç½²"><a href="#ç¬¬10å‘¨ï¼šå®Œå–„æ–‡æ¡£å’Œéƒ¨ç½²" class="headerlink" title="ç¬¬10å‘¨ï¼šå®Œå–„æ–‡æ¡£å’Œéƒ¨ç½²"></a>ç¬¬10å‘¨ï¼šå®Œå–„æ–‡æ¡£å’Œéƒ¨ç½²</h2><h3 id="æ­¥éª¤21ï¼šåˆ›å»ºç”¨æˆ·æ‰‹å†Œå’ŒAPIæ–‡æ¡£"><a href="#æ­¥éª¤21ï¼šåˆ›å»ºç”¨æˆ·æ‰‹å†Œå’ŒAPIæ–‡æ¡£" class="headerlink" title="æ­¥éª¤21ï¼šåˆ›å»ºç”¨æˆ·æ‰‹å†Œå’ŒAPIæ–‡æ¡£"></a>æ­¥éª¤21ï¼šåˆ›å»ºç”¨æˆ·æ‰‹å†Œå’ŒAPIæ–‡æ¡£</h3><p><strong>ç”¨æˆ·æ‰‹å†Œ</strong> (<code>docs/user_manual.md</code>):</p>
<p>markdown</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"># ç”¨æˆ·æ‰‹å†Œ</span><br><span class="line"></span><br><span class="line">## 1. æ¸¸æˆä»‹ç»</span><br><span class="line"></span><br><span class="line">Java Defender æ˜¯ä¸€æ¬¾å¡”é˜²ç­–ç•¥æ¸¸æˆï¼Œç©å®¶é€šè¿‡æ”¾ç½®é˜²å¾¡å¡”æ¥é˜»æ­¢æ•Œäººåˆ°è¾¾ç»ˆç‚¹ã€‚</span><br><span class="line"></span><br><span class="line">## 2. å®‰è£…æŒ‡å—</span><br><span class="line"></span><br><span class="line">### 2.1 ç³»ç»Ÿè¦æ±‚</span><br><span class="line">- Windows/Linux/Mac OS</span><br><span class="line">- Java 11 æˆ–æ›´é«˜ç‰ˆæœ¬</span><br><span class="line">- è‡³å°‘ 2GB å†…å­˜</span><br><span class="line">- 500MB ç¡¬ç›˜ç©ºé—´</span><br><span class="line"></span><br><span class="line">### 2.2 å®‰è£…æ­¥éª¤</span><br><span class="line">1. ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ `tower-defense.jar`</span><br><span class="line">2. åœ¨ç»ˆç«¯ä¸­è¿è¡Œ: `java -jar tower-defense.jar`</span><br><span class="line"></span><br><span class="line">## 3. æ¸¸æˆæ“ä½œ</span><br><span class="line"></span><br><span class="line">### 3.1 å‘½ä»¤è¡Œæ“ä½œ</span><br><span class="line">- `start`: å¼€å§‹æ¸¸æˆ</span><br><span class="line">- `tower &lt;ç±»å‹&gt; &lt;x&gt; &lt;y&gt;`: æ”¾ç½®é˜²å¾¡å¡”</span><br><span class="line">- `upgrade &lt;tower-id&gt;`: å‡çº§é˜²å¾¡å¡”</span><br><span class="line">- `status`: æŸ¥çœ‹æ¸¸æˆçŠ¶æ€</span><br><span class="line">- `save &lt;å­˜æ¡£å&gt;`: ä¿å­˜æ¸¸æˆ</span><br><span class="line">- `load &lt;å­˜æ¡£å&gt;`: åŠ è½½æ¸¸æˆ</span><br><span class="line">- `exit`: é€€å‡ºæ¸¸æˆ</span><br><span class="line"></span><br><span class="line">### 3.2 Webç•Œé¢æ“ä½œ</span><br><span class="line">1. æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:8080`</span><br><span class="line">2. ä½¿ç”¨é¼ æ ‡ç‚¹å‡»æ”¾ç½®é˜²å¾¡å¡”</span><br><span class="line">3. ç‚¹å‡»å‡çº§æŒ‰é’®å‡çº§é˜²å¾¡å¡”</span><br><span class="line"></span><br><span class="line">## 4. æ¸¸æˆç­–ç•¥</span><br><span class="line">- åœ¨æ•Œäººè·¯å¾„çš„æ‹è§’å¤„æ”¾ç½®é˜²å¾¡å¡”æ•ˆæœæ›´ä½³</span><br><span class="line">- æ··åˆä½¿ç”¨ä¸åŒç±»å‹çš„é˜²å¾¡å¡”</span><br><span class="line">- åŠæ—¶å‡çº§é˜²å¾¡å¡”</span><br><span class="line">- åˆç†ç®¡ç†é‡‘å¸ï¼Œä¸è¦è¿‡åº¦å»ºé€ </span><br><span class="line"></span><br><span class="line">## 5. å¸¸è§é—®é¢˜</span><br><span class="line"></span><br><span class="line">### 5.1 æ¸¸æˆè¿è¡Œç¼“æ…¢</span><br><span class="line">å°è¯•é™ä½æ¸¸æˆç”»é¢è´¨é‡æˆ–å…³é—­èƒŒæ™¯éŸ³ä¹ã€‚</span><br><span class="line"></span><br><span class="line">### 5.2 æ— æ³•ä¿å­˜æ¸¸æˆ</span><br><span class="line">æ£€æŸ¥æ˜¯å¦æœ‰å†™å…¥æƒé™ï¼Œæˆ–ç£ç›˜ç©ºé—´æ˜¯å¦ä¸è¶³ã€‚</span><br><span class="line"></span><br><span class="line">## 6. è”ç³»æˆ‘ä»¬</span><br><span class="line"></span><br><span class="line">å¦‚æœ‰é—®é¢˜ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š</span><br><span class="line">- é‚®ç®±: support@javagame.com</span><br><span class="line">- è®ºå›: https://forum.javagame.com</span><br></pre></td></tr></table></figure>



<p><strong>APIæ–‡æ¡£</strong> (<code>docs/api.md</code>):</p>
<p>markdown</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"># API æ–‡æ¡£</span><br><span class="line"></span><br><span class="line">## 1. æ¦‚è¿°</span><br><span class="line"></span><br><span class="line">æœ¬æ–‡æ¡£æè¿°äº† Java Defender æ¸¸æˆå¼•æ“çš„ APIï¼Œä¾›äºŒæ¬¡å¼€å‘ä½¿ç”¨ã€‚</span><br><span class="line"></span><br><span class="line">## 2. æ ¸å¿ƒç±»</span><br><span class="line"></span><br><span class="line">### 2.1 GameEngine</span><br><span class="line">æ¸¸æˆå¼•æ“ä¸»ç±»ï¼Œæ§åˆ¶æ¸¸æˆæµç¨‹ã€‚</span><br><span class="line"></span><br><span class="line">**ä¸»è¦æ–¹æ³•:**</span><br><span class="line">- `startGame()`: å¼€å§‹æ¸¸æˆ</span><br><span class="line">- `stopGame()`: åœæ­¢æ¸¸æˆ</span><br><span class="line">- `placeTower(type, position)`: æ”¾ç½®é˜²å¾¡å¡”</span><br><span class="line">- `upgradeTower(towerId)`: å‡çº§é˜²å¾¡å¡”</span><br><span class="line"></span><br><span class="line">### 2.2 GameMap</span><br><span class="line">æ¸¸æˆåœ°å›¾ç±»ï¼Œç®¡ç†åœ°å›¾å’Œè·¯å¾„ã€‚</span><br><span class="line"></span><br><span class="line">**ä¸»è¦æ–¹æ³•:**</span><br><span class="line">- `getPath()`: è·å–æ•Œäººè·¯å¾„</span><br><span class="line">- `canPlaceTower(position)`: æ£€æŸ¥ä½ç½®æ˜¯å¦å¯ä»¥æ”¾ç½®é˜²å¾¡å¡”</span><br><span class="line"></span><br><span class="line">### 2.3 Player</span><br><span class="line">ç©å®¶ç±»ï¼Œç®¡ç†ç©å®¶çŠ¶æ€ã€‚</span><br><span class="line"></span><br><span class="line">**ä¸»è¦å±æ€§:**</span><br><span class="line">- `gold`: é‡‘å¸æ•°é‡</span><br><span class="line">- `health`: ç”Ÿå‘½å€¼</span><br><span class="line">- `score`: åˆ†æ•°</span><br><span class="line"></span><br><span class="line">## 3. æ‰©å±•æ¥å£</span><br><span class="line"></span><br><span class="line">### 3.1 GameModule</span><br><span class="line">æ¸¸æˆæ¨¡å—æ¥å£ï¼Œç”¨äºæ‰©å±•æ¸¸æˆåŠŸèƒ½ã€‚</span><br><span class="line"></span><br><span class="line">**æ–¹æ³•:**</span><br><span class="line">- `initialize(GameEngine engine)`: åˆå§‹åŒ–æ¨¡å—</span><br><span class="line">- `update(long deltaTime)`: æ›´æ–°æ¨¡å—çŠ¶æ€</span><br><span class="line">- `shutdown()`: å…³é—­æ¨¡å—</span><br><span class="line"></span><br><span class="line">### 3.2 GameObserver</span><br><span class="line">æ¸¸æˆè§‚å¯Ÿè€…æ¥å£ï¼Œç”¨äºç›‘å¬æ¸¸æˆäº‹ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">**æ–¹æ³•:**</span><br><span class="line">- `onGameEvent(GameEvent event)`: å¤„ç†æ¸¸æˆäº‹ä»¶</span><br><span class="line"></span><br><span class="line">## 4. äº‹ä»¶ç³»ç»Ÿ</span><br><span class="line"></span><br><span class="line">æ¸¸æˆäº‹ä»¶ç±»å‹:</span><br><span class="line">- `ENEMY_SPAWNED`: æ•Œäººç”Ÿæˆ</span><br><span class="line">- `TOWER_PLACED`: é˜²å¾¡å¡”æ”¾ç½®</span><br><span class="line">- `WAVE_STARTED`: æ³¢æ¬¡å¼€å§‹</span><br><span class="line">- `GAME_OVER`: æ¸¸æˆç»“æŸ</span><br><span class="line"></span><br><span class="line">## 5. é…ç½®ç³»ç»Ÿ</span><br><span class="line"></span><br><span class="line">æ¸¸æˆé€šè¿‡ JSON æ–‡ä»¶é…ç½®ï¼Œä¸»è¦é…ç½®æ–‡ä»¶:</span><br><span class="line">- `config/game.json`: æ¸¸æˆåŸºæœ¬é…ç½®</span><br><span class="line">- `config/towers.json`: é˜²å¾¡å¡”é…ç½®</span><br><span class="line">- `config/enemies.json`: æ•Œäººé…ç½®</span><br></pre></td></tr></table></figure>



<h3 id="æ­¥éª¤22ï¼šåˆ›å»ºæŒç»­é›†æˆé…ç½®ï¼ˆGitHub-Actionsï¼‰"><a href="#æ­¥éª¤22ï¼šåˆ›å»ºæŒç»­é›†æˆé…ç½®ï¼ˆGitHub-Actionsï¼‰" class="headerlink" title="æ­¥éª¤22ï¼šåˆ›å»ºæŒç»­é›†æˆé…ç½®ï¼ˆGitHub Actionsï¼‰"></a>æ­¥éª¤22ï¼šåˆ›å»ºæŒç»­é›†æˆé…ç½®ï¼ˆGitHub Actionsï¼‰</h3><p>yaml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># .github/workflows/ci.yml</span><br><span class="line">name: Java CI</span><br><span class="line"></span><br><span class="line">on:</span><br><span class="line">  push:</span><br><span class="line">    branches: [ main ]</span><br><span class="line">  pull_request:</span><br><span class="line">    branches: [ main ]</span><br><span class="line"></span><br><span class="line">jobs:</span><br><span class="line">  build:</span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line"></span><br><span class="line">    steps:</span><br><span class="line">    - uses: actions/checkout@v2</span><br><span class="line">    </span><br><span class="line">    - name: Set up JDK 11</span><br><span class="line">      uses: actions/setup-java@v2</span><br><span class="line">      with:</span><br><span class="line">        java-version: &#x27;11&#x27;</span><br><span class="line">        distribution: &#x27;adopt&#x27;</span><br><span class="line">    </span><br><span class="line">    - name: Build with Maven</span><br><span class="line">      run: mvn -B package --file game-core/pom.xml</span><br><span class="line">      </span><br><span class="line">    - name: Run Unit Tests</span><br><span class="line">      run: mvn test --file game-core/pom.xml</span><br><span class="line">      </span><br><span class="line">    - name: Run Integration Tests</span><br><span class="line">      run: |</span><br><span class="line">        cd tools/test-scripts</span><br><span class="line">        ./run_all_tests.sh</span><br></pre></td></tr></table></figure>



<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬å·²ç»å°†ä¸€ä¸ªç®€å•çš„å¡”é˜²æ¸¸æˆæ‰©å±•ä¸ºä¸€ä¸ªåŠŸèƒ½ç›¸å¯¹å®Œå–„ã€æ–‡æ¡£é½å…¨ã€å…·å¤‡æµ‹è¯•å’ŒæŒç»­é›†æˆçš„é¡¹ç›®ã€‚è¿™ä¸ªé¡¹ç›®ä¸ä»…å±•ç¤ºäº†ä½ çš„ç¼–ç¨‹èƒ½åŠ›ï¼Œè¿˜å±•ç¤ºäº†ä½ åœ¨è½¯ä»¶å·¥ç¨‹ã€é¡¹ç›®æ¶æ„å’Œæ–‡æ¡£ç¼–å†™æ–¹é¢çš„èƒ½åŠ›ã€‚</p>
<p>åœ¨é¢è¯•ä¸­ï¼Œä½ å¯ä»¥å±•ç¤ºè¿™ä¸ªé¡¹ç›®çš„ä»¥ä¸‹äº®ç‚¹ï¼š</p>
<ol>
<li><strong>å®Œæ•´çš„é¡¹ç›®ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šä»è®¾è®¡åˆ°å®ç°ï¼Œå†åˆ°æµ‹è¯•å’Œéƒ¨ç½²ã€‚</li>
<li><strong>å¤šè¯­è¨€åä½œ</strong>ï¼šJavaã€Pythonã€Shellã€JavaScriptã€‚</li>
<li><strong>è‰¯å¥½çš„æ¶æ„</strong>ï¼šåˆ†å±‚è®¾è®¡ã€æ¨¡å—åŒ–ã€è®¾è®¡æ¨¡å¼ã€‚</li>
<li><strong>å·¥ç¨‹åŒ–å®è·µ</strong>ï¼šå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€æ€§èƒ½æµ‹è¯•ã€æŒç»­é›†æˆã€‚</li>
<li><strong>å®Œæ•´çš„æ–‡æ¡£</strong>ï¼šç”¨æˆ·æ‰‹å†Œã€APIæ–‡æ¡£ã€æ¶æ„è®¾è®¡æ–‡æ¡£ã€‚</li>
</ol>
<p>ç»§ç»­åŠªåŠ›ï¼Œä¸æ–­å®Œå–„è¿™ä¸ªé¡¹ç›®ï¼Œå®ƒå°†æˆä¸ºä½ ç®€å†ä¸Šçš„ä¸€ä¸ªäº®ç‚¹ï¼</p>
<h1 id="ğŸš€-æ·±å…¥æ‰©å±•ä¸å®Œå–„ç­–ç•¥æ¸¸æˆé¡¹ç›®"><a href="#ğŸš€-æ·±å…¥æ‰©å±•ä¸å®Œå–„ç­–ç•¥æ¸¸æˆé¡¹ç›®" class="headerlink" title="ğŸš€ æ·±å…¥æ‰©å±•ä¸å®Œå–„ç­–ç•¥æ¸¸æˆé¡¹ç›®"></a>ğŸš€ æ·±å…¥æ‰©å±•ä¸å®Œå–„ç­–ç•¥æ¸¸æˆé¡¹ç›®</h1><p>åŸºäºå·²æœ‰çš„åŸºç¡€æ¶æ„ï¼Œæˆ‘ä»¬å°†è¿›è¡Œæ·±åº¦æ‰©å±•ï¼Œå®ç°æ›´ä¸“ä¸šçš„æ¸¸æˆåŠŸèƒ½å’Œä¼ä¸šçº§å¼€å‘å®è·µã€‚</p>
<h2 id="ğŸ“ˆ-é˜¶æ®µäºŒï¼šä¸“ä¸šçº§æ‰©å±•ï¼ˆç¬¬7-12å‘¨ï¼‰"><a href="#ğŸ“ˆ-é˜¶æ®µäºŒï¼šä¸“ä¸šçº§æ‰©å±•ï¼ˆç¬¬7-12å‘¨ï¼‰" class="headerlink" title="ğŸ“ˆ é˜¶æ®µäºŒï¼šä¸“ä¸šçº§æ‰©å±•ï¼ˆç¬¬7-12å‘¨ï¼‰"></a>ğŸ“ˆ é˜¶æ®µäºŒï¼šä¸“ä¸šçº§æ‰©å±•ï¼ˆç¬¬7-12å‘¨ï¼‰</h2><h3 id="ç¬¬7å‘¨ï¼šå®ç°æ›´å¤æ‚çš„æ¸¸æˆæœºåˆ¶"><a href="#ç¬¬7å‘¨ï¼šå®ç°æ›´å¤æ‚çš„æ¸¸æˆæœºåˆ¶" class="headerlink" title="ç¬¬7å‘¨ï¼šå®ç°æ›´å¤æ‚çš„æ¸¸æˆæœºåˆ¶"></a><strong>ç¬¬7å‘¨ï¼šå®ç°æ›´å¤æ‚çš„æ¸¸æˆæœºåˆ¶</strong></h3><h4 id="æ­¥éª¤15ï¼šå®Œå–„é¢†åŸŸæ¨¡å‹å’Œæ¸¸æˆæœºåˆ¶"><a href="#æ­¥éª¤15ï¼šå®Œå–„é¢†åŸŸæ¨¡å‹å’Œæ¸¸æˆæœºåˆ¶" class="headerlink" title="æ­¥éª¤15ï¼šå®Œå–„é¢†åŸŸæ¨¡å‹å’Œæ¸¸æˆæœºåˆ¶"></a><strong>æ­¥éª¤15ï¼šå®Œå–„é¢†åŸŸæ¨¡å‹å’Œæ¸¸æˆæœºåˆ¶</strong></h4><p><strong>1. æ·»åŠ æŠ€èƒ½ç³»ç»Ÿ</strong></p>
<p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">// Skill.java - æŠ€èƒ½åŸºç±»</span><br><span class="line">package com.javagame.domain;</span><br><span class="line"></span><br><span class="line">public abstract class Skill &#123;</span><br><span class="line">    protected final String id;</span><br><span class="line">    protected final String name;</span><br><span class="line">    protected final String description;</span><br><span class="line">    protected int cooldown;</span><br><span class="line">    protected int currentCooldown;</span><br><span class="line">    </span><br><span class="line">    public Skill(String id, String name, String description, int cooldown) &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.description = description;</span><br><span class="line">        this.cooldown = cooldown;</span><br><span class="line">        this.currentCooldown = 0;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public abstract void execute(GameEngine engine);</span><br><span class="line">    </span><br><span class="line">    public void update() &#123;</span><br><span class="line">        if (currentCooldown &gt; 0) &#123;</span><br><span class="line">            currentCooldown--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public boolean isReady() &#123;</span><br><span class="line">        return currentCooldown == 0;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void resetCooldown() &#123;</span><br><span class="line">        currentCooldown = cooldown;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å…·ä½“æŠ€èƒ½å®ç°</span><br><span class="line">package com.javagame.domain.skills;</span><br><span class="line"></span><br><span class="line">public class LightningStrikeSkill extends Skill &#123;</span><br><span class="line">    private final int damage;</span><br><span class="line">    private final int radius;</span><br><span class="line">    </span><br><span class="line">    public LightningStrikeSkill() &#123;</span><br><span class="line">        super(&quot;lightning&quot;, &quot;é›·ç”µæ‰“å‡»&quot;, &quot;å¯¹èŒƒå›´å†…æ‰€æœ‰æ•Œäººé€ æˆä¼¤å®³&quot;, 30000); // 30ç§’å†·å´</span><br><span class="line">        this.damage = 50;</span><br><span class="line">        this.radius = 3;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public void execute(GameEngine engine) &#123;</span><br><span class="line">        if (!isReady()) return;</span><br><span class="line">        </span><br><span class="line">        Point target = engine.getCursorPosition();</span><br><span class="line">        List&lt;Enemy&gt; enemies = engine.getEnemies();</span><br><span class="line">        </span><br><span class="line">        for (Enemy enemy : enemies) &#123;</span><br><span class="line">            if (target.distanceTo(enemy.getPosition()) &lt;= radius) &#123;</span><br><span class="line">                enemy.takeDamage(damage);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        resetCooldown();</span><br><span class="line">        engine.addEffect(new LightningEffect(target, radius));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>2. æ·»åŠ ç§‘æŠ€æ ‘ç³»ç»Ÿ</strong></p>
<p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">// TechnologyNode.java</span><br><span class="line">package com.javagame.domain.tech;</span><br><span class="line"></span><br><span class="line">public class TechnologyNode &#123;</span><br><span class="line">    private final String id;</span><br><span class="line">    private final String name;</span><br><span class="line">    private final String description;</span><br><span class="line">    private final int cost;</span><br><span class="line">    private final List&lt;String&gt; prerequisites;</span><br><span class="line">    private final List&lt;TechEffect&gt; effects;</span><br><span class="line">    private boolean researched;</span><br><span class="line">    </span><br><span class="line">    public TechnologyNode(String id, String name, String description, int cost) &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.description = description;</span><br><span class="line">        this.cost = cost;</span><br><span class="line">        this.prerequisites = new ArrayList&lt;&gt;();</span><br><span class="line">        this.effects = new ArrayList&lt;&gt;();</span><br><span class="line">        this.researched = false;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public boolean canResearch(Player player, Set&lt;String&gt; researchedTechs) &#123;</span><br><span class="line">        if (researched) return false;</span><br><span class="line">        if (player.getSciencePoints() &lt; cost) return false;</span><br><span class="line">        </span><br><span class="line">        for (String prereq : prerequisites) &#123;</span><br><span class="line">            if (!researchedTechs.contains(prereq)) &#123;</span><br><span class="line">                return false;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public boolean research(Player player) &#123;</span><br><span class="line">        if (!canResearch(player, player.getResearchedTechnologies())) &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        player.spendSciencePoints(cost);</span><br><span class="line">        researched = true;</span><br><span class="line">        </span><br><span class="line">        for (TechEffect effect : effects) &#123;</span><br><span class="line">            effect.apply(player);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// TechnologyTree.java</span><br><span class="line">package com.javagame.domain.tech;</span><br><span class="line"></span><br><span class="line">public class TechnologyTree &#123;</span><br><span class="line">    private final Map&lt;String, TechnologyNode&gt; nodes = new HashMap&lt;&gt;();</span><br><span class="line">    private final Map&lt;String, List&lt;String&gt;&gt; connections = new HashMap&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    public void addNode(TechnologyNode node) &#123;</span><br><span class="line">        nodes.put(node.getId(), node);</span><br><span class="line">        connections.put(node.getId(), new ArrayList&lt;&gt;());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void addConnection(String fromId, String toId) &#123;</span><br><span class="line">        TechnologyNode from = nodes.get(fromId);</span><br><span class="line">        TechnologyNode to = nodes.get(toId);</span><br><span class="line">        </span><br><span class="line">        if (from != null &amp;&amp; to != null) &#123;</span><br><span class="line">            to.addPrerequisite(fromId);</span><br><span class="line">            connections.get(fromId).add(toId);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public List&lt;TechnologyNode&gt; getAvailableNodes(Player player) &#123;</span><br><span class="line">        List&lt;TechnologyNode&gt; available = new ArrayList&lt;&gt;();</span><br><span class="line">        Set&lt;String&gt; researched = player.getResearchedTechnologies();</span><br><span class="line">        </span><br><span class="line">        for (TechnologyNode node : nodes.values()) &#123;</span><br><span class="line">            if (!node.isResearched() &amp;&amp; node.canResearch(player, researched)) &#123;</span><br><span class="line">                available.add(node);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        return available;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>3. å®Œå–„ç»æµç³»ç»Ÿ</strong></p>
<p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">// EconomyService.java</span><br><span class="line">package com.javagame.service;</span><br><span class="line"></span><br><span class="line">import com.javagame.domain.*;</span><br><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">public class EconomyService &#123;</span><br><span class="line">    private final Map&lt;String, Integer&gt; resourcePrices = new HashMap&lt;&gt;();</span><br><span class="line">    private final List&lt;TradeOffer&gt; tradeOffers = new ArrayList&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    public EconomyService() &#123;</span><br><span class="line">        initializePrices();</span><br><span class="line">        generateTradeOffers();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void initializePrices() &#123;</span><br><span class="line">        resourcePrices.put(&quot;GOLD&quot;, 1);</span><br><span class="line">        resourcePrices.put(&quot;WOOD&quot;, 5);</span><br><span class="line">        resourcePrices.put(&quot;STONE&quot;, 10);</span><br><span class="line">        resourcePrices.put(&quot;IRON&quot;, 20);</span><br><span class="line">        resourcePrices.put(&quot;FOOD&quot;, 2);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void updatePrices(List&lt;Player&gt; players) &#123;</span><br><span class="line">        // æ¨¡æ‹Ÿå¸‚åœºç»æµï¼šæ ¹æ®ç©å®¶èµ„æºæŒæœ‰é‡è°ƒæ•´ä»·æ ¼</span><br><span class="line">        int totalGold = 0;</span><br><span class="line">        int totalWood = 0;</span><br><span class="line">        </span><br><span class="line">        for (Player player : players) &#123;</span><br><span class="line">            totalGold += player.getGold();</span><br><span class="line">            // å‡è®¾ç©å®¶æœ‰è·å–æœ¨æçš„æ–¹æ³•</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // ç®€åŒ–ä»·æ ¼è°ƒæ•´ç®—æ³•</span><br><span class="line">        double woodPriceMultiplier = 1.0 + (totalWood / 1000.0);</span><br><span class="line">        resourcePrices.put(&quot;WOOD&quot;, (int)(5 * woodPriceMultiplier));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public boolean buyResource(Player player, String resource, int amount) &#123;</span><br><span class="line">        int price = getPrice(resource) * amount;</span><br><span class="line">        </span><br><span class="line">        if (player.getGold() &gt;= price) &#123;</span><br><span class="line">            player.spendGold(price);</span><br><span class="line">            // player.addResource(resource, amount); // å‡è®¾Playeræœ‰addResourceæ–¹æ³•</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public int getPrice(String resource) &#123;</span><br><span class="line">        return resourcePrices.getOrDefault(resource, 0);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void generateTradeOffers() &#123;</span><br><span class="line">        Random random = new Random();</span><br><span class="line">        </span><br><span class="line">        // ç”Ÿæˆéšæœºè´¸æ˜“æŠ¥ä»·</span><br><span class="line">        for (int i = 0; i &lt; 5; i++) &#123;</span><br><span class="line">            String[] resources = &#123;&quot;WOOD&quot;, &quot;STONE&quot;, &quot;IRON&quot;, &quot;FOOD&quot;&#125;;</span><br><span class="line">            String sellResource = resources[random.nextInt(resources.length)];</span><br><span class="line">            String buyResource = &quot;GOLD&quot;;</span><br><span class="line">            </span><br><span class="line">            int amount = random.nextInt(10) + 1;</span><br><span class="line">            int price = getPrice(sellResource) * amount;</span><br><span class="line">            </span><br><span class="line">            tradeOffers.add(new TradeOffer(</span><br><span class="line">                &quot;TRADE_&quot; + i,</span><br><span class="line">                sellResource,</span><br><span class="line">                buyResource,</span><br><span class="line">                amount,</span><br><span class="line">                price</span><br><span class="line">            ));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public static class TradeOffer &#123;</span><br><span class="line">        private final String id;</span><br><span class="line">        private final String sellResource;</span><br><span class="line">        private final String buyResource;</span><br><span class="line">        private final int amount;</span><br><span class="line">        private final int price;</span><br><span class="line">        </span><br><span class="line">        public TradeOffer(String id, String sellResource, String buyResource, </span><br><span class="line">                         int amount, int price) &#123;</span><br><span class="line">            this.id = id;</span><br><span class="line">            this.sellResource = sellResource;</span><br><span class="line">            this.buyResource = buyResource;</span><br><span class="line">            this.amount = amount;</span><br><span class="line">            this.price = price;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // Getters...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="ç¬¬8å‘¨ï¼šå®ç°é«˜çº§AIç³»ç»Ÿ"><a href="#ç¬¬8å‘¨ï¼šå®ç°é«˜çº§AIç³»ç»Ÿ" class="headerlink" title="ç¬¬8å‘¨ï¼šå®ç°é«˜çº§AIç³»ç»Ÿ"></a><strong>ç¬¬8å‘¨ï¼šå®ç°é«˜çº§AIç³»ç»Ÿ</strong></h3><h4 id="æ­¥éª¤16ï¼šåŸºäºè¡Œä¸ºæ ‘çš„AIç³»ç»Ÿ"><a href="#æ­¥éª¤16ï¼šåŸºäºè¡Œä¸ºæ ‘çš„AIç³»ç»Ÿ" class="headerlink" title="æ­¥éª¤16ï¼šåŸºäºè¡Œä¸ºæ ‘çš„AIç³»ç»Ÿ"></a><strong>æ­¥éª¤16ï¼šåŸºäºè¡Œä¸ºæ ‘çš„AIç³»ç»Ÿ</strong></h4><p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br></pre></td><td class="code"><pre><span class="line">// BehaviorTree.java - è¡Œä¸ºæ ‘æ¡†æ¶</span><br><span class="line">package com.javagame.ai;</span><br><span class="line"></span><br><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">public abstract class BehaviorNode &#123;</span><br><span class="line">    public enum Status &#123;</span><br><span class="line">        RUNNING,</span><br><span class="line">        SUCCESS,</span><br><span class="line">        FAILURE</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    protected Status status = Status.RUNNING;</span><br><span class="line">    </span><br><span class="line">    public abstract Status execute(AIContext context);</span><br><span class="line">    </span><br><span class="line">    public void reset() &#123;</span><br><span class="line">        status = Status.RUNNING;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ç»„åˆèŠ‚ç‚¹</span><br><span class="line">package com.javagame.ai;</span><br><span class="line"></span><br><span class="line">public class SequenceNode extends BehaviorNode &#123;</span><br><span class="line">    private final List&lt;BehaviorNode&gt; children = new ArrayList&lt;&gt;();</span><br><span class="line">    private int currentIndex = 0;</span><br><span class="line">    </span><br><span class="line">    public void addChild(BehaviorNode node) &#123;</span><br><span class="line">        children.add(node);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public Status execute(AIContext context) &#123;</span><br><span class="line">        for (int i = currentIndex; i &lt; children.size(); i++) &#123;</span><br><span class="line">            BehaviorNode child = children.get(i);</span><br><span class="line">            Status childStatus = child.execute(context);</span><br><span class="line">            </span><br><span class="line">            if (childStatus == Status.RUNNING) &#123;</span><br><span class="line">                currentIndex = i;</span><br><span class="line">                return Status.RUNNING;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            if (childStatus == Status.FAILURE) &#123;</span><br><span class="line">                reset();</span><br><span class="line">                return Status.FAILURE;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            // æˆåŠŸåˆ™ç»§ç»­ä¸‹ä¸€ä¸ª</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        reset();</span><br><span class="line">        return Status.SUCCESS;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public void reset() &#123;</span><br><span class="line">        super.reset();</span><br><span class="line">        currentIndex = 0;</span><br><span class="line">        children.forEach(BehaviorNode::reset);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ¡ä»¶èŠ‚ç‚¹</span><br><span class="line">package com.javagame.ai;</span><br><span class="line"></span><br><span class="line">public class ConditionNode extends BehaviorNode &#123;</span><br><span class="line">    private final Condition condition;</span><br><span class="line">    </span><br><span class="line">    public ConditionNode(Condition condition) &#123;</span><br><span class="line">        this.condition = condition;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public Status execute(AIContext context) &#123;</span><br><span class="line">        return condition.test(context) ? Status.SUCCESS : Status.FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @FunctionalInterface</span><br><span class="line">    public interface Condition &#123;</span><br><span class="line">        boolean test(AIContext context);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// åŠ¨ä½œèŠ‚ç‚¹</span><br><span class="line">package com.javagame.ai;</span><br><span class="line"></span><br><span class="line">public class ActionNode extends BehaviorNode &#123;</span><br><span class="line">    private final Action action;</span><br><span class="line">    </span><br><span class="line">    public ActionNode(Action action) &#123;</span><br><span class="line">        this.action = action;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public Status execute(AIContext context) &#123;</span><br><span class="line">        return action.execute(context);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @FunctionalInterface</span><br><span class="line">    public interface Action &#123;</span><br><span class="line">        Status execute(AIContext context);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// AIä¸Šä¸‹æ–‡</span><br><span class="line">package com.javagame.ai;</span><br><span class="line"></span><br><span class="line">import com.javagame.domain.*;</span><br><span class="line">import com.javagame.engine.GameEngine;</span><br><span class="line"></span><br><span class="line">public class AIContext &#123;</span><br><span class="line">    private final GameEngine engine;</span><br><span class="line">    private final Enemy enemy; // æˆ–Tower, æˆ–Player</span><br><span class="line">    private final Map&lt;String, Object&gt; blackboard = new HashMap&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    public AIContext(GameEngine engine, Enemy enemy) &#123;</span><br><span class="line">        this.engine = engine;</span><br><span class="line">        this.enemy = enemy;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public GameEngine getEngine() &#123;</span><br><span class="line">        return engine;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public Enemy getEnemy() &#123;</span><br><span class="line">        return enemy;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void setBlackboard(String key, Object value) &#123;</span><br><span class="line">        blackboard.put(key, value);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public Object getBlackboard(String key) &#123;</span><br><span class="line">        return blackboard.get(key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ•ŒäººAIç¤ºä¾‹</span><br><span class="line">package com.javagame.ai;</span><br><span class="line"></span><br><span class="line">public class EnemyAI &#123;</span><br><span class="line">    private final BehaviorNode behaviorTree;</span><br><span class="line">    </span><br><span class="line">    public EnemyAI() &#123;</span><br><span class="line">        // æ„å»ºè¡Œä¸ºæ ‘</span><br><span class="line">        SequenceNode root = new SequenceNode();</span><br><span class="line">        </span><br><span class="line">        // æ¡ä»¶ï¼šæ˜¯å¦æ´»ç€</span><br><span class="line">        ConditionNode isAlive = new ConditionNode(context -&gt; </span><br><span class="line">            context.getEnemy().isAlive());</span><br><span class="line">        </span><br><span class="line">        // æ¡ä»¶ï¼šæ˜¯å¦æœ‰è·¯å¾„</span><br><span class="line">        ConditionNode hasPath = new ConditionNode(context -&gt; </span><br><span class="line">            context.getEngine().getGameMap().getPath().size() &gt; 0);</span><br><span class="line">        </span><br><span class="line">        // åŠ¨ä½œï¼šæ²¿è·¯å¾„ç§»åŠ¨</span><br><span class="line">        ActionNode moveAlongPath = new ActionNode(context -&gt; &#123;</span><br><span class="line">            Enemy enemy = context.getEnemy();</span><br><span class="line">            GameMap map = context.getEngine().getGameMap();</span><br><span class="line">            </span><br><span class="line">            // è·å–è·¯å¾„ä¸Šçš„ä¸‹ä¸€ä¸ªç‚¹</span><br><span class="line">            List&lt;Point&gt; path = map.getPath();</span><br><span class="line">            int currentIndex = (int) context.getBlackboard(&quot;pathIndex&quot;);</span><br><span class="line">            </span><br><span class="line">            if (currentIndex &lt; path.size()) &#123;</span><br><span class="line">                Point target = path.get(currentIndex);</span><br><span class="line">                enemy.move(target);</span><br><span class="line">                </span><br><span class="line">                if (enemy.getPosition().distanceTo(target) &lt; 1) &#123;</span><br><span class="line">                    currentIndex++;</span><br><span class="line">                    context.setBlackboard(&quot;pathIndex&quot;, currentIndex);</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                if (currentIndex &gt;= path.size()) &#123;</span><br><span class="line">                    return Status.SUCCESS;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                return Status.RUNNING;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            return Status.FAILURE;</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        // åŠ¨ä½œï¼šæ”»å‡»æœ€è¿‘çš„é˜²å¾¡å¡”</span><br><span class="line">        ActionNode attackTower = new ActionNode(context -&gt; &#123;</span><br><span class="line">            Enemy enemy = context.getEnemy();</span><br><span class="line">            List&lt;Tower&gt; towers = context.getEngine().getTowers();</span><br><span class="line">            </span><br><span class="line">            Tower nearestTower = null;</span><br><span class="line">            double minDistance = Double.MAX_VALUE;</span><br><span class="line">            </span><br><span class="line">            for (Tower tower : towers) &#123;</span><br><span class="line">                double distance = enemy.getPosition().distanceTo(tower.getPosition());</span><br><span class="line">                if (distance &lt; minDistance &amp;&amp; distance &lt; enemy.getAttackRange()) &#123;</span><br><span class="line">                    minDistance = distance;</span><br><span class="line">                    nearestTower = tower;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            if (nearestTower != null) &#123;</span><br><span class="line">                // æ”»å‡»é€»è¾‘</span><br><span class="line">                return Status.SUCCESS;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            return Status.FAILURE;</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        // æ„å»ºæ ‘ç»“æ„</span><br><span class="line">        root.addChild(isAlive);</span><br><span class="line">        root.addChild(hasPath);</span><br><span class="line">        </span><br><span class="line">        SelectorNode decision = new SelectorNode();</span><br><span class="line">        decision.addChild(attackTower);</span><br><span class="line">        decision.addChild(moveAlongPath);</span><br><span class="line">        </span><br><span class="line">        root.addChild(decision);</span><br><span class="line">        </span><br><span class="line">        this.behaviorTree = root;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void update(AIContext context) &#123;</span><br><span class="line">        behaviorTree.execute(context);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="æ­¥éª¤17ï¼šå®ç°ç¥ç»ç½‘ç»œAIï¼ˆå¯é€‰ï¼Œå±•ç¤ºé«˜çº§èƒ½åŠ›ï¼‰"><a href="#æ­¥éª¤17ï¼šå®ç°ç¥ç»ç½‘ç»œAIï¼ˆå¯é€‰ï¼Œå±•ç¤ºé«˜çº§èƒ½åŠ›ï¼‰" class="headerlink" title="æ­¥éª¤17ï¼šå®ç°ç¥ç»ç½‘ç»œAIï¼ˆå¯é€‰ï¼Œå±•ç¤ºé«˜çº§èƒ½åŠ›ï¼‰"></a><strong>æ­¥éª¤17ï¼šå®ç°ç¥ç»ç½‘ç»œAIï¼ˆå¯é€‰ï¼Œå±•ç¤ºé«˜çº§èƒ½åŠ›ï¼‰</strong></h4><p>python</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br></pre></td><td class="code"><pre><span class="line"># tools/ai-trainer/neural_ai.py</span><br><span class="line">import numpy as np</span><br><span class="line">import json</span><br><span class="line">from typing import List, Tuple</span><br><span class="line">from dataclasses import dataclass</span><br><span class="line">from enum import Enum</span><br><span class="line"></span><br><span class="line">class ActionType(Enum):</span><br><span class="line">    BUILD_TOWER = 0</span><br><span class="line">    UPGRADE_TOWER = 1</span><br><span class="line">    USE_SKILL = 2</span><br><span class="line">    SAVE_MONEY = 3</span><br><span class="line"></span><br><span class="line">@dataclass</span><br><span class="line">class GameState:</span><br><span class="line">    wave_number: int</span><br><span class="line">    player_gold: int</span><br><span class="line">    player_health: int</span><br><span class="line">    enemies_count: int</span><br><span class="line">    towers_count: int</span><br><span class="line">    time_in_wave: float</span><br><span class="line"></span><br><span class="line">class NeuralAI:</span><br><span class="line">    def __init__(self, input_size: int = 6, hidden_size: int = 16, output_size: int = 4):</span><br><span class="line">        # ç®€å•ç¥ç»ç½‘ç»œæƒé‡åˆå§‹åŒ–</span><br><span class="line">        self.weights1 = np.random.randn(input_size, hidden_size) * 0.1</span><br><span class="line">        self.bias1 = np.zeros(hidden_size)</span><br><span class="line">        self.weights2 = np.random.randn(hidden_size, output_size) * 0.1</span><br><span class="line">        self.bias2 = np.zeros(output_size)</span><br><span class="line">        </span><br><span class="line">        self.learning_rate = 0.01</span><br><span class="line">        self.memory = []</span><br><span class="line">        self.max_memory = 1000</span><br><span class="line">        </span><br><span class="line">    def forward(self, state: GameState) -&gt; np.ndarray:</span><br><span class="line">        &quot;&quot;&quot;å‰å‘ä¼ æ’­ï¼Œè·å–åŠ¨ä½œæ¦‚ç‡&quot;&quot;&quot;</span><br><span class="line">        # å°†çŠ¶æ€è½¬æ¢ä¸ºå‘é‡</span><br><span class="line">        input_vec = np.array([</span><br><span class="line">            state.wave_number / 20,  # å½’ä¸€åŒ–</span><br><span class="line">            state.player_gold / 1000,</span><br><span class="line">            state.player_health / 100,</span><br><span class="line">            state.enemies_count / 20,</span><br><span class="line">            state.towers_count / 10,</span><br><span class="line">            state.time_in_wave / 60</span><br><span class="line">        ])</span><br><span class="line">        </span><br><span class="line">        # å‰å‘ä¼ æ’­</span><br><span class="line">        hidden = np.tanh(np.dot(input_vec, self.weights1) + self.bias1)</span><br><span class="line">        output = np.dot(hidden, self.weights2) + self.bias2</span><br><span class="line">        </span><br><span class="line">        # Softmaxæ¿€æ´»å‡½æ•°</span><br><span class="line">        exp_output = np.exp(output - np.max(output))</span><br><span class="line">        probabilities = exp_output / exp_output.sum()</span><br><span class="line">        </span><br><span class="line">        return probabilities</span><br><span class="line">    </span><br><span class="line">    def choose_action(self, state: GameState) -&gt; ActionType:</span><br><span class="line">        &quot;&quot;&quot;æ ¹æ®å½“å‰çŠ¶æ€é€‰æ‹©åŠ¨ä½œ&quot;&quot;&quot;</span><br><span class="line">        probabilities = self.forward(state)</span><br><span class="line">        action_idx = np.random.choice(len(probabilities), p=probabilities)</span><br><span class="line">        return ActionType(action_idx)</span><br><span class="line">    </span><br><span class="line">    def remember(self, state: GameState, action: ActionType, reward: float, next_state: GameState, done: bool):</span><br><span class="line">        &quot;&quot;&quot;å­˜å‚¨ç»éªŒ&quot;&quot;&quot;</span><br><span class="line">        self.memory.append((state, action, reward, next_state, done))</span><br><span class="line">        </span><br><span class="line">        if len(self.memory) &gt; self.max_memory:</span><br><span class="line">            self.memory.pop(0)</span><br><span class="line">    </span><br><span class="line">    def train(self, batch_size: int = 32):</span><br><span class="line">        &quot;&quot;&quot;è®­ç»ƒç¥ç»ç½‘ç»œ&quot;&quot;&quot;</span><br><span class="line">        if len(self.memory) &lt; batch_size:</span><br><span class="line">            return</span><br><span class="line">        </span><br><span class="line">        # éšæœºé‡‡æ ·</span><br><span class="line">        indices = np.random.choice(len(self.memory), batch_size, replace=False)</span><br><span class="line">        batch = [self.memory[i] for i in indices]</span><br><span class="line">        </span><br><span class="line">        # è¿™é‡Œç®€åŒ–äº†è®­ç»ƒè¿‡ç¨‹ï¼Œå®é™…åº”è¯¥å®ç°Q-learningæˆ–ç­–ç•¥æ¢¯åº¦</span><br><span class="line">        for state, action, reward, next_state, done in batch:</span><br><span class="line">            # è®¡ç®—ç›®æ ‡å€¼</span><br><span class="line">            target = reward</span><br><span class="line">            if not done:</span><br><span class="line">                next_probs = self.forward(next_state)</span><br><span class="line">                target += 0.95 * np.max(next_probs)  # æŠ˜æ‰£å› å­</span><br><span class="line">            </span><br><span class="line">            # è®¡ç®—å½“å‰é¢„æµ‹</span><br><span class="line">            current_probs = self.forward(state)</span><br><span class="line">            </span><br><span class="line">            # æ›´æ–°æƒé‡ï¼ˆç®€åŒ–ç‰ˆï¼‰</span><br><span class="line">            # å®é™…å®ç°éœ€è¦åå‘ä¼ æ’­</span><br><span class="line">            self.update_weights(state, action, target, current_probs)</span><br><span class="line">    </span><br><span class="line">    def update_weights(self, state, action, target, current_probs):</span><br><span class="line">        &quot;&quot;&quot;æƒé‡æ›´æ–°ï¼ˆç®€åŒ–å®ç°ï¼‰&quot;&quot;&quot;</span><br><span class="line">        # å°†çŠ¶æ€è½¬æ¢ä¸ºå‘é‡</span><br><span class="line">        input_vec = np.array([</span><br><span class="line">            state.wave_number / 20,</span><br><span class="line">            state.player_gold / 1000,</span><br><span class="line">            state.player_health / 100,</span><br><span class="line">            state.enemies_count / 20,</span><br><span class="line">            state.towers_count / 10,</span><br><span class="line">            state.time_in_wave / 60</span><br><span class="line">        ])</span><br><span class="line">        </span><br><span class="line">        # è®¡ç®—æ¢¯åº¦ï¼ˆç®€åŒ–ï¼‰</span><br><span class="line">        action_idx = action.value</span><br><span class="line">        error = target - current_probs[action_idx]</span><br><span class="line">        </span><br><span class="line">        # æ›´æ–°è¾“å‡ºå±‚æƒé‡</span><br><span class="line">        hidden = np.tanh(np.dot(input_vec, self.weights1) + self.bias1)</span><br><span class="line">        self.weights2 += self.learning_rate * error * hidden.reshape(-1, 1)</span><br><span class="line">        self.bias2 += self.learning_rate * error</span><br><span class="line">        </span><br><span class="line">        # æ›´æ–°éšè—å±‚æƒé‡</span><br><span class="line">        hidden_error = np.dot(self.weights2[:, action_idx], error)</span><br><span class="line">        hidden_grad = hidden_error * (1 - hidden**2)  # tanhçš„å¯¼æ•°</span><br><span class="line">        </span><br><span class="line">        self.weights1 += self.learning_rate * np.outer(input_vec, hidden_grad)</span><br><span class="line">        self.bias1 += self.learning_rate * hidden_grad</span><br><span class="line">    </span><br><span class="line">    def save_model(self, filename: str):</span><br><span class="line">        &quot;&quot;&quot;ä¿å­˜æ¨¡å‹&quot;&quot;&quot;</span><br><span class="line">        model_data = &#123;</span><br><span class="line">            &#x27;weights1&#x27;: self.weights1.tolist(),</span><br><span class="line">            &#x27;bias1&#x27;: self.bias1.tolist(),</span><br><span class="line">            &#x27;weights2&#x27;: self.weights2.tolist(),</span><br><span class="line">            &#x27;bias2&#x27;: self.bias2.tolist()</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        with open(filename, &#x27;w&#x27;) as f:</span><br><span class="line">            json.dump(model_data, f)</span><br><span class="line">    </span><br><span class="line">    def load_model(self, filename: str):</span><br><span class="line">        &quot;&quot;&quot;åŠ è½½æ¨¡å‹&quot;&quot;&quot;</span><br><span class="line">        with open(filename, &#x27;r&#x27;) as f:</span><br><span class="line">            model_data = json.load(f)</span><br><span class="line">        </span><br><span class="line">        self.weights1 = np.array(model_data[&#x27;weights1&#x27;])</span><br><span class="line">        self.bias1 = np.array(model_data[&#x27;bias1&#x27;])</span><br><span class="line">        self.weights2 = np.array(model_data[&#x27;weights2&#x27;])</span><br><span class="line">        self.bias2 = np.array(model_data[&#x27;bias2&#x27;])</span><br><span class="line"></span><br><span class="line">class AITrainer:</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.ai = NeuralAI()</span><br><span class="line">        self.total_rewards = []</span><br><span class="line">        </span><br><span class="line">    def simulate_game(self, num_episodes: int = 100):</span><br><span class="line">        &quot;&quot;&quot;æ¨¡æ‹Ÿæ¸¸æˆè¿›è¡Œè®­ç»ƒ&quot;&quot;&quot;</span><br><span class="line">        for episode in range(num_episodes):</span><br><span class="line">            # åˆå§‹åŒ–æ¸¸æˆçŠ¶æ€</span><br><span class="line">            state = GameState(</span><br><span class="line">                wave_number=1,</span><br><span class="line">                player_gold=1000,</span><br><span class="line">                player_health=20,</span><br><span class="line">                enemies_count=5,</span><br><span class="line">                towers_count=0,</span><br><span class="line">                time_in_wave=0</span><br><span class="line">            )</span><br><span class="line">            </span><br><span class="line">            total_reward = 0</span><br><span class="line">            done = False</span><br><span class="line">            </span><br><span class="line">            while not done:</span><br><span class="line">                # AIé€‰æ‹©åŠ¨ä½œ</span><br><span class="line">                action = self.ai.choose_action(state)</span><br><span class="line">                </span><br><span class="line">                # æ‰§è¡ŒåŠ¨ä½œå¹¶è·å–æ–°çŠ¶æ€å’Œå¥–åŠ±</span><br><span class="line">                next_state, reward, done = self.execute_action(state, action)</span><br><span class="line">                </span><br><span class="line">                # å­˜å‚¨ç»éªŒ</span><br><span class="line">                self.ai.remember(state, action, reward, next_state, done)</span><br><span class="line">                </span><br><span class="line">                # è®­ç»ƒ</span><br><span class="line">                self.ai.train()</span><br><span class="line">                </span><br><span class="line">                state = next_state</span><br><span class="line">                total_reward += reward</span><br><span class="line">                </span><br><span class="line">                # æ¸¸æˆç»“æŸæ¡ä»¶</span><br><span class="line">                if state.player_health &lt;= 0 or state.wave_number &gt; 20:</span><br><span class="line">                    done = True</span><br><span class="line">            </span><br><span class="line">            self.total_rewards.append(total_reward)</span><br><span class="line">            print(f&quot;Episode &#123;episode + 1&#125;: Reward = &#123;total_reward&#125;&quot;)</span><br><span class="line">            </span><br><span class="line">            # æ¯10è½®ä¿å­˜ä¸€æ¬¡æ¨¡å‹</span><br><span class="line">            if (episode + 1) % 10 == 0:</span><br><span class="line">                self.ai.save_model(f&quot;ai_model_episode_&#123;episode + 1&#125;.json&quot;)</span><br><span class="line">    </span><br><span class="line">    def execute_action(self, state: GameState, action: ActionType) -&gt; Tuple[GameState, float, bool]:</span><br><span class="line">        &quot;&quot;&quot;æ‰§è¡ŒåŠ¨ä½œå¹¶è¿”å›ç»“æœ&quot;&quot;&quot;</span><br><span class="line">        # ç®€åŒ–çš„æ¸¸æˆé€»è¾‘</span><br><span class="line">        reward = 0</span><br><span class="line">        </span><br><span class="line">        if action == ActionType.BUILD_TOWER and state.player_gold &gt;= 100:</span><br><span class="line">            next_state = GameState(</span><br><span class="line">                wave_number=state.wave_number,</span><br><span class="line">                player_gold=state.player_gold - 100,</span><br><span class="line">                player_health=state.player_health,</span><br><span class="line">                enemies_count=state.enemies_count,</span><br><span class="line">                towers_count=state.towers_count + 1,</span><br><span class="line">                time_in_wave=state.time_in_wave + 1</span><br><span class="line">            )</span><br><span class="line">            reward = 0.1</span><br><span class="line">        elif action == ActionType.UPGRADE_TOWER and state.player_gold &gt;= 150 and state.towers_count &gt; 0:</span><br><span class="line">            next_state = GameState(</span><br><span class="line">                wave_number=state.wave_number,</span><br><span class="line">                player_gold=state.player_gold - 150,</span><br><span class="line">                player_health=state.player_health,</span><br><span class="line">                enemies_count=state.enemies_count,</span><br><span class="line">                towers_count=state.towers_count,</span><br><span class="line">                time_in_wave=state.time_in_wave + 1</span><br><span class="line">            )</span><br><span class="line">            reward = 0.15</span><br><span class="line">        else:</span><br><span class="line">            next_state = GameState(</span><br><span class="line">                wave_number=state.wave_number,</span><br><span class="line">                player_gold=state.player_gold + 10,  # è‡ªç„¶å¢é•¿</span><br><span class="line">                player_health=state.player_health,</span><br><span class="line">                enemies_count=state.enemies_count,</span><br><span class="line">                towers_count=state.towers_count,</span><br><span class="line">                time_in_wave=state.time_in_wave + 1</span><br><span class="line">            )</span><br><span class="line">            reward = -0.05</span><br><span class="line">        </span><br><span class="line">        # æ¨¡æ‹Ÿæ•Œäººæ”»å‡»</span><br><span class="line">        if state.enemies_count &gt; 0:</span><br><span class="line">            if state.towers_count &gt; 0:</span><br><span class="line">                enemies_killed = min(state.enemies_count, state.towers_count)</span><br><span class="line">                next_state.enemies_count -= enemies_killed</span><br><span class="line">                reward += enemies_killed * 0.2</span><br><span class="line">            else:</span><br><span class="line">                next_state.player_health -= 1</span><br><span class="line">                reward -= 0.5</span><br><span class="line">        </span><br><span class="line">        # æ£€æŸ¥æ³¢æ¬¡æ˜¯å¦ç»“æŸ</span><br><span class="line">        if next_state.enemies_count &lt;= 0:</span><br><span class="line">            next_state.wave_number += 1</span><br><span class="line">            next_state.enemies_count = 5 + next_state.wave_number * 2</span><br><span class="line">            reward += 1.0</span><br><span class="line">        </span><br><span class="line">        done = next_state.player_health &lt;= 0 or next_state.wave_number &gt; 20</span><br><span class="line">        </span><br><span class="line">        return next_state, reward, done</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    trainer = AITrainer()</span><br><span class="line">    trainer.simulate_game(50)</span><br><span class="line">    </span><br><span class="line">    # ç»˜åˆ¶è®­ç»ƒç»“æœ</span><br><span class="line">    import matplotlib.pyplot as plt</span><br><span class="line">    plt.plot(trainer.total_rewards)</span><br><span class="line">    plt.xlabel(&#x27;Episode&#x27;)</span><br><span class="line">    plt.ylabel(&#x27;Total Reward&#x27;)</span><br><span class="line">    plt.title(&#x27;AI Training Progress&#x27;)</span><br><span class="line">    plt.savefig(&#x27;ai_training_progress.png&#x27;)</span><br></pre></td></tr></table></figure>



<h3 id="ç¬¬9å‘¨ï¼šå®ç°ç½‘ç»œå¤šäººæ¸¸æˆåŠŸèƒ½"><a href="#ç¬¬9å‘¨ï¼šå®ç°ç½‘ç»œå¤šäººæ¸¸æˆåŠŸèƒ½" class="headerlink" title="ç¬¬9å‘¨ï¼šå®ç°ç½‘ç»œå¤šäººæ¸¸æˆåŠŸèƒ½"></a><strong>ç¬¬9å‘¨ï¼šå®ç°ç½‘ç»œå¤šäººæ¸¸æˆåŠŸèƒ½</strong></h3><h4 id="æ­¥éª¤18ï¼šç½‘ç»œé€šä¿¡æ¶æ„"><a href="#æ­¥éª¤18ï¼šç½‘ç»œé€šä¿¡æ¶æ„" class="headerlink" title="æ­¥éª¤18ï¼šç½‘ç»œé€šä¿¡æ¶æ„"></a><strong>æ­¥éª¤18ï¼šç½‘ç»œé€šä¿¡æ¶æ„</strong></h4><p><strong>1. æ¶ˆæ¯åè®®å®šä¹‰</strong></p>
<p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">// network/Message.java</span><br><span class="line">package com.javagame.network;</span><br><span class="line"></span><br><span class="line">import java.io.Serializable;</span><br><span class="line"></span><br><span class="line">public class Message implements Serializable &#123;</span><br><span class="line">    private final MessageType type;</span><br><span class="line">    private final String sender;</span><br><span class="line">    private final long timestamp;</span><br><span class="line">    private final Object payload;</span><br><span class="line">    </span><br><span class="line">    public Message(MessageType type, String sender, Object payload) &#123;</span><br><span class="line">        this.type = type;</span><br><span class="line">        this.sender = sender;</span><br><span class="line">        this.timestamp = System.currentTimeMillis();</span><br><span class="line">        this.payload = payload;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public enum MessageType &#123;</span><br><span class="line">        // æ¸¸æˆçŠ¶æ€</span><br><span class="line">        GAME_STATE_UPDATE,</span><br><span class="line">        PLAYER_ACTION,</span><br><span class="line">        </span><br><span class="line">        // å¤šäººæ¸¸æˆ</span><br><span class="line">        PLAYER_JOIN,</span><br><span class="line">        PLAYER_LEAVE,</span><br><span class="line">        CHAT_MESSAGE,</span><br><span class="line">        </span><br><span class="line">        // åŒæ­¥</span><br><span class="line">        SYNC_REQUEST,</span><br><span class="line">        SYNC_RESPONSE,</span><br><span class="line">        </span><br><span class="line">        // å¿ƒè·³</span><br><span class="line">        PING,</span><br><span class="line">        PONG</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // Getters...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// network/PlayerAction.java</span><br><span class="line">package com.javagame.network;</span><br><span class="line"></span><br><span class="line">public class PlayerAction implements Serializable &#123;</span><br><span class="line">    private final ActionType type;</span><br><span class="line">    private final String playerId;</span><br><span class="line">    private final Object data;</span><br><span class="line">    </span><br><span class="line">    public enum ActionType &#123;</span><br><span class="line">        PLACE_TOWER,</span><br><span class="line">        UPGRADE_TOWER,</span><br><span class="line">        USE_SKILL,</span><br><span class="line">        SEND_CHAT,</span><br><span class="line">        END_TURN // å¯¹äºå›åˆåˆ¶æ¸¸æˆ</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // Getters...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>2. ç½‘ç»œæœåŠ¡ç«¯</strong></p>
<p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br></pre></td><td class="code"><pre><span class="line">// network/GameServer.java</span><br><span class="line">package com.javagame.network;</span><br><span class="line"></span><br><span class="line">import java.io.*;</span><br><span class="line">import java.net.*;</span><br><span class="line">import java.util.*;</span><br><span class="line">import java.util.concurrent.*;</span><br><span class="line"></span><br><span class="line">public class GameServer &#123;</span><br><span class="line">    private ServerSocket serverSocket;</span><br><span class="line">    private final int port;</span><br><span class="line">    private volatile boolean running;</span><br><span class="line">    private final ExecutorService executor;</span><br><span class="line">    </span><br><span class="line">    private final Map&lt;String, ClientHandler&gt; clients = new ConcurrentHashMap&lt;&gt;();</span><br><span class="line">    private final List&lt;GameSession&gt; sessions = new CopyOnWriteArrayList&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    public GameServer(int port) &#123;</span><br><span class="line">        this.port = port;</span><br><span class="line">        this.executor = Executors.newCachedThreadPool();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void start() throws IOException &#123;</span><br><span class="line">        serverSocket = new ServerSocket(port);</span><br><span class="line">        running = true;</span><br><span class="line">        </span><br><span class="line">        System.out.println(&quot;æ¸¸æˆæœåŠ¡å™¨å¯åŠ¨ï¼Œç«¯å£: &quot; + port);</span><br><span class="line">        </span><br><span class="line">        new Thread(this::acceptConnections).start();</span><br><span class="line">        new Thread(this::heartbeatCheck).start();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void acceptConnections() &#123;</span><br><span class="line">        while (running) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                Socket clientSocket = serverSocket.accept();</span><br><span class="line">                ClientHandler handler = new ClientHandler(clientSocket, this);</span><br><span class="line">                executor.submit(handler);</span><br><span class="line">            &#125; catch (IOException e) &#123;</span><br><span class="line">                if (running) &#123;</span><br><span class="line">                    System.err.println(&quot;æ¥å—è¿æ¥å¤±è´¥: &quot; + e.getMessage());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void heartbeatCheck() &#123;</span><br><span class="line">        while (running) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                Thread.sleep(30000); // 30ç§’æ£€æŸ¥ä¸€æ¬¡</span><br><span class="line">                </span><br><span class="line">                long currentTime = System.currentTimeMillis();</span><br><span class="line">                Iterator&lt;ClientHandler&gt; iterator = clients.values().iterator();</span><br><span class="line">                </span><br><span class="line">                while (iterator.hasNext()) &#123;</span><br><span class="line">                    ClientHandler client = iterator.next();</span><br><span class="line">                    if (currentTime - client.getLastHeartbeat() &gt; 60000) &#123; // 60ç§’è¶…æ—¶</span><br><span class="line">                        client.disconnect();</span><br><span class="line">                        iterator.remove();</span><br><span class="line">                        broadcastPlayerLeave(client.getPlayerId());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                Thread.currentThread().interrupt();</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void registerClient(String playerId, ClientHandler handler) &#123;</span><br><span class="line">        clients.put(playerId, handler);</span><br><span class="line">        broadcastPlayerJoin(playerId);</span><br><span class="line">        </span><br><span class="line">        // åˆ›å»ºæˆ–åŠ å…¥æ¸¸æˆä¼šè¯</span><br><span class="line">        GameSession session = findAvailableSession();</span><br><span class="line">        session.addPlayer(playerId);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private GameSession findAvailableSession() &#123;</span><br><span class="line">        // æŸ¥æ‰¾æœªæ»¡çš„ä¼šè¯</span><br><span class="line">        for (GameSession session : sessions) &#123;</span><br><span class="line">            if (!session.isFull()) &#123;</span><br><span class="line">                return session;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // åˆ›å»ºæ–°ä¼šè¯</span><br><span class="line">        GameSession newSession = new GameSession(&quot;Session_&quot; + System.currentTimeMillis());</span><br><span class="line">        sessions.add(newSession);</span><br><span class="line">        return newSession;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void broadcastMessage(Message message, String excludePlayerId) &#123;</span><br><span class="line">        for (ClientHandler client : clients.values()) &#123;</span><br><span class="line">            if (!client.getPlayerId().equals(excludePlayerId)) &#123;</span><br><span class="line">                client.sendMessage(message);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void broadcastPlayerJoin(String playerId) &#123;</span><br><span class="line">        Message message = new Message(</span><br><span class="line">            Message.MessageType.PLAYER_JOIN,</span><br><span class="line">            &quot;SERVER&quot;,</span><br><span class="line">            Map.of(&quot;playerId&quot;, playerId, &quot;timestamp&quot;, System.currentTimeMillis())</span><br><span class="line">        );</span><br><span class="line">        broadcastMessage(message, playerId);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void broadcastPlayerLeave(String playerId) &#123;</span><br><span class="line">        Message message = new Message(</span><br><span class="line">            Message.MessageType.PLAYER_LEAVE,</span><br><span class="line">            &quot;SERVER&quot;,</span><br><span class="line">            Map.of(&quot;playerId&quot;, playerId, &quot;timestamp&quot;, System.currentTimeMillis())</span><br><span class="line">        );</span><br><span class="line">        broadcastMessage(message, playerId);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void processPlayerAction(String playerId, PlayerAction action) &#123;</span><br><span class="line">        // éªŒè¯åŠ¨ä½œ</span><br><span class="line">        if (!validateAction(playerId, action)) &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // å¹¿æ’­ç»™å…¶ä»–ç©å®¶</span><br><span class="line">        Message message = new Message(</span><br><span class="line">            Message.MessageType.PLAYER_ACTION,</span><br><span class="line">            playerId,</span><br><span class="line">            action</span><br><span class="line">        );</span><br><span class="line">        broadcastMessage(message, playerId);</span><br><span class="line">        </span><br><span class="line">        // æ›´æ–°æ¸¸æˆçŠ¶æ€</span><br><span class="line">        updateGameState(playerId, action);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private boolean validateAction(String playerId, PlayerAction action) &#123;</span><br><span class="line">        // éªŒè¯é€»è¾‘ï¼šæ£€æŸ¥ç©å®¶æ˜¯å¦æœ‰æƒé™æ‰§è¡Œè¯¥åŠ¨ä½œ</span><br><span class="line">        // æ£€æŸ¥åŠ¨ä½œæ•°æ®æ˜¯å¦åˆæ³•</span><br><span class="line">        // æ£€æŸ¥æ¸¸æˆçŠ¶æ€æ˜¯å¦å…è®¸è¯¥åŠ¨ä½œ</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void updateGameState(String playerId, PlayerAction action) &#123;</span><br><span class="line">        // æ ¹æ®åŠ¨ä½œæ›´æ–°æ¸¸æˆçŠ¶æ€</span><br><span class="line">        // ç„¶åå°†æ–°çŠ¶æ€å¹¿æ’­ç»™æ‰€æœ‰ç©å®¶</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void stop() &#123;</span><br><span class="line">        running = false;</span><br><span class="line">        try &#123;</span><br><span class="line">            if (serverSocket != null) &#123;</span><br><span class="line">                serverSocket.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            // å¿½ç•¥å…³é—­å¼‚å¸¸</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        executor.shutdown();</span><br><span class="line">        clients.values().forEach(ClientHandler::disconnect);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// network/ClientHandler.java</span><br><span class="line">package com.javagame.network;</span><br><span class="line"></span><br><span class="line">import java.io.*;</span><br><span class="line">import java.net.*;</span><br><span class="line"></span><br><span class="line">public class ClientHandler implements Runnable &#123;</span><br><span class="line">    private final Socket socket;</span><br><span class="line">    private final GameServer server;</span><br><span class="line">    private ObjectOutputStream output;</span><br><span class="line">    private ObjectInputStream input;</span><br><span class="line">    </span><br><span class="line">    private String playerId;</span><br><span class="line">    private volatile long lastHeartbeat;</span><br><span class="line">    </span><br><span class="line">    public ClientHandler(Socket socket, GameServer server) &#123;</span><br><span class="line">        this.socket = socket;</span><br><span class="line">        this.server = server;</span><br><span class="line">        this.lastHeartbeat = System.currentTimeMillis();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            output = new ObjectOutputStream(socket.getOutputStream());</span><br><span class="line">            input = new ObjectInputStream(socket.getInputStream());</span><br><span class="line">            </span><br><span class="line">            // æ¡æ‰‹</span><br><span class="line">            performHandshake();</span><br><span class="line">            </span><br><span class="line">            // æ¶ˆæ¯å¤„ç†å¾ªç¯</span><br><span class="line">            while (!socket.isClosed()) &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    Message message = (Message) input.readObject();</span><br><span class="line">                    processMessage(message);</span><br><span class="line">                &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">                    System.err.println(&quot;æ¥æ”¶æ¶ˆæ¯å¤±è´¥: &quot; + e.getMessage());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            System.err.println(&quot;å®¢æˆ·ç«¯è¿æ¥å¼‚å¸¸: &quot; + e.getMessage());</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            disconnect();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void performHandshake() throws IOException, ClassNotFoundException &#123;</span><br><span class="line">        // æ¥æ”¶å®¢æˆ·ç«¯è®¤è¯ä¿¡æ¯</span><br><span class="line">        Message authMessage = (Message) input.readObject();</span><br><span class="line">        </span><br><span class="line">        if (authMessage.getType() == Message.MessageType.PLAYER_JOIN) &#123;</span><br><span class="line">            Map&lt;String, Object&gt; authData = (Map&lt;String, Object&gt;) authMessage.getPayload();</span><br><span class="line">            this.playerId = (String) authData.get(&quot;playerId&quot;);</span><br><span class="line">            </span><br><span class="line">            server.registerClient(playerId, this);</span><br><span class="line">            </span><br><span class="line">            // å‘é€æ¬¢è¿æ¶ˆæ¯</span><br><span class="line">            sendMessage(new Message(</span><br><span class="line">                Message.MessageType.CHAT_MESSAGE,</span><br><span class="line">                &quot;SERVER&quot;,</span><br><span class="line">                Map.of(&quot;message&quot;, &quot;æ¬¢è¿åŠ å…¥æ¸¸æˆï¼&quot;, &quot;playerId&quot;, playerId)</span><br><span class="line">            ));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void processMessage(Message message) &#123;</span><br><span class="line">        lastHeartbeat = System.currentTimeMillis();</span><br><span class="line">        </span><br><span class="line">        switch (message.getType()) &#123;</span><br><span class="line">            case PLAYER_ACTION:</span><br><span class="line">                PlayerAction action = (PlayerAction) message.getPayload();</span><br><span class="line">                server.processPlayerAction(playerId, action);</span><br><span class="line">                break;</span><br><span class="line">                </span><br><span class="line">            case CHAT_MESSAGE:</span><br><span class="line">                // å¹¿æ’­èŠå¤©æ¶ˆæ¯</span><br><span class="line">                server.broadcastMessage(message, playerId);</span><br><span class="line">                break;</span><br><span class="line">                </span><br><span class="line">            case PING:</span><br><span class="line">                // å›å¤å¿ƒè·³</span><br><span class="line">                sendMessage(new Message(Message.MessageType.PONG, &quot;SERVER&quot;, null));</span><br><span class="line">                break;</span><br><span class="line">                </span><br><span class="line">            default:</span><br><span class="line">                System.out.println(&quot;æœªçŸ¥æ¶ˆæ¯ç±»å‹: &quot; + message.getType());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public synchronized void sendMessage(Message message) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            output.writeObject(message);</span><br><span class="line">            output.flush();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            System.err.println(&quot;å‘é€æ¶ˆæ¯å¤±è´¥: &quot; + e.getMessage());</span><br><span class="line">            disconnect();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void disconnect() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            if (socket != null &amp;&amp; !socket.isClosed()) &#123;</span><br><span class="line">                socket.close();</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            if (server != null &amp;&amp; playerId != null) &#123;</span><br><span class="line">                // é€šçŸ¥æœåŠ¡å™¨ç©å®¶ç¦»å¼€</span><br><span class="line">                server.broadcastPlayerLeave(playerId);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            // å¿½ç•¥å…³é—­å¼‚å¸¸</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // Getters...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>3. ç½‘ç»œå®¢æˆ·ç«¯</strong></p>
<p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line">// network/GameClient.java</span><br><span class="line">package com.javagame.network;</span><br><span class="line"></span><br><span class="line">import java.io.*;</span><br><span class="line">import java.net.*;</span><br><span class="line">import java.util.concurrent.*;</span><br><span class="line"></span><br><span class="line">public class GameClient &#123;</span><br><span class="line">    private Socket socket;</span><br><span class="line">    private String serverAddress;</span><br><span class="line">    private int port;</span><br><span class="line">    private String playerId;</span><br><span class="line">    </span><br><span class="line">    private ObjectOutputStream output;</span><br><span class="line">    private ObjectInputStream input;</span><br><span class="line">    private volatile boolean connected;</span><br><span class="line">    </span><br><span class="line">    private final BlockingQueue&lt;Message&gt; incomingMessages = new LinkedBlockingQueue&lt;&gt;();</span><br><span class="line">    private final ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(2);</span><br><span class="line">    </span><br><span class="line">    private GameStateListener gameStateListener;</span><br><span class="line">    private ChatMessageListener chatListener;</span><br><span class="line">    </span><br><span class="line">    public GameClient(String serverAddress, int port, String playerId) &#123;</span><br><span class="line">        this.serverAddress = serverAddress;</span><br><span class="line">        this.port = port;</span><br><span class="line">        this.playerId = playerId;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public boolean connect() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            socket = new Socket(serverAddress, port);</span><br><span class="line">            output = new ObjectOutputStream(socket.getOutputStream());</span><br><span class="line">            input = new ObjectInputStream(socket.getInputStream());</span><br><span class="line">            connected = true;</span><br><span class="line">            </span><br><span class="line">            // å¯åŠ¨æ¶ˆæ¯æ¥æ”¶çº¿ç¨‹</span><br><span class="line">            new Thread(this::receiveMessages).start();</span><br><span class="line">            </span><br><span class="line">            // å‘é€è®¤è¯ä¿¡æ¯</span><br><span class="line">            sendJoinMessage();</span><br><span class="line">            </span><br><span class="line">            // å¯åŠ¨å¿ƒè·³</span><br><span class="line">            startHeartbeat();</span><br><span class="line">            </span><br><span class="line">            return true;</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            System.err.println(&quot;è¿æ¥æœåŠ¡å™¨å¤±è´¥: &quot; + e.getMessage());</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void sendJoinMessage() &#123;</span><br><span class="line">        Message joinMessage = new Message(</span><br><span class="line">            Message.MessageType.PLAYER_JOIN,</span><br><span class="line">            playerId,</span><br><span class="line">            Map.of(&quot;playerId&quot;, playerId, &quot;version&quot;, &quot;1.0.0&quot;)</span><br><span class="line">        );</span><br><span class="line">        sendMessage(joinMessage);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void receiveMessages() &#123;</span><br><span class="line">        while (connected &amp;&amp; socket != null &amp;&amp; !socket.isClosed()) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                Message message = (Message) input.readObject();</span><br><span class="line">                incomingMessages.put(message);</span><br><span class="line">                processIncomingMessage(message);</span><br><span class="line">            &#125; catch (IOException | ClassNotFoundException | InterruptedException e) &#123;</span><br><span class="line">                if (connected) &#123;</span><br><span class="line">                    System.err.println(&quot;æ¥æ”¶æ¶ˆæ¯å¤±è´¥: &quot; + e.getMessage());</span><br><span class="line">                    disconnect();</span><br><span class="line">                &#125;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void processIncomingMessage(Message message) &#123;</span><br><span class="line">        switch (message.getType()) &#123;</span><br><span class="line">            case GAME_STATE_UPDATE:</span><br><span class="line">                if (gameStateListener != null) &#123;</span><br><span class="line">                    gameStateListener.onGameStateUpdate((GameStateUpdate) message.getPayload());</span><br><span class="line">                &#125;</span><br><span class="line">                break;</span><br><span class="line">                </span><br><span class="line">            case CHAT_MESSAGE:</span><br><span class="line">                if (chatListener != null) &#123;</span><br><span class="line">                    Map&lt;String, Object&gt; chatData = (Map&lt;String, Object&gt;) message.getPayload();</span><br><span class="line">                    chatListener.onChatMessage(</span><br><span class="line">                        (String) chatData.get(&quot;playerId&quot;),</span><br><span class="line">                        (String) chatData.get(&quot;message&quot;)</span><br><span class="line">                    );</span><br><span class="line">                &#125;</span><br><span class="line">                break;</span><br><span class="line">                </span><br><span class="line">            case PLAYER_JOIN:</span><br><span class="line">                System.out.println(&quot;ç©å®¶åŠ å…¥: &quot; + message.getSender());</span><br><span class="line">                break;</span><br><span class="line">                </span><br><span class="line">            case PLAYER_LEAVE:</span><br><span class="line">                System.out.println(&quot;ç©å®¶ç¦»å¼€: &quot; + message.getSender());</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void sendPlayerAction(PlayerAction action) &#123;</span><br><span class="line">        Message message = new Message(Message.MessageType.PLAYER_ACTION, playerId, action);</span><br><span class="line">        sendMessage(message);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void sendChatMessage(String text) &#123;</span><br><span class="line">        Message message = new Message(</span><br><span class="line">            Message.MessageType.CHAT_MESSAGE,</span><br><span class="line">            playerId,</span><br><span class="line">            Map.of(&quot;message&quot;, text)</span><br><span class="line">        );</span><br><span class="line">        sendMessage(message);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void sendMessage(Message message) &#123;</span><br><span class="line">        if (connected &amp;&amp; output != null) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                output.writeObject(message);</span><br><span class="line">                output.flush();</span><br><span class="line">            &#125; catch (IOException e) &#123;</span><br><span class="line">                System.err.println(&quot;å‘é€æ¶ˆæ¯å¤±è´¥: &quot; + e.getMessage());</span><br><span class="line">                disconnect();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void startHeartbeat() &#123;</span><br><span class="line">        scheduler.scheduleAtFixedRate(() -&gt; &#123;</span><br><span class="line">            if (connected) &#123;</span><br><span class="line">                sendMessage(new Message(Message.MessageType.PING, playerId, null));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, 0, 15, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void disconnect() &#123;</span><br><span class="line">        connected = false;</span><br><span class="line">        </span><br><span class="line">        try &#123;</span><br><span class="line">            if (socket != null &amp;&amp; !socket.isClosed()) &#123;</span><br><span class="line">                socket.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            // å¿½ç•¥å…³é—­å¼‚å¸¸</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        scheduler.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // ç›‘å¬å™¨æ¥å£</span><br><span class="line">    public interface GameStateListener &#123;</span><br><span class="line">        void onGameStateUpdate(GameStateUpdate update);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public interface ChatMessageListener &#123;</span><br><span class="line">        void onChatMessage(String sender, String message);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void setGameStateListener(GameStateListener listener) &#123;</span><br><span class="line">        this.gameStateListener = listener;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void setChatMessageListener(ChatMessageListener listener) &#123;</span><br><span class="line">        this.chatListener = listener;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="ç¬¬10å‘¨ï¼šæ€§èƒ½ä¼˜åŒ–å’Œç›‘æ§"><a href="#ç¬¬10å‘¨ï¼šæ€§èƒ½ä¼˜åŒ–å’Œç›‘æ§" class="headerlink" title="ç¬¬10å‘¨ï¼šæ€§èƒ½ä¼˜åŒ–å’Œç›‘æ§"></a><strong>ç¬¬10å‘¨ï¼šæ€§èƒ½ä¼˜åŒ–å’Œç›‘æ§</strong></h3><h4 id="æ­¥éª¤19ï¼šæ€§èƒ½ä¼˜åŒ–å·¥å…·å’Œç›‘æ§ç³»ç»Ÿ"><a href="#æ­¥éª¤19ï¼šæ€§èƒ½ä¼˜åŒ–å·¥å…·å’Œç›‘æ§ç³»ç»Ÿ" class="headerlink" title="æ­¥éª¤19ï¼šæ€§èƒ½ä¼˜åŒ–å·¥å…·å’Œç›‘æ§ç³»ç»Ÿ"></a><strong>æ­¥éª¤19ï¼šæ€§èƒ½ä¼˜åŒ–å·¥å…·å’Œç›‘æ§ç³»ç»Ÿ</strong></h4><p><strong>1. æ€§èƒ½ç›‘æ§æœåŠ¡</strong></p>
<p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br></pre></td><td class="code"><pre><span class="line">// performance/MonitorService.java</span><br><span class="line">package com.javagame.performance;</span><br><span class="line"></span><br><span class="line">import java.lang.management.*;</span><br><span class="line">import java.util.*;</span><br><span class="line">import java.util.concurrent.*;</span><br><span class="line">import java.util.concurrent.atomic.*;</span><br><span class="line"></span><br><span class="line">public class MonitorService &#123;</span><br><span class="line">    private static final MonitorService INSTANCE = new MonitorService();</span><br><span class="line">    </span><br><span class="line">    private final Map&lt;String, AtomicLong&gt; counters = new ConcurrentHashMap&lt;&gt;();</span><br><span class="line">    private final Map&lt;String, Histogram&gt; histograms = new ConcurrentHashMap&lt;&gt;();</span><br><span class="line">    private final ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);</span><br><span class="line">    private final List&lt;MonitorListener&gt; listeners = new CopyOnWriteArrayList&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    private volatile boolean monitoring = false;</span><br><span class="line">    </span><br><span class="line">    private MonitorService() &#123;</span><br><span class="line">        // ç§æœ‰æ„é€ å™¨</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public static MonitorService getInstance() &#123;</span><br><span class="line">        return INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void start() &#123;</span><br><span class="line">        if (monitoring) return;</span><br><span class="line">        </span><br><span class="line">        monitoring = true;</span><br><span class="line">        </span><br><span class="line">        // æ¯ç§’æ”¶é›†ä¸€æ¬¡æŒ‡æ ‡</span><br><span class="line">        scheduler.scheduleAtFixedRate(this::collectMetrics, 1, 1, TimeUnit.SECONDS);</span><br><span class="line">        </span><br><span class="line">        // æ¯5ç§’æŠ¥å‘Šä¸€æ¬¡</span><br><span class="line">        scheduler.scheduleAtFixedRate(this::reportMetrics, 5, 5, TimeUnit.SECONDS);</span><br><span class="line">        </span><br><span class="line">        System.out.println(&quot;æ€§èƒ½ç›‘æ§å·²å¯åŠ¨&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void stop() &#123;</span><br><span class="line">        monitoring = false;</span><br><span class="line">        scheduler.shutdown();</span><br><span class="line">        System.out.println(&quot;æ€§èƒ½ç›‘æ§å·²åœæ­¢&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void incrementCounter(String name) &#123;</span><br><span class="line">        incrementCounter(name, 1);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void incrementCounter(String name, long delta) &#123;</span><br><span class="line">        counters.computeIfAbsent(name, k -&gt; new AtomicLong(0))</span><br><span class="line">                .addAndGet(delta);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void recordValue(String histogramName, long value) &#123;</span><br><span class="line">        histograms.computeIfAbsent(histogramName, k -&gt; new Histogram())</span><br><span class="line">                  .record(value);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void collectMetrics() &#123;</span><br><span class="line">        // æ”¶é›†JVMæŒ‡æ ‡</span><br><span class="line">        MemoryMXBean memoryBean = ManagementFactory.getMemoryMXBean();</span><br><span class="line">        MemoryUsage heapUsage = memoryBean.getHeapMemoryUsage();</span><br><span class="line">        MemoryUsage nonHeapUsage = memoryBean.getNonHeapMemoryUsage();</span><br><span class="line">        </span><br><span class="line">        recordValue(&quot;jvm.heap.used&quot;, heapUsage.getUsed());</span><br><span class="line">        recordValue(&quot;jvm.heap.committed&quot;, heapUsage.getCommitted());</span><br><span class="line">        recordValue(&quot;jvm.nonheap.used&quot;, nonHeapUsage.getUsed());</span><br><span class="line">        </span><br><span class="line">        // æ”¶é›†çº¿ç¨‹æŒ‡æ ‡</span><br><span class="line">        ThreadMXBean threadBean = ManagementFactory.getThreadMXBean();</span><br><span class="line">        recordValue(&quot;jvm.threads.count&quot;, threadBean.getThreadCount());</span><br><span class="line">        recordValue(&quot;jvm.threads.daemon&quot;, threadBean.getDaemonThreadCount());</span><br><span class="line">        </span><br><span class="line">        // æ”¶é›†GCæŒ‡æ ‡</span><br><span class="line">        for (GarbageCollectorMXBean gcBean : ManagementFactory.getGarbageCollectorMXBeans()) &#123;</span><br><span class="line">            String gcName = gcBean.getName().replace(&quot; &quot;, &quot;_&quot;).toLowerCase();</span><br><span class="line">            recordValue(&quot;jvm.gc.&quot; + gcName + &quot;.count&quot;, gcBean.getCollectionCount());</span><br><span class="line">            recordValue(&quot;jvm.gc.&quot; + gcName + &quot;.time&quot;, gcBean.getCollectionTime());</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // æ”¶é›†æ“ä½œç³»ç»ŸæŒ‡æ ‡</span><br><span class="line">        OperatingSystemMXBean osBean = ManagementFactory.getOperatingSystemMXBean();</span><br><span class="line">        if (osBean instanceof com.sun.management.OperatingSystemMXBean) &#123;</span><br><span class="line">            com.sun.management.OperatingSystemMXBean sunOsBean = </span><br><span class="line">                (com.sun.management.OperatingSystemMXBean) osBean;</span><br><span class="line">            recordValue(&quot;os.cpu.usage&quot;, (long)(sunOsBean.getProcessCpuLoad() * 100));</span><br><span class="line">            recordValue(&quot;os.memory.free&quot;, sunOsBean.getFreePhysicalMemorySize());</span><br><span class="line">            recordValue(&quot;os.memory.total&quot;, sunOsBean.getTotalPhysicalMemorySize());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void reportMetrics() &#123;</span><br><span class="line">        Map&lt;String, Object&gt; report = new LinkedHashMap&lt;&gt;();</span><br><span class="line">        report.put(&quot;timestamp&quot;, System.currentTimeMillis());</span><br><span class="line">        </span><br><span class="line">        // è®¡æ•°å™¨æŠ¥å‘Š</span><br><span class="line">        Map&lt;String, Long&gt; counterReport = new HashMap&lt;&gt;();</span><br><span class="line">        counters.forEach((name, counter) -&gt; &#123;</span><br><span class="line">            counterReport.put(name, counter.getAndSet(0));</span><br><span class="line">        &#125;);</span><br><span class="line">        report.put(&quot;counters&quot;, counterReport);</span><br><span class="line">        </span><br><span class="line">        // ç›´æ–¹å›¾æŠ¥å‘Š</span><br><span class="line">        Map&lt;String, Map&lt;String, Long&gt;&gt; histogramReport = new HashMap&lt;&gt;();</span><br><span class="line">        histograms.forEach((name, histogram) -&gt; &#123;</span><br><span class="line">            histogramReport.put(name, histogram.snapshotAndReset());</span><br><span class="line">        &#125;);</span><br><span class="line">        report.put(&quot;histograms&quot;, histogramReport);</span><br><span class="line">        </span><br><span class="line">        // é€šçŸ¥ç›‘å¬å™¨</span><br><span class="line">        for (MonitorListener listener : listeners) &#123;</span><br><span class="line">            listener.onMetricsReport(report);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // è¾“å‡ºåˆ°æ§åˆ¶å°ï¼ˆè°ƒè¯•ç”¨ï¼‰</span><br><span class="line">        if (System.getProperty(&quot;debug.metrics&quot;) != null) &#123;</span><br><span class="line">            System.out.println(&quot;=== æ€§èƒ½æŒ‡æ ‡æŠ¥å‘Š ===&quot;);</span><br><span class="line">            System.out.println(&quot;æ—¶é—´æˆ³: &quot; + new Date(report.get(&quot;timestamp&quot;)));</span><br><span class="line">            System.out.println(&quot;è®¡æ•°å™¨:&quot;);</span><br><span class="line">            ((Map&lt;String, Long&gt;)report.get(&quot;counters&quot;)).forEach((k, v) -&gt; </span><br><span class="line">                System.out.printf(&quot;  %s: %d%n&quot;, k, v));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void addListener(MonitorListener listener) &#123;</span><br><span class="line">        listeners.add(listener);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void removeListener(MonitorListener listener) &#123;</span><br><span class="line">        listeners.remove(listener);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public interface MonitorListener &#123;</span><br><span class="line">        void onMetricsReport(Map&lt;String, Object&gt; metrics);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // ç›´æ–¹å›¾ç±»</span><br><span class="line">    private static class Histogram &#123;</span><br><span class="line">        private final AtomicLong count = new AtomicLong();</span><br><span class="line">        private final AtomicLong sum = new AtomicLong();</span><br><span class="line">        private final AtomicLong min = new AtomicLong(Long.MAX_VALUE);</span><br><span class="line">        private final AtomicLong max = new AtomicLong(Long.MIN_VALUE);</span><br><span class="line">        </span><br><span class="line">        public void record(long value) &#123;</span><br><span class="line">            count.incrementAndGet();</span><br><span class="line">            sum.addAndGet(value);</span><br><span class="line">            </span><br><span class="line">            long currentMin;</span><br><span class="line">            do &#123;</span><br><span class="line">                currentMin = min.get();</span><br><span class="line">                if (value &gt;= currentMin) break;</span><br><span class="line">            &#125; while (!min.compareAndSet(currentMin, value));</span><br><span class="line">            </span><br><span class="line">            long currentMax;</span><br><span class="line">            do &#123;</span><br><span class="line">                currentMax = max.get();</span><br><span class="line">                if (value &lt;= currentMax) break;</span><br><span class="line">            &#125; while (!max.compareAndSet(currentMax, value));</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        public Map&lt;String, Long&gt; snapshotAndReset() &#123;</span><br><span class="line">            Map&lt;String, Long&gt; snapshot = new HashMap&lt;&gt;();</span><br><span class="line">            </span><br><span class="line">            long c = count.getAndSet(0);</span><br><span class="line">            long s = sum.getAndSet(0);</span><br><span class="line">            long mn = min.getAndSet(Long.MAX_VALUE);</span><br><span class="line">            long mx = max.getAndSet(Long.MIN_VALUE);</span><br><span class="line">            </span><br><span class="line">            snapshot.put(&quot;count&quot;, c);</span><br><span class="line">            snapshot.put(&quot;sum&quot;, s);</span><br><span class="line">            snapshot.put(&quot;min&quot;, mn == Long.MAX_VALUE ? 0 : mn);</span><br><span class="line">            snapshot.put(&quot;max&quot;, mx == Long.MIN_VALUE ? 0 : mx);</span><br><span class="line">            snapshot.put(&quot;avg&quot;, c &gt; 0 ? s / c : 0);</span><br><span class="line">            </span><br><span class="line">            return snapshot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ¸¸æˆå¼•æ“é›†æˆç›‘æ§</span><br><span class="line">package com.javagame.engine;</span><br><span class="line"></span><br><span class="line">import com.javagame.performance.MonitorService;</span><br><span class="line"></span><br><span class="line">public class GameEngine &#123;</span><br><span class="line">    private final MonitorService monitor = MonitorService.getInstance();</span><br><span class="line">    private long lastUpdateTime;</span><br><span class="line">    </span><br><span class="line">    public GameEngine() &#123;</span><br><span class="line">        monitor.start();</span><br><span class="line">        lastUpdateTime = System.currentTimeMillis();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void update(long currentTime) &#123;</span><br><span class="line">        long deltaTime = currentTime - lastUpdateTime;</span><br><span class="line">        </span><br><span class="line">        // è®°å½•å¸§æ—¶é—´</span><br><span class="line">        monitor.recordValue(&quot;game.update.delta_time&quot;, deltaTime);</span><br><span class="line">        </span><br><span class="line">        // å¼€å§‹ç›‘æ§ä¸€æ®µä»£ç çš„æ‰§è¡Œæ—¶é—´</span><br><span class="line">        long startTime = System.nanoTime();</span><br><span class="line">        </span><br><span class="line">        try &#123;</span><br><span class="line">            // æ¸¸æˆæ›´æ–°é€»è¾‘</span><br><span class="line">            updateGameState(currentTime);</span><br><span class="line">            updatePhysics(currentTime);</span><br><span class="line">            updateAI(currentTime);</span><br><span class="line">            updateEffects(currentTime);</span><br><span class="line">            </span><br><span class="line">            // è®°å½•å„ä¸ªéƒ¨åˆ†çš„æ‰§è¡Œæ—¶é—´</span><br><span class="line">            monitor.incrementCounter(&quot;game.update.count&quot;);</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            long endTime = System.nanoTime();</span><br><span class="line">            long duration = (endTime - startTime) / 1_000_000; // è½¬æ¢ä¸ºæ¯«ç§’</span><br><span class="line">            monitor.recordValue(&quot;game.update.duration&quot;, duration);</span><br><span class="line">            </span><br><span class="line">            // è®°å½•å¸§ç‡</span><br><span class="line">            if (deltaTime &gt; 0) &#123;</span><br><span class="line">                int fps = (int)(1000 / deltaTime);</span><br><span class="line">                monitor.recordValue(&quot;game.fps&quot;, fps);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        lastUpdateTime = currentTime;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void updateGameState(long currentTime) &#123;</span><br><span class="line">        monitor.incrementCounter(&quot;game.update.game_state&quot;);</span><br><span class="line">        // æ¸¸æˆçŠ¶æ€æ›´æ–°é€»è¾‘</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void updatePhysics(long currentTime) &#123;</span><br><span class="line">        monitor.incrementCounter(&quot;game.update.physics&quot;);</span><br><span class="line">        // ç‰©ç†æ›´æ–°é€»è¾‘</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void updateAI(long currentTime) &#123;</span><br><span class="line">        monitor.incrementCounter(&quot;game.update.ai&quot;);</span><br><span class="line">        // AIæ›´æ–°é€»è¾‘</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void updateEffects(long currentTime) &#123;</span><br><span class="line">        monitor.incrementCounter(&quot;game.update.effects&quot;);</span><br><span class="line">        // ç‰¹æ•ˆæ›´æ–°é€»è¾‘</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>2. å†…å­˜ç®¡ç†å’Œå¯¹è±¡æ± </strong></p>
<p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line">// utils/ObjectPool.java</span><br><span class="line">package com.javagame.utils;</span><br><span class="line"></span><br><span class="line">import java.util.*;</span><br><span class="line">import java.util.concurrent.*;</span><br><span class="line"></span><br><span class="line">public class ObjectPool&lt;T&gt; &#123;</span><br><span class="line">    private final Queue&lt;T&gt; pool = new ConcurrentLinkedQueue&lt;&gt;();</span><br><span class="line">    private final ObjectFactory&lt;T&gt; factory;</span><br><span class="line">    private final int maxSize;</span><br><span class="line">    private final AtomicInteger createdCount = new AtomicInteger();</span><br><span class="line">    </span><br><span class="line">    public ObjectPool(ObjectFactory&lt;T&gt; factory, int initialSize, int maxSize) &#123;</span><br><span class="line">        this.factory = factory;</span><br><span class="line">        this.maxSize = maxSize;</span><br><span class="line">        </span><br><span class="line">        for (int i = 0; i &lt; initialSize &amp;&amp; i &lt; maxSize; i++) &#123;</span><br><span class="line">            pool.add(factory.create());</span><br><span class="line">            createdCount.incrementAndGet();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public T borrow() &#123;</span><br><span class="line">        T object = pool.poll();</span><br><span class="line">        if (object == null) &#123;</span><br><span class="line">            if (createdCount.get() &lt; maxSize) &#123;</span><br><span class="line">                object = factory.create();</span><br><span class="line">                createdCount.incrementAndGet();</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                // ç­‰å¾…æˆ–æŠ›å‡ºå¼‚å¸¸</span><br><span class="line">                throw new IllegalStateException(&quot;å¯¹è±¡æ± å·²æ»¡&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        if (object instanceof Poolable) &#123;</span><br><span class="line">            ((Poolable) object).onBorrow();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        return object;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void returnObject(T object) &#123;</span><br><span class="line">        if (object == null) return;</span><br><span class="line">        </span><br><span class="line">        if (object instanceof Poolable) &#123;</span><br><span class="line">            ((Poolable) object).onReturn();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        pool.offer(object);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void clear() &#123;</span><br><span class="line">        pool.clear();</span><br><span class="line">        createdCount.set(0);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public int getSize() &#123;</span><br><span class="line">        return pool.size();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public int getCreatedCount() &#123;</span><br><span class="line">        return createdCount.get();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public interface ObjectFactory&lt;T&gt; &#123;</span><br><span class="line">        T create();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public interface Poolable &#123;</span><br><span class="line">        void onBorrow();</span><br><span class="line">        void onReturn();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å­å¼¹å¯¹è±¡æ± ä½¿ç”¨ç¤ºä¾‹</span><br><span class="line">package com.javagame.domain;</span><br><span class="line"></span><br><span class="line">import com.javagame.utils.ObjectPool;</span><br><span class="line"></span><br><span class="line">public class BulletManager &#123;</span><br><span class="line">    private static final ObjectPool&lt;Bullet&gt; bulletPool = new ObjectPool&lt;&gt;(</span><br><span class="line">        () -&gt; new Bullet(),</span><br><span class="line">        100,  // åˆå§‹å¤§å°</span><br><span class="line">        1000  // æœ€å¤§å¤§å°</span><br><span class="line">    );</span><br><span class="line">    </span><br><span class="line">    public Bullet createBullet(Point position, Point target, int damage) &#123;</span><br><span class="line">        Bullet bullet = bulletPool.borrow();</span><br><span class="line">        bullet.reset(position, target, damage);</span><br><span class="line">        return bullet;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void destroyBullet(Bullet bullet) &#123;</span><br><span class="line">        bulletPool.returnObject(bullet);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¯æ± åŒ–å­å¼¹ç±»</span><br><span class="line">package com.javagame.domain;</span><br><span class="line"></span><br><span class="line">import com.javagame.utils.ObjectPool.Poolable;</span><br><span class="line"></span><br><span class="line">public class Bullet implements Poolable &#123;</span><br><span class="line">    private Point position;</span><br><span class="line">    private Point target;</span><br><span class="line">    private int damage;</span><br><span class="line">    private boolean active;</span><br><span class="line">    </span><br><span class="line">    public void reset(Point position, Point target, int damage) &#123;</span><br><span class="line">        this.position = position;</span><br><span class="line">        this.target = target;</span><br><span class="line">        this.damage = damage;</span><br><span class="line">        this.active = true;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void update() &#123;</span><br><span class="line">        if (!active) return;</span><br><span class="line">        </span><br><span class="line">        // ç§»åŠ¨é€»è¾‘</span><br><span class="line">        // ...</span><br><span class="line">        </span><br><span class="line">        // æ£€æŸ¥å‘½ä¸­</span><br><span class="line">        if (position.distanceTo(target) &lt; 1) &#123;</span><br><span class="line">            active = false;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public void onBorrow() &#123;</span><br><span class="line">        // å€Ÿç”¨æ—¶çš„åˆå§‹åŒ–</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public void onReturn() &#123;</span><br><span class="line">        // å½’è¿˜æ—¶çš„æ¸…ç†</span><br><span class="line">        this.position = null;</span><br><span class="line">        this.target = null;</span><br><span class="line">        this.damage = 0;</span><br><span class="line">        this.active = false;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // Getters...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="ç¬¬11å‘¨ï¼šå®ç°ä¸“ä¸šçº§å›¾å½¢ç•Œé¢"><a href="#ç¬¬11å‘¨ï¼šå®ç°ä¸“ä¸šçº§å›¾å½¢ç•Œé¢" class="headerlink" title="ç¬¬11å‘¨ï¼šå®ç°ä¸“ä¸šçº§å›¾å½¢ç•Œé¢"></a><strong>ç¬¬11å‘¨ï¼šå®ç°ä¸“ä¸šçº§å›¾å½¢ç•Œé¢</strong></h3><h4 id="æ­¥éª¤20ï¼šä½¿ç”¨JavaFXå®ç°é«˜çº§UI"><a href="#æ­¥éª¤20ï¼šä½¿ç”¨JavaFXå®ç°é«˜çº§UI" class="headerlink" title="æ­¥éª¤20ï¼šä½¿ç”¨JavaFXå®ç°é«˜çº§UI"></a><strong>æ­¥éª¤20ï¼šä½¿ç”¨JavaFXå®ç°é«˜çº§UI</strong></h4><p><strong>1. JavaFXä¸»ç•Œé¢</strong></p>
<p>java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br></pre></td><td class="code"><pre><span class="line">// ui/javafx/MainWindow.java</span><br><span class="line">package com.javagame.ui.javafx;</span><br><span class="line"></span><br><span class="line">import javafx.application.Application;</span><br><span class="line">import javafx.scene.Scene;</span><br><span class="line">import javafx.scene.canvas.Canvas;</span><br><span class="line">import javafx.scene.canvas.GraphicsContext;</span><br><span class="line">import javafx.scene.control.*;</span><br><span class="line">import javafx.scene.layout.*;</span><br><span class="line">import javafx.stage.Stage;</span><br><span class="line">import javafx.animation.AnimationTimer;</span><br><span class="line">import javafx.scene.paint.Color;</span><br><span class="line">import javafx.scene.text.Font;</span><br><span class="line">import javafx.geometry.Insets;</span><br><span class="line"></span><br><span class="line">public class MainWindow extends Application &#123;</span><br><span class="line">    private Canvas gameCanvas;</span><br><span class="line">    private GraphicsContext gc;</span><br><span class="line">    private GameEngine gameEngine;</span><br><span class="line">    private AnimationTimer gameLoop;</span><br><span class="line">    </span><br><span class="line">    private Label goldLabel;</span><br><span class="line">    private Label healthLabel;</span><br><span class="line">    private Label waveLabel;</span><br><span class="line">    private Label scoreLabel;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public void start(Stage primaryStage) &#123;</span><br><span class="line">        primaryStage.setTitle(&quot;Java Defender - Professional Edition&quot;);</span><br><span class="line">        </span><br><span class="line">        // åˆ›å»ºä¸»å¸ƒå±€</span><br><span class="line">        BorderPane root = new BorderPane();</span><br><span class="line">        </span><br><span class="line">        // é¡¶éƒ¨å·¥å…·æ </span><br><span class="line">        root.setTop(createToolbar());</span><br><span class="line">        </span><br><span class="line">        // ä¸­å¤®æ¸¸æˆåŒºåŸŸ</span><br><span class="line">        StackPane gamePane = new StackPane();</span><br><span class="line">        gameCanvas = new Canvas(1024, 768);</span><br><span class="line">        gc = gameCanvas.getGraphicsContext2D();</span><br><span class="line">        gamePane.getChildren().add(gameCanvas);</span><br><span class="line">        </span><br><span class="line">        root.setCenter(gamePane);</span><br><span class="line">        </span><br><span class="line">        // å³ä¾§æ§åˆ¶é¢æ¿</span><br><span class="line">        root.setRight(createControlPanel());</span><br><span class="line">        </span><br><span class="line">        // åº•éƒ¨çŠ¶æ€æ </span><br><span class="line">        root.setBottom(createStatusBar());</span><br><span class="line">        </span><br><span class="line">        // è®¾ç½®åœºæ™¯</span><br><span class="line">        Scene scene = new Scene(root, 1366, 768);</span><br><span class="line">        primaryStage.setScene(scene);</span><br><span class="line">        </span><br><span class="line">        // åˆå§‹åŒ–æ¸¸æˆå¼•æ“</span><br><span class="line">        initializeGame();</span><br><span class="line">        </span><br><span class="line">        // å¯åŠ¨æ¸¸æˆå¾ªç¯</span><br><span class="line">        startGameLoop();</span><br><span class="line">        </span><br><span class="line">        // æ˜¾ç¤ºçª—å£</span><br><span class="line">        primaryStage.show();</span><br><span class="line">        </span><br><span class="line">        // çª—å£å…³é—­äº‹ä»¶</span><br><span class="line">        primaryStage.setOnCloseRequest(event -&gt; &#123;</span><br><span class="line">            stopGameLoop();</span><br><span class="line">            if (gameEngine != null) &#123;</span><br><span class="line">                gameEngine.stopGame();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private ToolBar createToolbar() &#123;</span><br><span class="line">        ToolBar toolbar = new ToolBar();</span><br><span class="line">        </span><br><span class="line">        Button startButton = new Button(&quot;â–¶ å¼€å§‹æ¸¸æˆ&quot;);</span><br><span class="line">        startButton.setOnAction(e -&gt; gameEngine.startGame());</span><br><span class="line">        </span><br><span class="line">        Button pauseButton = new Button(&quot;â¸ æš‚åœ&quot;);</span><br><span class="line">        pauseButton.setOnAction(e -&gt; gameEngine.pauseGame());</span><br><span class="line">        </span><br><span class="line">        Button saveButton = new Button(&quot;ğŸ’¾ ä¿å­˜&quot;);</span><br><span class="line">        saveButton.setOnAction(e -&gt; saveGame());</span><br><span class="line">        </span><br><span class="line">        Button loadButton = new Button(&quot;ğŸ“‚ åŠ è½½&quot;);</span><br><span class="line">        loadButton.setOnAction(e -&gt; loadGame());</span><br><span class="line">        </span><br><span class="line">        Button settingsButton = new Button(&quot;âš™ è®¾ç½®&quot;);</span><br><span class="line">        settingsButton.setOnAction(e -&gt; showSettings());</span><br><span class="line">        </span><br><span class="line">        toolbar.getItems().addAll(</span><br><span class="line">            startButton, pauseButton, new Separator(),</span><br><span class="line">            saveButton, loadButton, new Separator(),</span><br><span class="line">            settingsButton</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        return toolbar;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private VBox createControlPanel() &#123;</span><br><span class="line">        VBox controlPanel = new VBox(10);</span><br><span class="line">        controlPanel.setPadding(new Insets(10));</span><br><span class="line">        controlPanel.setStyle(&quot;-fx-background-color: #2b2b2b;&quot;);</span><br><span class="line">        controlPanel.setPrefWidth(250);</span><br><span class="line">        </span><br><span class="line">        // ç©å®¶ä¿¡æ¯é¢æ¿</span><br><span class="line">        VBox playerInfo = createPlayerInfoPanel();</span><br><span class="line">        </span><br><span class="line">        // é˜²å¾¡å¡”é€‰æ‹©é¢æ¿</span><br><span class="line">        VBox towerSelection = createTowerSelectionPanel();</span><br><span class="line">        </span><br><span class="line">        // æŠ€èƒ½é¢æ¿</span><br><span class="line">        VBox skillsPanel = createSkillsPanel();</span><br><span class="line">        </span><br><span class="line">        // ç§‘æŠ€æ ‘é¢æ¿</span><br><span class="line">        VBox techPanel = createTechPanel();</span><br><span class="line">        </span><br><span class="line">        TabPane tabPane = new TabPane();</span><br><span class="line">        tabPane.getTabs().addAll(</span><br><span class="line">            new Tab(&quot;é˜²å¾¡å¡”&quot;, towerSelection),</span><br><span class="line">            new Tab(&quot;æŠ€èƒ½&quot;, skillsPanel),</span><br><span class="line">            new Tab(&quot;ç§‘æŠ€&quot;, techPanel)</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        controlPanel.getChildren().addAll(playerInfo, tabPane);</span><br><span class="line">        return controlPanel;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private VBox createPlayerInfoPanel() &#123;</span><br><span class="line">        VBox panel = new VBox(5);</span><br><span class="line">        panel.setPadding(new Insets(10));</span><br><span class="line">        panel.setStyle(&quot;-fx-background-color: #3c3c3c; -fx-background-radius: 5;&quot;);</span><br><span class="line">        </span><br><span class="line">        Label title = new Label(&quot;ç©å®¶ä¿¡æ¯&quot;);</span><br><span class="line">        title.setFont(Font.font(&quot;Arial&quot;, 14));</span><br><span class="line">        title.setTextFill(Color.WHITE);</span><br><span class="line">        </span><br><span class="line">        goldLabel = new Label(&quot;é‡‘å¸: 1000&quot;);</span><br><span class="line">        goldLabel.setTextFill(Color.GOLD);</span><br><span class="line">        </span><br><span class="line">        healthLabel = new Label(&quot;ç”Ÿå‘½: 20&quot;);</span><br><span class="line">        healthLabel.setTextFill(Color.LIMEGREEN);</span><br><span class="line">        </span><br><span class="line">        waveLabel = new Label(&quot;æ³¢æ¬¡: 1&quot;);</span><br><span class="line">        waveLabel.setTextFill(Color.CYAN);</span><br><span class="line">        </span><br><span class="line">        scoreLabel = new Label(&quot;åˆ†æ•°: 0&quot;);</span><br><span class="line">        scoreLabel.setTextFill(Color.ORANGE);</span><br><span class="line">        </span><br><span class="line">        panel.getChildren().addAll(title, goldLabel, healthLabel, waveLabel, scoreLabel);</span><br><span class="line">        return panel;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private GridPane createTowerSelectionPanel() &#123;</span><br><span class="line">        GridPane grid = new GridPane();</span><br><span class="line">        grid.setHgap(10);</span><br><span class="line">        grid.setVgap(10);</span><br><span class="line">        grid.setPadding(new Insets(10));</span><br><span class="line">        </span><br><span class="line">        // é˜²å¾¡å¡”ç±»å‹</span><br><span class="line">        TowerType[] towerTypes = TowerType.values();</span><br><span class="line">        </span><br><span class="line">        for (int i = 0; i &lt; towerTypes.length; i++) &#123;</span><br><span class="line">            TowerType type = towerTypes[i];</span><br><span class="line">            </span><br><span class="line">            VBox towerBox = new VBox(5);</span><br><span class="line">            towerBox.setPadding(new Insets(10));</span><br><span class="line">            towerBox.setStyle(&quot;-fx-background-color: #444; -fx-background-radius: 5;&quot;);</span><br><span class="line">            towerBox.setOnMouseClicked(e -&gt; selectTower(type));</span><br><span class="line">            </span><br><span class="line">            Label nameLabel = new Label(type.getName());</span><br><span class="line">            nameLabel.setTextFill(Color.WHITE);</span><br><span class="line">            nameLabel.setFont(Font.font(&quot;Arial&quot;, 12, FontWeight.BOLD));</span><br><span class="line">            </span><br><span class="line">            Label descLabel = new Label(type.getDescription());</span><br><span class="line">            descLabel.setTextFill(Color.LIGHTGRAY);</span><br><span class="line">            descLabel.setWrapText(true);</span><br><span class="line">            </span><br><span class="line">            Label costLabel = new Label(&quot;ä»·æ ¼: &quot; + type.getCost() + &quot;é‡‘&quot;);</span><br><span class="line">            costLabel.setTextFill(Color.GOLD);</span><br><span class="line">            </span><br><span class="line">            // å›¾æ ‡ï¼ˆä½¿ç”¨Unicodeå­—ç¬¦æˆ–è‡ªå®šä¹‰å›¾å½¢ï¼‰</span><br><span class="line">            Label iconLabel = new Label(getTowerIcon(type));</span><br><span class="line">            iconLabel.setFont(Font.font(24));</span><br><span class="line">            iconLabel.setTextFill(getTowerColor(type));</span><br><span class="line">            </span><br><span class="line">            towerBox.getChildren().addAll(iconLabel, nameLabel, descLabel, costLabel);</span><br><span class="line">            grid.add(towerBox, i % 2, i / 2);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        return grid;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private String getTowerIcon(TowerType type) &#123;</span><br><span class="line">        return switch (type) &#123;</span><br><span class="line">            case BASIC -&gt; &quot;ğŸ¹&quot;;</span><br><span class="line">            case SNIPER -&gt; &quot;ğŸ¯&quot;;</span><br><span class="line">            case CANNON -&gt; &quot;ğŸ’£&quot;;</span><br><span class="line">            case SLOW -&gt; &quot;â„&quot;;</span><br><span class="line">            case POISON -&gt; &quot;â˜ &quot;;</span><br><span class="line">            default -&gt; &quot;ğŸ›¡&quot;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private Color getTowerColor(TowerType type) &#123;</span><br><span class="line">        return switch (type) &#123;</span><br><span class="line">            case BASIC -&gt; Color.BLUE;</span><br><span class="line">            case SNIPER -&gt; Color.PURPLE;</span><br><span class="line">            case CANNON -&gt; Color.RED;</span><br><span class="line">            case SLOW -&gt; Color.CYAN;</span><br><span class="line">            case POISON -&gt; Color.GREEN;</span><br><span class="line">            default -&gt; Color.GRAY;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private HBox createStatusBar() &#123;</span><br><span class="line">        HBox statusBar = new HBox(10);</span><br><span class="line">        statusBar.setPadding(new Insets(5));</span><br><span class="line">        statusBar.setStyle(&quot;-fx-background-color: #1e1e1e;&quot;);</span><br><span class="line">        </span><br><span class="line">        Label fpsLabel = new Label(&quot;FPS: 60&quot;);</span><br><span class="line">        Label memoryLabel = new Label(&quot;å†…å­˜: 128MB&quot;);</span><br><span class="line">        Label timeLabel = new Label(&quot;æ—¶é—´: 00:00&quot;);</span><br><span class="line">        </span><br><span class="line">        statusBar.getChildren().addAll(fpsLabel, new Separator(), memoryLabel, </span><br><span class="line">                                      new Separator(), timeLabel);</span><br><span class="line">        </span><br><span class="line">        // æ›´æ–°çŠ¶æ€æ çš„å®šæ—¶å™¨</span><br><span class="line">        AnimationTimer statusTimer = new AnimationTimer() &#123;</span><br><span class="line">            private long lastUpdate = 0;</span><br><span class="line">            </span><br><span class="line">            @Override</span><br><span class="line">            public void handle(long now) &#123;</span><br><span class="line">                if (now - lastUpdate &gt;= 1_000_000_000) &#123; // 1ç§’æ›´æ–°ä¸€æ¬¡</span><br><span class="line">                    updateStatusBar(fpsLabel, memoryLabel, timeLabel);</span><br><span class="line">                    lastUpdate = now;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        statusTimer.start();</span><br><span class="line">        </span><br><span class="line">        return statusBar;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void initializeGame() &#123;</span><br><span class="line">        gameEngine = new GameEngine();</span><br><span class="line">        </span><br><span class="line">        // è®¾ç½®é¼ æ ‡äº‹ä»¶</span><br><span class="line">        gameCanvas.setOnMouseClicked(event -&gt; &#123;</span><br><span class="line">            double x = event.getX();</span><br><span class="line">            double y = event.getY();</span><br><span class="line">            </span><br><span class="line">            // è½¬æ¢åæ ‡åˆ°æ¸¸æˆç½‘æ ¼</span><br><span class="line">            int gridX = (int)(x / 32); // å‡è®¾æ¯ä¸ªæ ¼å­32åƒç´ </span><br><span class="line">            int gridY = (int)(y / 32);</span><br><span class="line">            </span><br><span class="line">            if (selectedTowerType != null) &#123;</span><br><span class="line">                gameEngine.placeTower(selectedTowerType, new Point(gridX, gridY));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        // è®¾ç½®é”®ç›˜äº‹ä»¶</span><br><span class="line">        gameCanvas.setFocusTraversable(true);</span><br><span class="line">        gameCanvas.setOnKeyPressed(event -&gt; &#123;</span><br><span class="line">            switch (event.getCode()) &#123;</span><br><span class="line">                case SPACE:</span><br><span class="line">                    gameEngine.togglePause();</span><br><span class="line">                    break;</span><br><span class="line">                case DIGIT1:</span><br><span class="line">                    selectedTowerType = TowerType.BASIC;</span><br><span class="line">                    break;</span><br><span class="line">                case DIGIT2:</span><br><span class="line">                    selectedTowerType = TowerType.SNIPER;</span><br><span class="line">                    break;</span><br><span class="line">                case S:</span><br><span class="line">                    saveGame();</span><br><span class="line">                    break;</span><br><span class="line">                case L:</span><br><span class="line">                    loadGame();</span><br><span class="line">                    break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void startGameLoop() &#123;</span><br><span class="line">        gameLoop = new AnimationTimer() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void handle(long now) &#123;</span><br><span class="line">                updateGame();</span><br><span class="line">                renderGame();</span><br><span class="line">                updateUI();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        gameLoop.start();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void updateGame() &#123;</span><br><span class="line">        if (gameEngine != null &amp;&amp; gameEngine.isRunning()) &#123;</span><br><span class="line">            gameEngine.update(System.currentTimeMillis());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void renderGame() &#123;</span><br><span class="line">        // æ¸…ç©ºç”»å¸ƒ</span><br><span class="line">        gc.clearRect(0, 0, gameCanvas.getWidth(), gameCanvas.getHeight());</span><br><span class="line">        </span><br><span class="line">        // ç»˜åˆ¶èƒŒæ™¯</span><br><span class="line">        gc.setFill(Color.BLACK);</span><br><span class="line">        gc.fillRect(0, 0, gameCanvas.getWidth(), gameCanvas.getHeight());</span><br><span class="line">        </span><br><span class="line">        if (gameEngine != null) &#123;</span><br><span class="line">            // ç»˜åˆ¶åœ°å›¾</span><br><span class="line">            drawMap();</span><br><span class="line">            </span><br><span class="line">            // ç»˜åˆ¶é˜²å¾¡å¡”</span><br><span class="line">            drawTowers();</span><br><span class="line">            </span><br><span class="line">            // ç»˜åˆ¶æ•Œäºº</span><br><span class="line">            drawEnemies();</span><br><span class="line">            </span><br><span class="line">            // ç»˜åˆ¶ç‰¹æ•ˆ</span><br><span class="line">            drawEffects();</span><br><span class="line">            </span><br><span class="line">            // ç»˜åˆ¶UIå åŠ å±‚</span><br><span class="line">            drawUIOverlay();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void drawMap() &#123;</span><br><span class="line">        GameMap map = gameEngine.getGameMap();</span><br><span class="line">        List&lt;Point&gt; path = map.getPath();</span><br><span class="line">        List&lt;Point&gt; towerPositions = map.getTowerPositions();</span><br><span class="line">        </span><br><span class="line">        // ç»˜åˆ¶è·¯å¾„</span><br><span class="line">        gc.setFill(Color.GRAY);</span><br><span class="line">        for (Point point : path) &#123;</span><br><span class="line">            drawGridCell(point, Color.GRAY);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // ç»˜åˆ¶å¡”ä½</span><br><span class="line">        gc.setFill(Color.DARKGREEN);</span><br><span class="line">        for (Point point : towerPositions) &#123;</span><br><span class="line">            drawGridCell(point, Color.DARKGREEN);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // ç»˜åˆ¶èµ·ç‚¹å’Œç»ˆç‚¹</span><br><span class="line">        drawGridCell(map.getStartPoint(), Color.RED);</span><br><span class="line">        drawGridCell(map.getEndPoint(), Color.GREEN);</span><br><span class="line">        </span><br><span class="line">        // ç»˜åˆ¶ç½‘æ ¼çº¿</span><br><span class="line">        gc.setStroke(Color.DARKGRAY);</span><br><span class="line">        gc.setLineWidth(0.5);</span><br><span class="line">        </span><br><span class="line">        for (int x = 0; x &lt;= map.getWidth(); x++) &#123;</span><br><span class="line">            gc.strokeLine(x * 32, 0, x * 32, map.getHeight() * 32);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        for (int y = 0; y &lt;= map.getHeight(); y++) &#123;</span><br><span class="line">            gc.strokeLine(0, y * 32, map.getWidth() * 32, y * 32);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void drawGridCell(Point point, Color color) &#123;</span><br><span class="line">        gc.setFill(color);</span><br><span class="line">        gc.fillRect(point.getX() * 32, point.getY() * 32, 32, 32);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void drawTowers() &#123;</span><br><span class="line">        List&lt;Tower&gt; towers = gameEngine.getTowers();</span><br><span class="line">        </span><br><span class="line">        for (Tower tower : towers) &#123;</span><br><span class="line">            Point pos = tower.getPosition();</span><br><span class="line">            Color color = getTowerColor(TowerType.valueOf(tower.getType()));</span><br><span class="line">            </span><br><span class="line">            // ç»˜åˆ¶å¡”èº«</span><br><span class="line">            gc.setFill(color);</span><br><span class="line">            gc.fillOval(pos.getX() * 32 + 8, pos.getY() * 32 + 8, 16, 16);</span><br><span class="line">            </span><br><span class="line">            // ç»˜åˆ¶ç­‰çº§</span><br><span class="line">            gc.setFill(Color.WHITE);</span><br><span class="line">            gc.setFont(Font.font(10));</span><br><span class="line">            gc.fillText(String.valueOf(tower.getLevel()), </span><br><span class="line">                       pos.getX() * 32 + 14, pos.getY() * 32 + 20);</span><br><span class="line">            </span><br><span class="line">            // ç»˜åˆ¶æ”»å‡»èŒƒå›´ï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰</span><br><span class="line">            if (System.getProperty(&quot;debug.range&quot;) != null) &#123;</span><br><span class="line">                gc.setStroke(Color.YELLOW);</span><br><span class="line">                gc.setLineWidth(1);</span><br><span class="line">                gc.strokeOval(</span><br><span class="line">                    pos.getX() * 32 + 16 - tower.getRange() * 16,</span><br><span class="line">                    pos.getY() * 32 + 16 - tower.getRange() * 16,</span><br><span class="line">                    tower.getRange() * 32,</span><br><span class="line">                    tower.getRange() * 32</span><br><span class="line">                );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void drawEnemies() &#123;</span><br><span class="line">        List&lt;Enemy&gt; enemies = gameEngine.getEnemies();</span><br><span class="line">        </span><br><span class="line">        for (Enemy enemy : enemies) &#123;</span><br><span class="line">            if (!enemy.isAlive()) continue;</span><br><span class="line">            </span><br><span class="line">            Point pos = enemy.getPosition();</span><br><span class="line">            Color color = getEnemyColor(enemy.getType());</span><br><span class="line">            </span><br><span class="line">            // ç»˜åˆ¶æ•Œäºº</span><br><span class="line">            gc.setFill(color);</span><br><span class="line">            gc.fillRect(pos.getX() * 32 + 4, pos.getY() * 32 + 4, 24, 24);</span><br><span class="line">            </span><br><span class="line">            // ç»˜åˆ¶ç”Ÿå‘½æ¡</span><br><span class="line">            double healthPercent = (double) enemy.getHealth() / enemy.getMaxHealth();</span><br><span class="line">            gc.setFill(Color.RED);</span><br><span class="line">            gc.fillRect(pos.getX() * 32 + 4, pos.getY() * 32, 24, 3);</span><br><span class="line">            gc.setFill(Color.GREEN);</span><br><span class="line">            gc.fillRect(pos.getX() * 32 + 4, pos.getY() * 32, 24 * healthPercent, 3);</span><br><span class="line">            </span><br><span class="line">            // ç»˜åˆ¶æ•Œäººç±»å‹å›¾æ ‡</span><br><span class="line">            gc.setFill(Color.WHITE);</span><br><span class="line">            gc.setFont(Font.font(12));</span><br><span class="line">            String icon = getEnemyIcon(enemy.getType());</span><br><span class="line">            gc.fillText(icon, pos.getX() * 32 + 12, pos.getY() * 32 + 20);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private Color getEnemyColor(String type) &#123;</span><br><span class="line">        return switch (type) &#123;</span><br><span class="line">            case &quot;BOSS&quot; -&gt; Color.RED;</span><br><span class="line">            case &quot;TANK&quot; -&gt; Color.DARKRED;</span><br><span class="line">            case &quot;FAST&quot; -&gt; Color.CYAN;</span><br><span class="line">            default -&gt; Color.ORANGE;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private String getEnemyIcon(String type) &#123;</span><br><span class="line">        return switch (type) &#123;</span><br><span class="line">            case &quot;BOSS&quot; -&gt; &quot;ğŸ‘‘&quot;;</span><br><span class="line">            case &quot;TANK&quot; -&gt; &quot;ğŸ›¡&quot;;</span><br><span class="line">            case &quot;FAST&quot; -&gt; &quot;âš¡&quot;;</span><br><span class="line">            default -&gt; &quot;ğŸ‘¾&quot;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void updateUI() &#123;</span><br><span class="line">        if (gameEngine != null) &#123;</span><br><span class="line">            Player player = gameEngine.getPlayer();</span><br><span class="line">            goldLabel.setText(&quot;é‡‘å¸: &quot; + player.getGold());</span><br><span class="line">            healthLabel.setText(&quot;ç”Ÿå‘½: &quot; + player.getHealth());</span><br><span class="line">            scoreLabel.setText(&quot;åˆ†æ•°: &quot; + player.getScore());</span><br><span class="line">            waveLabel.setText(&quot;æ³¢æ¬¡: &quot; + gameEngine.getWaveService().getCurrentWave());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void updateStatusBar(Label fpsLabel, Label memoryLabel, Label timeLabel) &#123;</span><br><span class="line">        // æ›´æ–°FPS</span><br><span class="line">        // æ›´æ–°å†…å­˜ä½¿ç”¨</span><br><span class="line">        // æ›´æ–°æ¸¸æˆæ—¶é—´</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private TowerType selectedTowerType = null;</span><br><span class="line">    </span><br><span class="line">    private void selectTower(TowerType type) &#123;</span><br><span class="line">        selectedTowerType = type;</span><br><span class="line">        System.out.println(&quot;å·²é€‰æ‹©é˜²å¾¡å¡”: &quot; + type.getName());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void saveGame() &#123;</span><br><span class="line">        // ä¿å­˜æ¸¸æˆé€»è¾‘</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void loadGame() &#123;</span><br><span class="line">        // åŠ è½½æ¸¸æˆé€»è¾‘</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void showSettings() &#123;</span><br><span class="line">        // æ˜¾ç¤ºè®¾ç½®å¯¹è¯æ¡†</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private void stopGameLoop() &#123;</span><br><span class="line">        if (gameLoop != null) &#123;</span><br><span class="line">            gameLoop.stop();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        launch(args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// TowerTypeæšä¸¾</span><br><span class="line">enum TowerType &#123;</span><br><span class="line">    BASIC(&quot;åŸºç¡€å¡”&quot;, &quot;å¹³è¡¡çš„é˜²å¾¡å¡”&quot;, 100),</span><br><span class="line">    SNIPER(&quot;ç‹™å‡»å¡”&quot;, &quot;è¿œç¨‹é«˜ä¼¤å®³&quot;, 200),</span><br><span class="line">    CANNON(&quot;åŠ å†œç‚®&quot;, &quot;èŒƒå›´ä¼¤å®³&quot;, 300),</span><br><span class="line">    SLOW(&quot;å†°å†»å¡”&quot;, &quot;å‡é€Ÿæ•Œäºº&quot;, 150),</span><br><span class="line">    POISON(&quot;æ¯’å¡”&quot;, &quot;æŒç»­ä¼¤å®³&quot;, 180);</span><br><span class="line">    </span><br><span class="line">    private final String name;</span><br><span class="line">    private final String description;</span><br><span class="line">    private final int cost;</span><br><span class="line">    </span><br><span class="line">    TowerType(String name, String description, int cost) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.description = description;</span><br><span class="line">        this.cost = cost;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public String getName() &#123; return name; &#125;</span><br><span class="line">    public String getDescription() &#123; return description; &#125;</span><br><span class="line">    public int getCost() &#123; return cost; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="ç¬¬12å‘¨ï¼šä¼ä¸šçº§éƒ¨ç½²å’Œè¿ç»´"><a href="#ç¬¬12å‘¨ï¼šä¼ä¸šçº§éƒ¨ç½²å’Œè¿ç»´" class="headerlink" title="ç¬¬12å‘¨ï¼šä¼ä¸šçº§éƒ¨ç½²å’Œè¿ç»´"></a><strong>ç¬¬12å‘¨ï¼šä¼ä¸šçº§éƒ¨ç½²å’Œè¿ç»´</strong></h3><h4 id="æ­¥éª¤21ï¼šDockerå®¹å™¨åŒ–éƒ¨ç½²"><a href="#æ­¥éª¤21ï¼šDockerå®¹å™¨åŒ–éƒ¨ç½²" class="headerlink" title="æ­¥éª¤21ï¼šDockerå®¹å™¨åŒ–éƒ¨ç½²"></a><strong>æ­¥éª¤21ï¼šDockerå®¹å™¨åŒ–éƒ¨ç½²</strong></h4><p><strong>1. Dockerfile</strong></p>
<p>dockerfile</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"># Dockerfile</span><br><span class="line"># å¤šé˜¶æ®µæ„å»ºï¼šæ„å»ºé˜¶æ®µ</span><br><span class="line">FROM maven:3.8.4-openjdk-11-slim AS builder</span><br><span class="line"></span><br><span class="line"># è®¾ç½®å·¥ä½œç›®å½•</span><br><span class="line">WORKDIR /app</span><br><span class="line"></span><br><span class="line"># å¤åˆ¶é¡¹ç›®æ–‡ä»¶</span><br><span class="line">COPY game-core/pom.xml ./game-core/</span><br><span class="line">COPY game-core/src ./game-core/src/</span><br><span class="line"></span><br><span class="line"># æ„å»ºé¡¹ç›®</span><br><span class="line">RUN cd game-core &amp;&amp; mvn clean package -DskipTests</span><br><span class="line"></span><br><span class="line"># ç”Ÿäº§é˜¶æ®µ</span><br><span class="line">FROM openjdk:11-jre-slim</span><br><span class="line"></span><br><span class="line"># å®‰è£…Pythonï¼ˆç”¨äºå·¥å…·è„šæœ¬ï¼‰</span><br><span class="line">RUN apt-get update &amp;&amp; apt-get install -y python3 python3-pip &amp;&amp; \</span><br><span class="line">    apt-get clean &amp;&amp; rm -rf /var/lib/apt/lists/*</span><br><span class="line"></span><br><span class="line"># è®¾ç½®å·¥ä½œç›®å½•</span><br><span class="line">WORKDIR /app</span><br><span class="line"></span><br><span class="line"># å¤åˆ¶æ„å»ºäº§ç‰©</span><br><span class="line">COPY --from=builder /app/game-core/target/tower-defense.jar ./app.jar</span><br><span class="line"></span><br><span class="line"># å¤åˆ¶é…ç½®æ–‡ä»¶å’Œè„šæœ¬</span><br><span class="line">COPY config/ ./config/</span><br><span class="line">COPY tools/ ./tools/</span><br><span class="line">COPY game-ui/web-ui/ ./web-ui/</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºérootç”¨æˆ·</span><br><span class="line">RUN useradd -m -u 1000 appuser &amp;&amp; \</span><br><span class="line">    chown -R appuser:appuser /app</span><br><span class="line">USER appuser</span><br><span class="line"></span><br><span class="line"># æš´éœ²ç«¯å£</span><br><span class="line">EXPOSE 8080  # Webç•Œé¢</span><br><span class="line">EXPOSE 9090  # æ¸¸æˆæœåŠ¡å™¨</span><br><span class="line"></span><br><span class="line"># å¥åº·æ£€æŸ¥</span><br><span class="line">HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \</span><br><span class="line">    CMD curl -f http://localhost:8080/health || exit 1</span><br><span class="line"></span><br><span class="line"># å¯åŠ¨å‘½ä»¤</span><br><span class="line">CMD [&quot;java&quot;, &quot;-jar&quot;, &quot;app.jar&quot;, &quot;--server&quot;]</span><br></pre></td></tr></table></figure>



<p><strong>2. Docker Composeé…ç½®</strong></p>
<p>yaml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"># docker-compose.yml</span><br><span class="line">version: &#x27;3.8&#x27;</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  # æ¸¸æˆæœåŠ¡å™¨</span><br><span class="line">  game-server:</span><br><span class="line">    build: .</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;8080:8080&quot;  # Webç•Œé¢</span><br><span class="line">      - &quot;9090:9090&quot;  # æ¸¸æˆç«¯å£</span><br><span class="line">    environment:</span><br><span class="line">      - JAVA_OPTS=-Xmx1g -Xms512m</span><br><span class="line">      - GAME_MODE=MULTIPLAYER</span><br><span class="line">      - MAX_PLAYERS=8</span><br><span class="line">    volumes:</span><br><span class="line">      - ./config:/app/config</span><br><span class="line">      - ./saves:/app/saves</span><br><span class="line">      - ./logs:/app/logs</span><br><span class="line">    networks:</span><br><span class="line">      - game-network</span><br><span class="line">    depends_on:</span><br><span class="line">      - redis</span><br><span class="line">      - postgres</span><br><span class="line">    restart: unless-stopped</span><br><span class="line">  </span><br><span class="line">  # Redisç¼“å­˜</span><br><span class="line">  redis:</span><br><span class="line">    image: redis:6-alpine</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;6379:6379&quot;</span><br><span class="line">    volumes:</span><br><span class="line">      - redis-data:/data</span><br><span class="line">    networks:</span><br><span class="line">      - game-network</span><br><span class="line">    command: redis-server --appendonly yes</span><br><span class="line">    restart: unless-stopped</span><br><span class="line">  </span><br><span class="line">  # PostgreSQLæ•°æ®åº“</span><br><span class="line">  postgres:</span><br><span class="line">    image: postgres:13-alpine</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;5432:5432&quot;</span><br><span class="line">    environment:</span><br><span class="line">      - POSTGRES_DB=game_db</span><br><span class="line">      - POSTGRES_USER=game_user</span><br><span class="line">      - POSTGRES_PASSWORD=game_password</span><br><span class="line">    volumes:</span><br><span class="line">      - postgres-data:/var/lib/postgresql/data</span><br><span class="line">      - ./init-db.sql:/docker-entrypoint-initdb.d/init-db.sql</span><br><span class="line">    networks:</span><br><span class="line">      - game-network</span><br><span class="line">    restart: unless-stopped</span><br><span class="line">  </span><br><span class="line">  # Nginxåå‘ä»£ç†</span><br><span class="line">  nginx:</span><br><span class="line">    image: nginx:alpine</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;80:80&quot;</span><br><span class="line">      - &quot;443:443&quot;</span><br><span class="line">    volumes:</span><br><span class="line">      - ./nginx/nginx.conf:/etc/nginx/nginx.conf</span><br><span class="line">      - ./nginx/ssl:/etc/nginx/ssl</span><br><span class="line">      - ./logs/nginx:/var/log/nginx</span><br><span class="line">    networks:</span><br><span class="line">      - game-network</span><br><span class="line">    depends_on:</span><br><span class="line">      - game-server</span><br><span class="line">    restart: unless-stopped</span><br><span class="line">  </span><br><span class="line">  # ç›‘æ§ç³»ç»Ÿ</span><br><span class="line">  prometheus:</span><br><span class="line">    image: prom/prometheus:latest</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;9091:9090&quot;</span><br><span class="line">    volumes:</span><br><span class="line">      - ./monitoring/prometheus.yml:/etc/prometheus/prometheus.yml</span><br><span class="line">      - prometheus-data:/prometheus</span><br><span class="line">    networks:</span><br><span class="line">      - game-network</span><br><span class="line">    restart: unless-stopped</span><br><span class="line">  </span><br><span class="line">  grafana:</span><br><span class="line">    image: grafana/grafana:latest</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;3000:3000&quot;</span><br><span class="line">    environment:</span><br><span class="line">      - GF_SECURITY_ADMIN_PASSWORD=admin</span><br><span class="line">    volumes:</span><br><span class="line">      - grafana-data:/var/lib/grafana</span><br><span class="line">      - ./monitoring/dashboards:/etc/grafana/provisioning/dashboards</span><br><span class="line">    networks:</span><br><span class="line">      - game-network</span><br><span class="line">    depends_on:</span><br><span class="line">      - prometheus</span><br><span class="line">    restart: unless-stopped</span><br><span class="line"></span><br><span class="line">networks:</span><br><span class="line">  game-network:</span><br><span class="line">    driver: bridge</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  redis-data:</span><br><span class="line">  postgres-data:</span><br><span class="line">  prometheus-data:</span><br><span class="line">  grafana-data:</span><br></pre></td></tr></table></figure>



<p><strong>3. Kuberneteséƒ¨ç½²é…ç½®</strong></p>
<p>yaml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"># kubernetes/deployment.yaml</span><br><span class="line">apiVersion: apps/v1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  name: game-server</span><br><span class="line">  namespace: game</span><br><span class="line">spec:</span><br><span class="line">  replicas: 3</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      app: game-server</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: game-server</span><br><span class="line">    spec:</span><br><span class="line">      containers:</span><br><span class="line">      - name: game-server</span><br><span class="line">        image: your-registry/game-server:latest</span><br><span class="line">        ports:</span><br><span class="line">        - containerPort: 8080</span><br><span class="line">          name: http</span><br><span class="line">        - containerPort: 9090</span><br><span class="line">          name: game</span><br><span class="line">        env:</span><br><span class="line">        - name: JAVA_OPTS</span><br><span class="line">          value: &quot;-Xmx1g -Xms512m -XX:+UseG1GC&quot;</span><br><span class="line">        - name: DB_HOST</span><br><span class="line">          value: &quot;postgres-service&quot;</span><br><span class="line">        - name: REDIS_HOST</span><br><span class="line">          value: &quot;redis-service&quot;</span><br><span class="line">        resources:</span><br><span class="line">          requests:</span><br><span class="line">            memory: &quot;512Mi&quot;</span><br><span class="line">            cpu: &quot;500m&quot;</span><br><span class="line">          limits:</span><br><span class="line">            memory: &quot;1Gi&quot;</span><br><span class="line">            cpu: &quot;1&quot;</span><br><span class="line">        livenessProbe:</span><br><span class="line">          httpGet:</span><br><span class="line">            path: /health</span><br><span class="line">            port: 8080</span><br><span class="line">          initialDelaySeconds: 60</span><br><span class="line">          periodSeconds: 10</span><br><span class="line">        readinessProbe:</span><br><span class="line">          httpGet:</span><br><span class="line">            path: /ready</span><br><span class="line">            port: 8080</span><br><span class="line">          initialDelaySeconds: 30</span><br><span class="line">          periodSeconds: 5</span><br><span class="line">        volumeMounts:</span><br><span class="line">        - name: config-volume</span><br><span class="line">          mountPath: /app/config</span><br><span class="line">        - name: saves-volume</span><br><span class="line">          mountPath: /app/saves</span><br><span class="line">      volumes:</span><br><span class="line">      - name: config-volume</span><br><span class="line">        configMap:</span><br><span class="line">          name: game-config</span><br><span class="line">      - name: saves-volume</span><br><span class="line">        persistentVolumeClaim:</span><br><span class="line">          claimName: game-saves-pvc</span><br><span class="line">---</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: game-service</span><br><span class="line">  namespace: game</span><br><span class="line">spec:</span><br><span class="line">  selector:</span><br><span class="line">    app: game-server</span><br><span class="line">  ports:</span><br><span class="line">  - port: 80</span><br><span class="line">    targetPort: 8080</span><br><span class="line">    name: http</span><br><span class="line">  - port: 9090</span><br><span class="line">    targetPort: 9090</span><br><span class="line">    name: game</span><br><span class="line">  type: LoadBalancer</span><br><span class="line">---</span><br><span class="line">apiVersion: autoscaling/v2</span><br><span class="line">kind: HorizontalPodAutoscaler</span><br><span class="line">metadata:</span><br><span class="line">  name: game-server-hpa</span><br><span class="line">  namespace: game</span><br><span class="line">spec:</span><br><span class="line">  scaleTargetRef:</span><br><span class="line">    apiVersion: apps/v1</span><br><span class="line">    kind: Deployment</span><br><span class="line">    name: game-server</span><br><span class="line">  minReplicas: 2</span><br><span class="line">  maxReplicas: 10</span><br><span class="line">  metrics:</span><br><span class="line">  - type: Resource</span><br><span class="line">    resource:</span><br><span class="line">      name: cpu</span><br><span class="line">      target:</span><br><span class="line">        type: Utilization</span><br><span class="line">        averageUtilization: 70</span><br><span class="line">  - type: Resource</span><br><span class="line">    resource:</span><br><span class="line">      name: memory</span><br><span class="line">      target:</span><br><span class="line">        type: Utilization</span><br><span class="line">        averageUtilization: 80</span><br></pre></td></tr></table></figure>



<p><strong>4. ç›‘æ§é…ç½®</strong></p>
<p>yaml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"># monitoring/prometheus.yml</span><br><span class="line">global:</span><br><span class="line">  scrape_interval: 15s</span><br><span class="line">  evaluation_interval: 15s</span><br><span class="line"></span><br><span class="line">rule_files:</span><br><span class="line">  - &quot;alerts.yml&quot;</span><br><span class="line"></span><br><span class="line">scrape_configs:</span><br><span class="line">  - job_name: &#x27;game-server&#x27;</span><br><span class="line">    static_configs:</span><br><span class="line">      - targets: [&#x27;game-server:8080&#x27;]</span><br><span class="line">    metrics_path: &#x27;/metrics&#x27;</span><br><span class="line">    </span><br><span class="line">  - job_name: &#x27;kubernetes-pods&#x27;</span><br><span class="line">    kubernetes_sd_configs:</span><br><span class="line">      - role: pod</span><br><span class="line">    relabel_configs:</span><br><span class="line">      - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_scrape]</span><br><span class="line">        action: keep</span><br><span class="line">        regex: true</span><br><span class="line">      - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_path]</span><br><span class="line">        action: replace</span><br><span class="line">        target_label: __metrics_path__</span><br><span class="line">        regex: (.+)</span><br><span class="line">      - source_labels: [__address__, __meta_kubernetes_pod_annotation_prometheus_io_port]</span><br><span class="line">        action: replace</span><br><span class="line">        regex: ([^:]+)(?::\d+)?;(\d+)</span><br><span class="line">        replacement: $1:$2</span><br><span class="line">        target_label: __address__</span><br><span class="line"></span><br><span class="line">alerting:</span><br><span class="line">  alertmanagers:</span><br><span class="line">    - static_configs:</span><br><span class="line">        - targets: [&#x27;alertmanager:9093&#x27;]</span><br></pre></td></tr></table></figure>



<h4 id="æ­¥éª¤22ï¼šCI-CDæµæ°´çº¿"><a href="#æ­¥éª¤22ï¼šCI-CDæµæ°´çº¿" class="headerlink" title="æ­¥éª¤22ï¼šCI&#x2F;CDæµæ°´çº¿"></a><strong>æ­¥éª¤22ï¼šCI&#x2F;CDæµæ°´çº¿</strong></h4><p><strong>1. GitHub Actions CI&#x2F;CDé…ç½®</strong></p>
<p>yaml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line"># .github/workflows/full-pipeline.yml</span><br><span class="line">name: Full CI/CD Pipeline</span><br><span class="line"></span><br><span class="line">on:</span><br><span class="line">  push:</span><br><span class="line">    branches: [ main, develop ]</span><br><span class="line">  pull_request:</span><br><span class="line">    branches: [ main ]</span><br><span class="line"></span><br><span class="line">jobs:</span><br><span class="line">  # 1. ä»£ç è´¨é‡æ£€æŸ¥</span><br><span class="line">  quality-check:</span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line">    steps:</span><br><span class="line">    - uses: actions/checkout@v2</span><br><span class="line">    </span><br><span class="line">    - name: Set up JDK 11</span><br><span class="line">      uses: actions/setup-java@v2</span><br><span class="line">      with:</span><br><span class="line">        java-version: &#x27;11&#x27;</span><br><span class="line">        distribution: &#x27;adopt&#x27;</span><br><span class="line">    </span><br><span class="line">    - name: Checkstyle</span><br><span class="line">      run: |</span><br><span class="line">        cd game-core</span><br><span class="line">        mvn checkstyle:check</span><br><span class="line">    </span><br><span class="line">    - name: SpotBugs</span><br><span class="line">      run: |</span><br><span class="line">        cd game-core</span><br><span class="line">        mvn spotbugs:check</span><br><span class="line">    </span><br><span class="line">    - name: PMD</span><br><span class="line">      run: |</span><br><span class="line">        cd game-core</span><br><span class="line">        mvn pmd:check</span><br><span class="line">    </span><br><span class="line">  # 2. æ„å»ºå’Œæµ‹è¯•</span><br><span class="line">  build-and-test:</span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line">    needs: quality-check</span><br><span class="line">    steps:</span><br><span class="line">    - uses: actions/checkout@v2</span><br><span class="line">    </span><br><span class="line">    - name: Set up JDK 11</span><br><span class="line">      uses: actions/setup-java@v2</span><br><span class="line">      with:</span><br><span class="line">        java-version: &#x27;11&#x27;</span><br><span class="line">        distribution: &#x27;adopt&#x27;</span><br><span class="line">    </span><br><span class="line">    - name: Build with Maven</span><br><span class="line">      run: |</span><br><span class="line">        cd game-core</span><br><span class="line">        mvn clean compile</span><br><span class="line">    </span><br><span class="line">    - name: Run Unit Tests</span><br><span class="line">      run: |</span><br><span class="line">        cd game-core</span><br><span class="line">        mvn test</span><br><span class="line">    </span><br><span class="line">    - name: Run Integration Tests</span><br><span class="line">      run: |</span><br><span class="line">        cd tools/test-scripts</span><br><span class="line">        ./run_integration_tests.sh</span><br><span class="line">    </span><br><span class="line">    - name: Run Performance Tests</span><br><span class="line">      run: |</span><br><span class="line">        cd tools/performance</span><br><span class="line">        python performance_test.py</span><br><span class="line">    </span><br><span class="line">    - name: Generate JaCoCo Report</span><br><span class="line">      run: |</span><br><span class="line">        cd game-core</span><br><span class="line">        mvn jacoco:report</span><br><span class="line">      if: success()</span><br><span class="line">    </span><br><span class="line">    - name: Upload Test Results</span><br><span class="line">      uses: actions/upload-artifact@v2</span><br><span class="line">      with:</span><br><span class="line">        name: test-results</span><br><span class="line">        path: game-core/target/surefire-reports/</span><br><span class="line">    </span><br><span class="line">    - name: Upload Coverage Report</span><br><span class="line">      uses: actions/upload-artifact@v2</span><br><span class="line">      with:</span><br><span class="line">        name: coverage-report</span><br><span class="line">        path: game-core/target/site/jacoco/</span><br><span class="line">  </span><br><span class="line">  # 3. å®‰å…¨æ‰«æ</span><br><span class="line">  security-scan:</span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line">    needs: build-and-test</span><br><span class="line">    steps:</span><br><span class="line">    - uses: actions/checkout@v2</span><br><span class="line">    </span><br><span class="line">    - name: Set up JDK 11</span><br><span class="line">      uses: actions/setup-java@v2</span><br><span class="line">      with:</span><br><span class="line">        java-version: &#x27;11&#x27;</span><br><span class="line">        distribution: &#x27;adopt&#x27;</span><br><span class="line">    </span><br><span class="line">    - name: OWASP Dependency Check</span><br><span class="line">      run: |</span><br><span class="line">        cd game-core</span><br><span class="line">        mvn org.owasp:dependency-check-maven:check</span><br><span class="line">    </span><br><span class="line">    - name: SonarCloud Scan</span><br><span class="line">      uses: SonarSource/sonarcloud-github-action@master</span><br><span class="line">      env:</span><br><span class="line">        GITHUB_TOKEN: $&#123;&#123; secrets.GITHUB_TOKEN &#125;&#125;</span><br><span class="line">        SONAR_TOKEN: $&#123;&#123; secrets.SONAR_TOKEN &#125;&#125;</span><br><span class="line">      with:</span><br><span class="line">        args: &gt;</span><br><span class="line">          -Dsonar.projectKey=your-project-key</span><br><span class="line">          -Dsonar.organization=your-org</span><br><span class="line">          -Dsonar.java.binaries=game-core/target/classes</span><br><span class="line">  </span><br><span class="line">  # 4. æ„å»ºDockeré•œåƒ</span><br><span class="line">  docker-build:</span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line">    needs: security-scan</span><br><span class="line">    if: github.ref == &#x27;refs/heads/main&#x27;</span><br><span class="line">    steps:</span><br><span class="line">    - uses: actions/checkout@v2</span><br><span class="line">    </span><br><span class="line">    - name: Set up Docker Buildx</span><br><span class="line">      uses: docker/setup-buildx-action@v1</span><br><span class="line">    </span><br><span class="line">    - name: Log in to Docker Hub</span><br><span class="line">      uses: docker/login-action@v1</span><br><span class="line">      with:</span><br><span class="line">        username: $&#123;&#123; secrets.DOCKER_USERNAME &#125;&#125;</span><br><span class="line">        password: $&#123;&#123; secrets.DOCKER_PASSWORD &#125;&#125;</span><br><span class="line">    </span><br><span class="line">    - name: Build and push Docker image</span><br><span class="line">      uses: docker/build-push-action@v2</span><br><span class="line">      with:</span><br><span class="line">        context: .</span><br><span class="line">        file: ./Dockerfile</span><br><span class="line">        push: true</span><br><span class="line">        tags: |</span><br><span class="line">          $&#123;&#123; secrets.DOCKER_USERNAME &#125;&#125;/game-server:latest</span><br><span class="line">          $&#123;&#123; secrets.DOCKER_USERNAME &#125;&#125;/game-server:$&#123;&#123; github.sha &#125;&#125;</span><br><span class="line">  </span><br><span class="line">  # 5. éƒ¨ç½²åˆ°Kubernetes</span><br><span class="line">  deploy:</span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line">    needs: docker-build</span><br><span class="line">    if: github.ref == &#x27;refs/heads/main&#x27;</span><br><span class="line">    steps:</span><br><span class="line">    - uses: actions/checkout@v2</span><br><span class="line">    </span><br><span class="line">    - name: Set up kubectl</span><br><span class="line">      uses: azure/setup-kubectl@v1</span><br><span class="line">      with:</span><br><span class="line">        version: &#x27;latest&#x27;</span><br><span class="line">    </span><br><span class="line">    - name: Configure kubectl</span><br><span class="line">      run: |</span><br><span class="line">        mkdir -p $HOME/.kube</span><br><span class="line">        echo &quot;$&#123;&#123; secrets.KUBECONFIG &#125;&#125;&quot; &gt; $HOME/.kube/config</span><br><span class="line">    </span><br><span class="line">    - name: Deploy to Kubernetes</span><br><span class="line">      run: |</span><br><span class="line">        kubectl apply -f kubernetes/namespace.yaml</span><br><span class="line">        kubectl apply -f kubernetes/configmap.yaml</span><br><span class="line">        kubectl apply -f kubernetes/deployment.yaml</span><br><span class="line">        kubectl apply -f kubernetes/service.yaml</span><br><span class="line">        kubectl apply -f kubernetes/hpa.yaml</span><br><span class="line">    </span><br><span class="line">    - name: Wait for rollout</span><br><span class="line">      run: kubectl rollout status deployment/game-server -n game --timeout=300s</span><br><span class="line">    </span><br><span class="line">    - name: Run smoke tests</span><br><span class="line">      run: |</span><br><span class="line">        cd tools/test-scripts</span><br><span class="line">        ./run_smoke_tests.sh</span><br><span class="line">  </span><br><span class="line">  # 6. é€šçŸ¥</span><br><span class="line">  notify:</span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line">    needs: deploy</span><br><span class="line">    if: always()</span><br><span class="line">    steps:</span><br><span class="line">    - name: Send Slack notification</span><br><span class="line">      uses: 8398a7/action-slack@v3</span><br><span class="line">      with:</span><br><span class="line">        status: $&#123;&#123; job.status &#125;&#125;</span><br><span class="line">        fields: repo,message,commit,author,action,eventName,ref,workflow,job,took</span><br><span class="line">      env:</span><br><span class="line">        SLACK_WEBHOOK_URL: $&#123;&#123; secrets.SLACK_WEBHOOK_URL &#125;&#125;</span><br></pre></td></tr></table></figure>



<h2 id="ğŸ“Š-é¡¹ç›®æ€»ç»“ä¸å±•ç¤º"><a href="#ğŸ“Š-é¡¹ç›®æ€»ç»“ä¸å±•ç¤º" class="headerlink" title="ğŸ“Š é¡¹ç›®æ€»ç»“ä¸å±•ç¤º"></a>ğŸ“Š é¡¹ç›®æ€»ç»“ä¸å±•ç¤º</h2><h3 id="æœ€ç»ˆé¡¹ç›®ç»“æ„"><a href="#æœ€ç»ˆé¡¹ç›®ç»“æ„" class="headerlink" title="æœ€ç»ˆé¡¹ç›®ç»“æ„"></a><strong>æœ€ç»ˆé¡¹ç›®ç»“æ„</strong></h3><p>text</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">java-strategy-game/</span><br><span class="line">â”œâ”€â”€ game-core/                    # Javaæ ¸å¿ƒæ¨¡å—</span><br><span class="line">â”‚   â”œâ”€â”€ src/main/java/com/javagame/</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ domain/              # é¢†åŸŸæ¨¡å‹</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ entity/          # å®ä½“ç±»</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ value/           # å€¼å¯¹è±¡</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ event/           # é¢†åŸŸäº‹ä»¶</span><br><span class="line">â”‚   â”‚   â”‚   â””â”€â”€ service/         # é¢†åŸŸæœåŠ¡</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ engine/              # æ¸¸æˆå¼•æ“</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ GameEngine.java</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ GameLoop.java</span><br><span class="line">â”‚   â”‚   â”‚   â””â”€â”€ subsystems/      # å­ç³»ç»Ÿ</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ ai/                  # AIç³»ç»Ÿ</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ behavior/        # è¡Œä¸ºæ ‘</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ neural/          # ç¥ç»ç½‘ç»œ</span><br><span class="line">â”‚   â”‚   â”‚   â””â”€â”€ pathfinding/     # è·¯å¾„å¯»æ‰¾</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ network/             # ç½‘ç»œé€šä¿¡</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ server/          # æœåŠ¡å™¨ç«¯</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ client/          # å®¢æˆ·ç«¯</span><br><span class="line">â”‚   â”‚   â”‚   â””â”€â”€ protocol/        # é€šä¿¡åè®®</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ ui/                  # ç”¨æˆ·ç•Œé¢</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ javafx/          # JavaFXç•Œé¢</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ console/         # æ§åˆ¶å°ç•Œé¢</span><br><span class="line">â”‚   â”‚   â”‚   â””â”€â”€ web/             # Webç•Œé¢</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ performance/         # æ€§èƒ½ç›‘æ§</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ persistence/         # æ•°æ®æŒä¹…åŒ–</span><br><span class="line">â”‚   â”‚   â””â”€â”€ config/              # é…ç½®ç®¡ç†</span><br><span class="line">â”‚   â”œâ”€â”€ src/test/java/           # å•å…ƒæµ‹è¯•</span><br><span class="line">â”‚   â””â”€â”€ pom.xml                  # Mavené…ç½®</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ game-ui/                     # ç”¨æˆ·ç•Œé¢</span><br><span class="line">â”‚   â”œâ”€â”€ web-ui/                  # Webå‰ç«¯</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ index.html</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ css/</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ js/</span><br><span class="line">â”‚   â”‚   â””â”€â”€ assets/</span><br><span class="line">â”‚   â””â”€â”€ javafx-ui/               # JavaFXæ¡Œé¢ç«¯</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ tools/                       # å¼€å‘å·¥å…·</span><br><span class="line">â”‚   â”œâ”€â”€ map-editor/              # Pythonåœ°å›¾ç¼–è¾‘å™¨</span><br><span class="line">â”‚   â”œâ”€â”€ data-generator/          # æ•°æ®ç”Ÿæˆè„šæœ¬</span><br><span class="line">â”‚   â”œâ”€â”€ ai-trainer/              # AIè®­ç»ƒå·¥å…·</span><br><span class="line">â”‚   â”œâ”€â”€ performance/             # æ€§èƒ½æµ‹è¯•å·¥å…·</span><br><span class="line">â”‚   â”œâ”€â”€ test-scripts/            # æµ‹è¯•è„šæœ¬</span><br><span class="line">â”‚   â””â”€â”€ build-scripts/           # æ„å»ºè„šæœ¬</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ docs/                        # é¡¹ç›®æ–‡æ¡£</span><br><span class="line">â”‚   â”œâ”€â”€ architecture/            # æ¶æ„è®¾è®¡</span><br><span class="line">â”‚   â”œâ”€â”€ api/                     # APIæ–‡æ¡£</span><br><span class="line">â”‚   â”œâ”€â”€ user-guide/              # ç”¨æˆ·æŒ‡å—</span><br><span class="line">â”‚   â”œâ”€â”€ developer-guide/         # å¼€å‘è€…æŒ‡å—</span><br><span class="line">â”‚   â””â”€â”€ deployment/              # éƒ¨ç½²æŒ‡å—</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ config/                      # é…ç½®æ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ game-config.json</span><br><span class="line">â”‚   â”œâ”€â”€ ai-config.json</span><br><span class="line">â”‚   â”œâ”€â”€ network-config.yaml</span><br><span class="line">â”‚   â””â”€â”€ logging.properties</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ kubernetes/                  # K8séƒ¨ç½²é…ç½®</span><br><span class="line">â”‚   â”œâ”€â”€ deployment.yaml</span><br><span class="line">â”‚   â”œâ”€â”€ service.yaml</span><br><span class="line">â”‚   â”œâ”€â”€ ingress.yaml</span><br><span class="line">â”‚   â””â”€â”€ hpa.yaml</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ monitoring/                  # ç›‘æ§é…ç½®</span><br><span class="line">â”‚   â”œâ”€â”€ prometheus.yml</span><br><span class="line">â”‚   â”œâ”€â”€ alerts.yml</span><br><span class="line">â”‚   â””â”€â”€ dashboards/</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ docker/                      # Dockeré…ç½®</span><br><span class="line">â”‚   â”œâ”€â”€ Dockerfile</span><br><span class="line">â”‚   â”œâ”€â”€ docker-compose.yml</span><br><span class="line">â”‚   â””â”€â”€ nginx/</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ .github/workflows/           # CI/CDæµæ°´çº¿</span><br><span class="line">â”‚   â”œâ”€â”€ ci.yml</span><br><span class="line">â”‚   â”œâ”€â”€ cd.yml</span><br><span class="line">â”‚   â””â”€â”€ security-scan.yml</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ CHANGELOG.md</span><br><span class="line">â”œâ”€â”€ LICENSE</span><br><span class="line">â””â”€â”€ .gitignore</span><br></pre></td></tr></table></figure>



<h3 id="æŠ€æœ¯æ ˆæ€»ç»“"><a href="#æŠ€æœ¯æ ˆæ€»ç»“" class="headerlink" title="æŠ€æœ¯æ ˆæ€»ç»“"></a><strong>æŠ€æœ¯æ ˆæ€»ç»“</strong></h3><table>
<thead>
<tr>
<th align="left">æŠ€æœ¯é¢†åŸŸ</th>
<th align="left">æŠ€æœ¯æ ˆ</th>
<th align="left">ç”¨é€”</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>åç«¯æ ¸å¿ƒ</strong></td>
<td align="left">Java 11+, Maven</td>
<td align="left">æ¸¸æˆé€»è¾‘ã€ä¸šåŠ¡è§„åˆ™</td>
</tr>
<tr>
<td align="left"><strong>å‰ç«¯UI</strong></td>
<td align="left">JavaFX, HTML5&#x2F;CSS3&#x2F;JavaScript</td>
<td align="left">ç”¨æˆ·ç•Œé¢å±•ç¤º</td>
</tr>
<tr>
<td align="left"><strong>ç½‘ç»œé€šä¿¡</strong></td>
<td align="left">Socket, WebSocket, REST</td>
<td align="left">å¤šäººæ¸¸æˆã€å®æ—¶é€šä¿¡</td>
</tr>
<tr>
<td align="left"><strong>AIç³»ç»Ÿ</strong></td>
<td align="left">è¡Œä¸ºæ ‘ã€ç¥ç»ç½‘ç»œ</td>
<td align="left">æ™ºèƒ½æ•Œäººã€ç­–ç•¥AI</td>
</tr>
<tr>
<td align="left"><strong>æ•°æ®å­˜å‚¨</strong></td>
<td align="left">PostgreSQL, Redis</td>
<td align="left">ç©å®¶æ•°æ®ã€æ¸¸æˆçŠ¶æ€</td>
</tr>
<tr>
<td align="left"><strong>ç›‘æ§è¿ç»´</strong></td>
<td align="left">Prometheus, Grafana, ELK</td>
<td align="left">æ€§èƒ½ç›‘æ§ã€æ—¥å¿—åˆ†æ</td>
</tr>
<tr>
<td align="left"><strong>éƒ¨ç½²</strong></td>
<td align="left">Docker, Kubernetes</td>
<td align="left">å®¹å™¨åŒ–éƒ¨ç½²ã€é›†ç¾¤ç®¡ç†</td>
</tr>
<tr>
<td align="left"><strong>CI&#x2F;CD</strong></td>
<td align="left">GitHub Actions, Jenkins</td>
<td align="left">è‡ªåŠ¨åŒ–æ„å»ºéƒ¨ç½²</td>
</tr>
<tr>
<td align="left"><strong>æµ‹è¯•</strong></td>
<td align="left">JUnit, Mockito, Selenium</td>
<td align="left">å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•</td>
</tr>
<tr>
<td align="left"><strong>æ–‡æ¡£</strong></td>
<td align="left">Markdown, JavaDoc, Swagger</td>
<td align="left">ä»£ç æ–‡æ¡£ã€APIæ–‡æ¡£</td>
</tr>
</tbody></table>
<h3 id="é¢è¯•å±•ç¤ºè¦ç‚¹"><a href="#é¢è¯•å±•ç¤ºè¦ç‚¹" class="headerlink" title="é¢è¯•å±•ç¤ºè¦ç‚¹"></a><strong>é¢è¯•å±•ç¤ºè¦ç‚¹</strong></h3><ol>
<li><strong>æ¶æ„è®¾è®¡èƒ½åŠ›</strong><ul>
<li>å±•ç¤ºåˆ†å±‚æ¶æ„å›¾</li>
<li>è§£é‡Šè®¾è®¡æ¨¡å¼åº”ç”¨</li>
<li>å±•ç¤ºæ¨¡å—åŒ–è®¾è®¡</li>
</ul>
</li>
<li><strong>æŠ€æœ¯å¹¿åº¦</strong><ul>
<li>å¤šè¯­è¨€åä½œï¼ˆJava, Python, JavaScript, Shellï¼‰</li>
<li>å¤šç§æŠ€æœ¯æ ˆæ•´åˆ</li>
<li>å‰åç«¯åˆ†ç¦»æ¶æ„</li>
</ul>
</li>
<li><strong>å·¥ç¨‹åŒ–å®è·µ</strong><ul>
<li>CI&#x2F;CDæµæ°´çº¿</li>
<li>è‡ªåŠ¨åŒ–æµ‹è¯•</li>
<li>å®¹å™¨åŒ–éƒ¨ç½²</li>
<li>ç›‘æ§å‘Šè­¦ç³»ç»Ÿ</li>
</ul>
</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong><ul>
<li>å†…å­˜ç®¡ç†ï¼ˆå¯¹è±¡æ± ï¼‰</li>
<li>ç½‘ç»œä¼˜åŒ–</li>
<li>æ•°æ®åº“ä¼˜åŒ–</li>
</ul>
</li>
<li><strong>é¡¹ç›®ç®¡ç†</strong><ul>
<li>å®Œæ•´çš„æ–‡æ¡£ä½“ç³»</li>
<li>ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥</li>
<li>å›¢é˜Ÿåä½œæµç¨‹</li>
</ul>
</li>
</ol>
<h3 id="ä¸‹ä¸€æ­¥å»ºè®®"><a href="#ä¸‹ä¸€æ­¥å»ºè®®" class="headerlink" title="ä¸‹ä¸€æ­¥å»ºè®®"></a><strong>ä¸‹ä¸€æ­¥å»ºè®®</strong></h3><ol>
<li><strong>å•†ä¸šåŒ–æ‰©å±•</strong>ï¼š<ul>
<li>æ·»åŠ å†…è´­ç³»ç»Ÿ</li>
<li>å®ç°æˆå°±ç³»ç»Ÿ</li>
<li>æ·»åŠ ç¤¾äº¤åŠŸèƒ½ï¼ˆå¥½å‹ã€å…¬ä¼šï¼‰</li>
</ul>
</li>
<li><strong>æŠ€æœ¯æ·±åº¦</strong>ï¼š<ul>
<li>å®ç°ç‰©ç†å¼•æ“</li>
<li>æ·»åŠ VR&#x2F;ARæ”¯æŒ</li>
<li>å®ç°è·¨å¹³å°ï¼ˆç§»åŠ¨ç«¯ï¼‰</li>
</ul>
</li>
<li><strong>äº‘åŸç”Ÿ</strong>ï¼š<ul>
<li>è¿ç§»åˆ°äº‘å‡½æ•°ï¼ˆAWS Lambdaï¼‰</li>
<li>å®ç°Serverlessæ¶æ„</li>
<li>æ·»åŠ å¤§æ•°æ®åˆ†æï¼ˆç©å®¶è¡Œä¸ºåˆ†æï¼‰</li>
</ul>
</li>
<li><strong>å¼€æºè´¡çŒ®</strong>ï¼š<ul>
<li>å°†é¡¹ç›®å¼€æºåˆ°GitHub</li>
<li>æ’°å†™æŠ€æœ¯åšå®¢åˆ†äº«</li>
<li>å‚ä¸æ¸¸æˆå¼€å‘ç¤¾åŒº</li>
</ul>
</li>
</ol>
<p>è¿™ä¸ªé¡¹ç›®ç°åœ¨å·²ç»æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¼ä¸šçº§æ¸¸æˆé¡¹ç›®ï¼Œä¸ä»…èƒ½å¤Ÿå±•ç¤ºä½ çš„ç¼–ç¨‹èƒ½åŠ›ï¼Œè¿˜èƒ½å±•ç¤ºä½ åœ¨è½¯ä»¶å·¥ç¨‹ã€ç³»ç»Ÿæ¶æ„ã€DevOpsç­‰æ–¹é¢çš„ç»¼åˆèƒ½åŠ›ã€‚åœ¨é¢è¯•ä¸­å¯ä»¥è‡ªè±ªåœ°å±•ç¤ºè¿™ä¸ªé¡¹ç›®ï¼Œå®ƒè¯æ˜ä½ å…·å¤‡ä»é›¶å¼€å§‹æ„å»ºå¤æ‚ç³»ç»Ÿçš„èƒ½åŠ›ã€‚</p>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">
    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/post/95f568fe.html" rel="prev" title="Shellå®è·µ-æ–‡ä»¶æ‰¹å¤„ç†å™¨">
                  <i class="fa fa-angle-left"></i> Shellå®è·µ-æ–‡ä»¶æ‰¹å¤„ç†å™¨
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/post/9aaf297a.html" rel="next" title="å¤šè¯­è¨€ç‹å›½ä¿å«æˆ˜è®¾è®¡ä¸å®ç°">
                  å¤šè¯­è¨€ç‹å›½ä¿å«æˆ˜è®¾è®¡ä¸å®ç° <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa-regular fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder"></span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="Word count total">426k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">25:50</span>
  </span>
</div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.1.0/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.9.0/mermaid.min.js","integrity":"sha256-stuqcu2FrjYCXDOytWFA5SoUE/r3nkp6gTglzNSlavU="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>

  <script class="next-config" data-name="wavedrom" type="application/json">{"enable":true,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/wavedrom/3.5.0/wavedrom.min.js","integrity":"sha256-INLAoJc6quTNfiMWkGZniYO2cxE8mHpddnLow1m6RFs="}}</script>
  <script class="next-config" data-name="wavedrom_skin" type="application/json">{"enable":true,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/wavedrom/3.5.0/skins/default.js","integrity":"sha256-fduc/Zszk5ezWws2uInY/ALWVmIrmV6VTgXbsYSReFI="}}</script>
  <script src="/js/third-party/tags/wavedrom.js"></script>




  





</body>
</html>
